2025-03-12 05:47:45,059 - payroll_api - INFO - Service modules imported successfully
2025-03-12 05:47:45,096 - application.services.security.auth - INFO - API security configured
2025-03-12 05:47:45,096 - application.modules.file_agent - INFO - FileAgent を初期化します。
2025-03-12 05:47:45,133 - application.modules.file_agent - INFO - FileAgent 初期化完了: sqlite:///C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-12 05:47:45,134 - application.services.file_service - INFO - FileService initialized with temp_dir: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\temp
2025-03-12 05:47:45,134 - payroll_api - INFO - FileService initialized successfully
2025-03-12 05:47:45,134 - application.services.payroll_service - INFO - Initializing PayrollService with config: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\application\json\config.json
2025-03-12 05:47:45,135 - application.modules.agent_collection - INFO - エージェントコレクションを初期化しています...
2025-03-12 05:47:45,135 - application.modules.file_agent - INFO - FileAgent を初期化します。
2025-03-12 05:47:45,137 - application.modules.file_agent - WARNING - Could not remove existing database file: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-12 05:47:45,137 - application.modules.file_agent - WARNING - Will try to reuse existing database.
2025-03-12 05:47:45,140 - application.modules.file_agent - INFO - FileAgent 初期化完了: sqlite:///C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-12 05:47:45,140 - application.modules.agent_collection - INFO - ファイルエージェントを初期化しました。
2025-03-12 05:47:47,176 - application.modules.agent_collection - INFO - 設定ファイルを正常に読み込みました: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\application\json\config.json
2025-03-12 05:47:47,185 - application.modules.agent_collection - INFO - タスクを正常に作成。タスク数: 4
2025-03-12 05:47:47,185 - application.modules.agent_collection - INFO - IntentAnalyzer を初期化
2025-03-12 05:47:47,185 - application.modules.agent_collection - INFO - RAG_AGENT: 初期化開始
2025-03-12 05:47:47,185 - application.modules.rag_agent - INFO - RAG_Agentを初期化します。
2025-03-12 05:47:56,502 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-03-12 05:47:56,502 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-03-12 05:47:59,792 - application.modules.rag_agent - INFO - RAG用に複数ファイルからRetrieverを作成します。
2025-03-12 05:47:59,815 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-03-12 05:47:59,841 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-03-12 05:47:59,844 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-03-12 05:48:00,083 - application.modules.rag_agent - INFO - RAG_Agent初期化完了
2025-03-12 05:48:00,083 - application.modules.agent_collection - INFO - RAG_AGENT: 初期化完了
2025-03-12 05:48:00,083 - application.modules.agent_collection - INFO - workflow 作成
2025-03-12 05:48:00,083 - application.services.payroll_service - INFO - AgentCollection initialized successfully
2025-03-12 05:48:00,083 - payroll_api - INFO - PayrollService initialized successfully
2025-03-12 05:48:00,085 - application.services.session_service - INFO - Session persistence enabled, using directory: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\sessions
2025-03-12 05:48:00,085 - application.services.session_service - INFO - Loaded 0 sessions from disk
2025-03-12 05:48:00,085 - application.services.session_service - INFO - SessionService initialized with 0 sessions
2025-03-12 05:48:00,085 - payroll_api - INFO - SessionService initialized successfully
2025-03-12 05:48:00,103 - application.services.session_service - INFO - Cleaned up 0 old sessions
2025-03-12 05:48:00,103 - payroll_api - INFO - Startup: cleaned up sessions older than 24 hours
2025-03-12 05:48:00,104 - payroll_api - INFO - Startup: cleaned up temporary files
2025-03-12 05:49:26,743 - application.services.security.auth - INFO - Request: GET http://localhost:8000/docs from 127.0.0.1 - Status: 200 - Duration: 0.002s
2025-03-12 05:49:55,951 - application.services.security.auth - INFO - Request: GET http://localhost:8000/health from 127.0.0.1 - Status: 200 - Duration: 0.001s
2025-03-12 05:49:56,503 - application.services.security.auth - INFO - Request: GET http://localhost:8000/favicon.ico from 127.0.0.1 - Status: 404 - Duration: 0.002s
2025-03-12 05:50:20,539 - application.services.security.auth - INFO - Request: GET http://localhost:8000/docs from 127.0.0.1 - Status: 200 - Duration: 0.000s
2025-03-12 05:53:01,452 - application.services.security.auth - INFO - Request: GET http://localhost:8000/openapi.json from 127.0.0.1 - Status: 200 - Duration: 0.277s
2025-03-12 05:53:22,273 - application.services.security.auth - INFO - Request: GET http://localhost:8000/redoc from 127.0.0.1 - Status: 200 - Duration: 0.001s
2025-03-12 05:55:09,492 - payroll_api - INFO - API shutting down
2025-03-12 05:55:15,338 - payroll_api - INFO - Service modules imported successfully
2025-03-12 05:55:15,357 - application.modules.file_agent - INFO - FileAgent を初期化します。
2025-03-12 05:55:15,413 - application.modules.file_agent - INFO - FileAgent 初期化完了: sqlite:///C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-12 05:55:15,423 - application.services.file_service - INFO - FileService initialized with temp_dir: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\temp
2025-03-12 05:55:15,425 - payroll_api - INFO - FileService initialized successfully
2025-03-12 05:55:15,425 - application.services.payroll_service - INFO - Initializing PayrollService with config: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\application\json\config.json
2025-03-12 05:55:15,425 - application.modules.agent_collection - INFO - エージェントコレクションを初期化しています...
2025-03-12 05:55:15,425 - application.modules.file_agent - INFO - FileAgent を初期化します。
2025-03-12 05:55:15,426 - application.modules.file_agent - WARNING - Could not remove existing database file: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-12 05:55:15,426 - application.modules.file_agent - WARNING - Will try to reuse existing database.
2025-03-12 05:55:15,426 - application.modules.file_agent - INFO - FileAgent 初期化完了: sqlite:///C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-12 05:55:15,426 - application.modules.agent_collection - INFO - ファイルエージェントを初期化しました。
2025-03-12 05:55:17,192 - application.modules.agent_collection - INFO - 設定ファイルを正常に読み込みました: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\application\json\config.json
2025-03-12 05:55:17,192 - application.modules.agent_collection - INFO - タスクを正常に作成。タスク数: 4
2025-03-12 05:55:17,192 - application.modules.agent_collection - INFO - IntentAnalyzer を初期化
2025-03-12 05:55:17,206 - application.modules.agent_collection - INFO - RAG_AGENT: 初期化開始
2025-03-12 05:55:17,206 - application.modules.rag_agent - INFO - RAG_Agentを初期化します。
2025-03-12 05:55:24,306 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-03-12 05:55:24,306 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-03-12 05:55:27,628 - application.modules.rag_agent - INFO - RAG用に複数ファイルからRetrieverを作成します。
2025-03-12 05:55:27,657 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-03-12 05:55:27,682 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-03-12 05:55:27,693 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-03-12 05:55:27,928 - application.modules.rag_agent - INFO - RAG_Agent初期化完了
2025-03-12 05:55:27,929 - application.modules.agent_collection - INFO - RAG_AGENT: 初期化完了
2025-03-12 05:55:27,929 - application.modules.agent_collection - INFO - workflow 作成
2025-03-12 05:55:27,931 - application.services.payroll_service - INFO - AgentCollection initialized successfully
2025-03-12 05:55:27,931 - payroll_api - INFO - PayrollService initialized successfully
2025-03-12 05:55:27,931 - application.services.session_service - INFO - Session persistence enabled, using directory: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\sessions
2025-03-12 05:55:27,931 - application.services.session_service - INFO - Loaded 0 sessions from disk
2025-03-12 05:55:27,931 - application.services.session_service - INFO - SessionService initialized with 0 sessions
2025-03-12 05:55:27,931 - payroll_api - INFO - SessionService initialized successfully
2025-03-12 05:55:27,947 - application.services.session_service - INFO - Cleaned up 0 old sessions
2025-03-12 05:55:27,948 - payroll_api - INFO - Startup: cleaned up sessions older than 24 hours
2025-03-12 05:55:27,948 - payroll_api - INFO - Startup: cleaned up temporary files
2025-03-12 06:01:06,125 - payroll_api - INFO - API shutting down
2025-03-12 06:05:21,304 - payroll_api - INFO - Service modules imported successfully
2025-03-12 06:05:21,323 - application.services.security.auth - INFO - API security configured
2025-03-12 06:05:21,324 - application.modules.file_agent - INFO - FileAgent を初期化します。
2025-03-12 06:05:21,354 - application.modules.file_agent - INFO - FileAgent 初期化完了: sqlite:///C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-12 06:05:21,354 - application.services.file_service - INFO - FileService initialized with temp_dir: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\temp
2025-03-12 06:05:21,354 - payroll_api - INFO - FileService initialized successfully
2025-03-12 06:05:21,354 - application.services.payroll_service - INFO - Initializing PayrollService with config: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\application\json\config.json
2025-03-12 06:05:21,354 - application.modules.agent_collection - INFO - エージェントコレクションを初期化しています...
2025-03-12 06:05:21,354 - application.modules.file_agent - INFO - FileAgent を初期化します。
2025-03-12 06:05:21,354 - application.modules.file_agent - WARNING - Could not remove existing database file: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-12 06:05:21,354 - application.modules.file_agent - WARNING - Will try to reuse existing database.
2025-03-12 06:05:21,360 - application.modules.file_agent - INFO - FileAgent 初期化完了: sqlite:///C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-12 06:05:21,360 - application.modules.agent_collection - INFO - ファイルエージェントを初期化しました。
2025-03-12 06:05:23,248 - application.modules.agent_collection - INFO - 設定ファイルを正常に読み込みました: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\application\json\config.json
2025-03-12 06:05:23,252 - application.modules.agent_collection - INFO - タスクを正常に作成。タスク数: 4
2025-03-12 06:05:23,252 - application.modules.agent_collection - INFO - IntentAnalyzer を初期化
2025-03-12 06:05:23,252 - application.modules.agent_collection - INFO - RAG_AGENT: 初期化開始
2025-03-12 06:05:23,252 - application.modules.rag_agent - INFO - RAG_Agentを初期化します。
2025-03-12 06:05:30,133 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-03-12 06:05:30,135 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-03-12 06:05:32,497 - application.modules.rag_agent - INFO - RAG用に複数ファイルからRetrieverを作成します。
2025-03-12 06:05:32,515 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-03-12 06:05:32,537 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-03-12 06:05:32,552 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-03-12 06:05:32,778 - application.modules.rag_agent - INFO - RAG_Agent初期化完了
2025-03-12 06:05:32,778 - application.modules.agent_collection - INFO - RAG_AGENT: 初期化完了
2025-03-12 06:05:32,778 - application.modules.agent_collection - INFO - workflow 作成
2025-03-12 06:05:32,778 - application.services.payroll_service - INFO - AgentCollection initialized successfully
2025-03-12 06:05:32,778 - payroll_api - INFO - PayrollService initialized successfully
2025-03-12 06:05:32,778 - application.services.session_service - INFO - Session persistence enabled, using directory: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\sessions
2025-03-12 06:05:32,780 - application.services.session_service - INFO - Loaded 0 sessions from disk
2025-03-12 06:05:32,780 - application.services.session_service - INFO - SessionService initialized with 0 sessions
2025-03-12 06:05:32,780 - payroll_api - INFO - SessionService initialized successfully
2025-03-12 06:05:32,792 - application.services.session_service - INFO - Cleaned up 0 old sessions
2025-03-12 06:05:32,792 - payroll_api - INFO - Startup: cleaned up sessions older than 24 hours
2025-03-12 06:05:32,792 - payroll_api - INFO - Startup: cleaned up temporary files
2025-03-12 06:05:32,794 - payroll_api - INFO - API shutting down
2025-03-12 06:05:38,452 - payroll_api - INFO - Service modules imported successfully
2025-03-12 06:05:38,469 - application.services.security.auth - INFO - API security configured
2025-03-12 06:05:38,469 - application.modules.file_agent - INFO - FileAgent を初期化します。
2025-03-12 06:05:38,506 - application.modules.file_agent - INFO - FileAgent 初期化完了: sqlite:///C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-12 06:05:38,506 - application.services.file_service - INFO - FileService initialized with temp_dir: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\temp
2025-03-12 06:05:38,506 - payroll_api - INFO - FileService initialized successfully
2025-03-12 06:05:38,506 - application.services.payroll_service - INFO - Initializing PayrollService with config: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\application\json\config.json
2025-03-12 06:05:38,506 - application.modules.agent_collection - INFO - エージェントコレクションを初期化しています...
2025-03-12 06:05:38,506 - application.modules.file_agent - INFO - FileAgent を初期化します。
2025-03-12 06:05:38,506 - application.modules.file_agent - WARNING - Could not remove existing database file: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-12 06:05:38,506 - application.modules.file_agent - WARNING - Will try to reuse existing database.
2025-03-12 06:05:38,512 - application.modules.file_agent - INFO - FileAgent 初期化完了: sqlite:///C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-12 06:05:38,513 - application.modules.agent_collection - INFO - ファイルエージェントを初期化しました。
2025-03-12 06:05:40,347 - application.modules.agent_collection - INFO - 設定ファイルを正常に読み込みました: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\application\json\config.json
2025-03-12 06:05:40,353 - application.modules.agent_collection - INFO - タスクを正常に作成。タスク数: 4
2025-03-12 06:05:40,353 - application.modules.agent_collection - INFO - IntentAnalyzer を初期化
2025-03-12 06:05:40,353 - application.modules.agent_collection - INFO - RAG_AGENT: 初期化開始
2025-03-12 06:05:40,353 - application.modules.rag_agent - INFO - RAG_Agentを初期化します。
2025-03-12 06:05:47,231 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-03-12 06:05:47,231 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-03-12 06:05:49,893 - application.modules.rag_agent - INFO - RAG用に複数ファイルからRetrieverを作成します。
2025-03-12 06:05:49,914 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-03-12 06:05:49,940 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-03-12 06:05:49,948 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-03-12 06:05:50,181 - application.modules.rag_agent - INFO - RAG_Agent初期化完了
2025-03-12 06:05:50,181 - application.modules.agent_collection - INFO - RAG_AGENT: 初期化完了
2025-03-12 06:05:50,181 - application.modules.agent_collection - INFO - workflow 作成
2025-03-12 06:05:50,181 - application.services.payroll_service - INFO - AgentCollection initialized successfully
2025-03-12 06:05:50,181 - payroll_api - INFO - PayrollService initialized successfully
2025-03-12 06:05:50,181 - application.services.session_service - INFO - Session persistence enabled, using directory: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\sessions
2025-03-12 06:05:50,181 - application.services.session_service - INFO - Loaded 0 sessions from disk
2025-03-12 06:05:50,181 - application.services.session_service - INFO - SessionService initialized with 0 sessions
2025-03-12 06:05:50,181 - payroll_api - INFO - SessionService initialized successfully
2025-03-12 06:05:50,197 - application.services.session_service - INFO - Cleaned up 0 old sessions
2025-03-12 06:05:50,197 - payroll_api - INFO - Startup: cleaned up sessions older than 24 hours
2025-03-12 06:05:50,206 - payroll_api - INFO - Startup: cleaned up temporary files
2025-03-12 06:09:09,117 - payroll_api - INFO - Task list requested
2025-03-12 06:12:08,315 - payroll_api - INFO - Conversation history requested for session SOME_SESSION_ID
2025-03-12 06:12:08,315 - payroll_api - ERROR - Error getting conversation history: Session SOME_SESSION_ID not found or has no history
2025-03-12 06:20:47,896 - payroll_api - INFO - API shutting down
2025-03-12 06:20:53,358 - payroll_api - INFO - Service modules imported successfully
2025-03-12 06:20:53,378 - application.services.security.auth - INFO - API security configured
2025-03-12 06:20:53,378 - application.modules.file_agent - INFO - FileAgent を初期化します。
2025-03-12 06:20:53,408 - application.modules.file_agent - INFO - FileAgent 初期化完了: sqlite:///C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-12 06:20:53,409 - application.services.file_service - INFO - FileService initialized with temp_dir: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\temp
2025-03-12 06:20:53,409 - payroll_api - INFO - FileService initialized successfully
2025-03-12 06:20:53,409 - application.services.payroll_service - INFO - Initializing PayrollService with config: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\application\json\config.json
2025-03-12 06:20:53,409 - application.modules.agent_collection - INFO - エージェントコレクションを初期化しています...
2025-03-12 06:20:53,409 - application.modules.file_agent - INFO - FileAgent を初期化します。
2025-03-12 06:20:53,409 - application.modules.file_agent - WARNING - Could not remove existing database file: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-12 06:20:53,411 - application.modules.file_agent - WARNING - Will try to reuse existing database.
2025-03-12 06:20:53,413 - application.modules.file_agent - INFO - FileAgent 初期化完了: sqlite:///C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-12 06:20:53,413 - application.modules.agent_collection - INFO - ファイルエージェントを初期化しました。
2025-03-12 06:20:55,118 - application.modules.agent_collection - INFO - 設定ファイルを正常に読み込みました: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\application\json\config.json
2025-03-12 06:20:55,126 - application.modules.agent_collection - INFO - タスクを正常に作成。タスク数: 4
2025-03-12 06:20:55,126 - application.modules.agent_collection - INFO - IntentAnalyzer を初期化
2025-03-12 06:20:55,126 - application.modules.agent_collection - INFO - RAG_AGENT: 初期化開始
2025-03-12 06:20:55,126 - application.modules.rag_agent - INFO - RAG_Agentを初期化します。
2025-03-12 06:21:02,228 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-03-12 06:21:02,228 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-03-12 06:21:04,344 - application.modules.rag_agent - INFO - RAG用に複数ファイルからRetrieverを作成します。
2025-03-12 06:21:04,366 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-03-12 06:21:04,388 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-03-12 06:21:04,392 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-03-12 06:21:04,637 - application.modules.rag_agent - INFO - RAG_Agent初期化完了
2025-03-12 06:21:04,639 - application.modules.agent_collection - INFO - RAG_AGENT: 初期化完了
2025-03-12 06:21:04,640 - application.modules.agent_collection - INFO - workflow 作成
2025-03-12 06:21:04,643 - application.services.payroll_service - INFO - AgentCollection initialized successfully
2025-03-12 06:21:04,643 - payroll_api - INFO - PayrollService initialized successfully
2025-03-12 06:21:04,646 - application.services.session_service - INFO - Session persistence enabled, using directory: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\sessions
2025-03-12 06:21:04,650 - application.services.session_service - INFO - Loaded 0 sessions from disk
2025-03-12 06:21:04,651 - application.services.session_service - INFO - SessionService initialized with 0 sessions
2025-03-12 06:21:04,652 - payroll_api - INFO - SessionService initialized successfully
2025-03-12 06:21:04,685 - application.services.session_service - INFO - Cleaned up 0 old sessions
2025-03-12 06:21:04,686 - payroll_api - INFO - Startup: cleaned up sessions older than 24 hours
2025-03-12 06:21:04,686 - payroll_api - INFO - Startup: cleaned up temporary files
2025-03-12 06:21:42,543 - payroll_api - INFO - API shutting down
2025-03-13 11:16:51,175 - payroll_api - INFO - Service modules imported successfully
2025-03-13 11:16:51,198 - application.services.security.auth - INFO - API security configured
2025-03-13 11:16:51,198 - application.modules.file_agent - INFO - FileAgent を初期化します。
2025-03-13 11:16:51,264 - application.modules.file_agent - INFO - FileAgent 初期化完了: sqlite:///C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-13 11:16:51,264 - application.services.file_service - INFO - FileService initialized with temp_dir: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\temp
2025-03-13 11:16:51,264 - payroll_api - INFO - FileService initialized successfully
2025-03-13 11:16:51,264 - application.services.payroll_service - INFO - Initializing PayrollService with config: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\application\json\config.json
2025-03-13 11:16:51,264 - application.modules.agent_collection - INFO - エージェントコレクションを初期化しています...
2025-03-13 11:16:51,264 - application.modules.file_agent - INFO - FileAgent を初期化します。
2025-03-13 11:16:51,264 - application.modules.file_agent - WARNING - Could not remove existing database file: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-13 11:16:51,264 - application.modules.file_agent - WARNING - Will try to reuse existing database.
2025-03-13 11:16:51,271 - application.modules.file_agent - INFO - FileAgent 初期化完了: sqlite:///C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-13 11:16:51,271 - application.modules.agent_collection - INFO - ファイルエージェントを初期化しました。
2025-03-13 11:16:53,153 - application.modules.agent_collection - INFO - 設定ファイルを正常に読み込みました: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\application\json\config.json
2025-03-13 11:16:53,165 - application.modules.agent_collection - INFO - タスクを正常に作成。タスク数: 4
2025-03-13 11:16:53,167 - application.modules.agent_collection - INFO - IntentAnalyzer を初期化
2025-03-13 11:16:53,167 - application.modules.agent_collection - INFO - RAG_AGENT: 初期化開始
2025-03-13 11:16:53,167 - application.modules.rag_agent - INFO - RAG_Agentを初期化します。
2025-03-13 11:17:25,770 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-03-13 11:17:25,770 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-03-13 11:17:28,394 - application.modules.rag_agent - INFO - RAG用に複数ファイルからRetrieverを作成します。
2025-03-13 11:17:28,433 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-03-13 11:17:28,701 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-03-13 11:17:28,720 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-03-13 11:17:28,996 - application.modules.rag_agent - INFO - RAG_Agent初期化完了
2025-03-13 11:17:28,997 - application.modules.agent_collection - INFO - RAG_AGENT: 初期化完了
2025-03-13 11:17:28,997 - application.modules.agent_collection - INFO - workflow 作成
2025-03-13 11:17:29,001 - application.services.payroll_service - INFO - AgentCollection initialized successfully
2025-03-13 11:17:29,003 - payroll_api - INFO - PayrollService initialized successfully
2025-03-13 11:17:29,005 - application.services.session_service - INFO - Session persistence enabled, using directory: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\sessions
2025-03-13 11:17:29,006 - application.services.session_service - INFO - Loaded 0 sessions from disk
2025-03-13 11:17:29,008 - application.services.session_service - INFO - SessionService initialized with 0 sessions
2025-03-13 11:17:29,008 - payroll_api - INFO - SessionService initialized successfully
2025-03-13 11:17:29,030 - application.services.session_service - INFO - Cleaned up 0 old sessions
2025-03-13 11:17:29,031 - payroll_api - INFO - Startup: cleaned up sessions older than 24 hours
2025-03-13 11:17:29,031 - payroll_api - INFO - Startup: cleaned up temporary files
2025-03-13 11:44:26,136 - payroll_api - INFO - Service modules imported successfully
2025-03-13 11:44:26,143 - application.services.security.auth - INFO - API security configured
2025-03-13 11:44:26,143 - application.modules.file_agent - INFO - FileAgent を初期化します。
2025-03-13 11:44:26,189 - application.modules.file_agent - INFO - FileAgent 初期化完了: sqlite:///C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-13 11:44:26,189 - application.services.file_service - INFO - FileService initialized with temp_dir: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\temp
2025-03-13 11:44:26,189 - payroll_api - INFO - FileService initialized successfully
2025-03-13 11:44:26,189 - application.services.payroll_service - INFO - Initializing PayrollService with config: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\application\json\config.json
2025-03-13 11:44:26,189 - application.modules.agent_collection - INFO - エージェントコレクションを初期化しています...
2025-03-13 11:44:26,189 - application.modules.file_agent - INFO - FileAgent を初期化します。
2025-03-13 11:44:26,192 - application.modules.file_agent - WARNING - Could not remove existing database file: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-13 11:44:26,192 - application.modules.file_agent - WARNING - Will try to reuse existing database.
2025-03-13 11:44:26,194 - application.modules.file_agent - INFO - FileAgent 初期化完了: sqlite:///C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-13 11:44:26,194 - application.modules.agent_collection - INFO - ファイルエージェントを初期化しました。
2025-03-13 11:44:27,980 - application.modules.agent_collection - INFO - 設定ファイルを正常に読み込みました: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\application\json\config.json
2025-03-13 11:44:27,985 - application.modules.agent_collection - INFO - タスクを正常に作成。タスク数: 4
2025-03-13 11:44:27,985 - application.modules.agent_collection - INFO - IntentAnalyzer を初期化
2025-03-13 11:44:27,985 - application.modules.agent_collection - INFO - RAG_AGENT: 初期化開始
2025-03-13 11:44:27,985 - application.modules.rag_agent - INFO - RAG_Agentを初期化します。
2025-03-13 11:44:34,630 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-03-13 11:44:34,630 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-03-13 11:44:36,852 - application.modules.rag_agent - INFO - RAG用に複数ファイルからRetrieverを作成します。
2025-03-13 11:44:36,872 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-03-13 11:44:36,885 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-03-13 11:44:36,898 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-03-13 11:44:37,129 - application.modules.rag_agent - INFO - RAG_Agent初期化完了
2025-03-13 11:44:37,129 - application.modules.agent_collection - INFO - RAG_AGENT: 初期化完了
2025-03-13 11:44:37,129 - application.modules.agent_collection - INFO - workflow 作成
2025-03-13 11:44:37,134 - application.services.payroll_service - INFO - AgentCollection initialized successfully
2025-03-13 11:44:37,135 - payroll_api - INFO - PayrollService initialized successfully
2025-03-13 11:44:37,138 - application.services.session_service - INFO - Session persistence enabled, using directory: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\sessions
2025-03-13 11:44:37,140 - application.services.session_service - INFO - Loaded 0 sessions from disk
2025-03-13 11:44:37,142 - application.services.session_service - INFO - SessionService initialized with 0 sessions
2025-03-13 11:44:37,143 - payroll_api - INFO - SessionService initialized successfully
2025-03-13 11:44:37,188 - application.services.session_service - INFO - Cleaned up 0 old sessions
2025-03-13 11:44:37,188 - payroll_api - INFO - Startup: cleaned up sessions older than 24 hours
2025-03-13 11:44:37,190 - payroll_api - INFO - Startup: cleaned up temporary files
2025-03-13 11:45:23,817 - application.services.session_service - INFO - Created new session: c0edf2ac-da7a-4d7a-90cd-6e136696f28d
2025-03-13 11:45:23,817 - payroll_api - INFO - Invalid session ID provided, created new session: c0edf2ac-da7a-4d7a-90cd-6e136696f28d
2025-03-13 11:45:23,817 - payroll_api - INFO - Processing chat message for session c0edf2ac-da7a-4d7a-90cd-6e136696f28d
2025-03-13 11:45:23,817 - application.services.payroll_service - INFO - Processing message: string
2025-03-13 11:45:24,962 - httpx - INFO - HTTP Request: POST https://formaigpt.openai.azure.com/openai/deployments/gptest/chat/completions?api-version=2024-02-15-preview "HTTP/1.1 200 OK"
2025-03-13 11:45:24,969 - payroll_api - INFO - Chat processed successfully for session c0edf2ac-da7a-4d7a-90cd-6e136696f28d, state: chat
2025-03-13 11:45:43,111 - application.services.session_service - INFO - Created new session: 7c8ba81c-1329-46ac-b5fe-eb498a052cf1
2025-03-13 11:45:43,113 - payroll_api - INFO - Invalid session ID provided, created new session: 7c8ba81c-1329-46ac-b5fe-eb498a052cf1
2025-03-13 11:45:43,113 - payroll_api - INFO - Processing chat message for session 7c8ba81c-1329-46ac-b5fe-eb498a052cf1
2025-03-13 11:45:43,114 - application.services.payroll_service - INFO - Processing message: Hello
2025-03-13 11:45:44,242 - httpx - INFO - HTTP Request: POST https://formaigpt.openai.azure.com/openai/deployments/gptest/chat/completions?api-version=2024-02-15-preview "HTTP/1.1 200 OK"
2025-03-13 11:45:44,242 - payroll_api - INFO - Chat processed successfully for session 7c8ba81c-1329-46ac-b5fe-eb498a052cf1, state: chat
2025-03-13 11:59:32,613 - payroll_api - INFO - API shutting down
2025-03-13 11:59:38,570 - payroll_api - INFO - Service modules imported successfully
2025-03-13 11:59:38,646 - application.services.security.auth - INFO - API security configured
2025-03-13 11:59:38,646 - application.modules.file_agent - INFO - FileAgent を初期化します。
2025-03-13 11:59:38,684 - application.modules.file_agent - INFO - FileAgent 初期化完了: sqlite:///C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-13 11:59:38,685 - application.services.file_service - INFO - FileService initialized with temp_dir: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\temp
2025-03-13 11:59:38,685 - payroll_api - INFO - FileService initialized successfully
2025-03-13 11:59:38,685 - application.services.payroll_service - INFO - Initializing PayrollService with config: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\application\json\config.json
2025-03-13 11:59:38,687 - application.modules.agent_collection - INFO - エージェントコレクションを初期化しています...
2025-03-13 11:59:38,687 - application.modules.file_agent - INFO - FileAgent を初期化します。
2025-03-13 11:59:38,687 - application.modules.file_agent - WARNING - Could not remove existing database file: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-13 11:59:38,687 - application.modules.file_agent - WARNING - Will try to reuse existing database.
2025-03-13 11:59:38,687 - application.modules.file_agent - INFO - FileAgent 初期化完了: sqlite:///C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-13 11:59:38,687 - application.modules.agent_collection - INFO - ファイルエージェントを初期化しました。
2025-03-13 11:59:40,574 - application.modules.agent_collection - INFO - 設定ファイルを正常に読み込みました: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\application\json\config.json
2025-03-13 11:59:40,574 - application.modules.agent_collection - INFO - タスクを正常に作成。タスク数: 4
2025-03-13 11:59:40,574 - application.modules.agent_collection - INFO - IntentAnalyzer を初期化
2025-03-13 11:59:40,574 - application.modules.agent_collection - INFO - RAG_AGENT: 初期化開始
2025-03-13 11:59:40,574 - application.modules.rag_agent - INFO - RAG_Agentを初期化します。
2025-03-13 11:59:47,274 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-03-13 11:59:47,274 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-03-13 11:59:49,636 - application.modules.rag_agent - INFO - RAG用に複数ファイルからRetrieverを作成します。
2025-03-13 11:59:49,641 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-03-13 11:59:49,665 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-03-13 11:59:49,678 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-03-13 11:59:49,900 - application.modules.rag_agent - INFO - RAG_Agent初期化完了
2025-03-13 11:59:49,900 - application.modules.agent_collection - INFO - RAG_AGENT: 初期化完了
2025-03-13 11:59:49,900 - application.modules.agent_collection - INFO - workflow 作成
2025-03-13 11:59:49,900 - application.services.payroll_service - INFO - AgentCollection initialized successfully
2025-03-13 11:59:49,900 - payroll_api - INFO - PayrollService initialized successfully
2025-03-13 11:59:49,900 - application.services.session_service - INFO - Session persistence enabled, using directory: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\sessions
2025-03-13 11:59:49,934 - application.services.session_service - INFO - Loaded 2 sessions from disk
2025-03-13 11:59:49,935 - application.services.session_service - INFO - SessionService initialized with 2 sessions
2025-03-13 11:59:49,935 - payroll_api - INFO - SessionService initialized successfully
2025-03-13 11:59:49,950 - application.services.session_service - INFO - Cleaned up 0 old sessions
2025-03-13 11:59:49,950 - payroll_api - INFO - Startup: cleaned up sessions older than 24 hours
2025-03-13 11:59:49,950 - payroll_api - INFO - Startup: cleaned up temporary files
2025-03-13 12:06:13,740 - application.services.session_service - INFO - Created new session: d5198628-1bd3-4b0a-b5c9-45827d28032c
2025-03-13 12:06:13,740 - payroll_api - INFO - Invalid session ID provided, created new session: d5198628-1bd3-4b0a-b5c9-45827d28032c
2025-03-13 12:06:13,743 - payroll_api - INFO - Processing chat message for session d5198628-1bd3-4b0a-b5c9-45827d28032c
2025-03-13 12:06:13,744 - application.services.payroll_service - INFO - Processing message: Hello
2025-03-13 12:06:15,061 - httpx - INFO - HTTP Request: POST https://formaigpt.openai.azure.com/openai/deployments/gptest/chat/completions?api-version=2024-02-15-preview "HTTP/1.1 200 OK"
2025-03-13 12:06:15,065 - payroll_api - INFO - Chat processed successfully for session d5198628-1bd3-4b0a-b5c9-45827d28032c, state: chat
2025-03-13 12:11:51,375 - application.services.session_service - INFO - Created new session: 057b59ff-3d7d-4459-a8cc-307e2fe1711a
2025-03-13 12:11:51,375 - payroll_api - INFO - Invalid session ID provided, created new session: 057b59ff-3d7d-4459-a8cc-307e2fe1711a
2025-03-13 12:23:22,120 - application.services.session_service - INFO - Created new session: 06099bb8-004f-416c-9616-54cbe4dcb901
2025-03-13 12:23:22,120 - payroll_api - INFO - Invalid session ID provided, created new session: 06099bb8-004f-416c-9616-54cbe4dcb901
2025-03-13 12:23:22,124 - payroll_api - INFO - File upload request for session 06099bb8-004f-416c-9616-54cbe4dcb901: sikyu_csv_sample.csv
2025-03-13 12:23:22,213 - application.services.file_service - INFO - Created secure copy of C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\web_application\uploads\990ec206-9fbb-4f25-aff6-a0fc33fede7c.csv at C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\temp\4545fe11-0399-42fa-a462-46a9b1c65701.csv
2025-03-13 12:23:22,214 - application.modules.file_agent - INFO - check_file_identity開始: file_path=C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\temp\4545fe11-0399-42fa-a462-46a9b1c65701.csv
2025-03-13 12:23:22,215 - application.modules.file_agent - ERROR - check_file_identity中にエラーが発生
Traceback (most recent call last):
  File "C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\application\modules\file_agent.py", line 253, in check_file_identity
    for task_dict in self.task_configs.values():
                     ^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'values'
2025-03-13 12:23:22,235 - application.services.file_service - INFO - Successfully processed file: 990ec206-9fbb-4f25-aff6-a0fc33fede7c.csv
2025-03-13 12:23:22,235 - application.services.payroll_service - INFO - Processing message: 選択されたファイル: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\web_application\uploads\990ec206-9fbb-4f25-aff6-a0fc33fede7c.csv
2025-03-13 12:23:23,455 - httpx - INFO - HTTP Request: POST https://formaigpt.openai.azure.com/openai/deployments/gptest/chat/completions?api-version=2024-02-15-preview "HTTP/1.1 200 OK"
2025-03-13 12:23:23,458 - application.modules.file_agent - INFO - check_file_identity開始: file_path=C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\web_application\uploads\990ec206-9fbb-4f25-aff6-a0fc33fede7c.csv
2025-03-13 12:23:23,721 - payroll_api - INFO - File uploaded successfully: sikyu_csv_sample.csv
2025-03-13 22:38:17,732 - application.services.session_service - INFO - Created new session: 4e11869f-ea3d-403d-bbe1-c302b71c954d
2025-03-13 22:38:17,733 - payroll_api - INFO - Invalid session ID provided, created new session: 4e11869f-ea3d-403d-bbe1-c302b71c954d
2025-03-13 22:38:17,740 - payroll_api - INFO - Processing chat message for session 4e11869f-ea3d-403d-bbe1-c302b71c954d
2025-03-13 22:38:17,742 - application.services.payroll_service - INFO - Processing message: Hello
2025-03-13 22:38:19,047 - httpx - INFO - HTTP Request: POST https://formaigpt.openai.azure.com/openai/deployments/gptest/chat/completions?api-version=2024-02-15-preview "HTTP/1.1 200 OK"
2025-03-13 22:38:19,063 - application.modules.rag_agent - INFO - RAG_Agentに問い合わせ実行: Hello
2025-03-13 22:38:19,399 - application.services.payroll_service - ERROR - Error processing message: 'tuple' object has no attribute 'get'
2025-03-13 22:38:19,402 - payroll_api - INFO - Chat processed successfully for session 4e11869f-ea3d-403d-bbe1-c302b71c954d, state: chat
2025-03-13 22:40:50,935 - payroll_api - INFO - Task list requested
2025-03-13 22:44:52,939 - application.services.session_service - INFO - Created new session: cb67d8c8-b7ec-4e30-a7a9-bfa962dc6b95
2025-03-13 22:44:52,940 - payroll_api - INFO - Created new session: cb67d8c8-b7ec-4e30-a7a9-bfa962dc6b95
2025-03-13 22:44:52,943 - payroll_api - INFO - Processing chat message for session cb67d8c8-b7ec-4e30-a7a9-bfa962dc6b95
2025-03-13 22:44:52,946 - application.services.payroll_service - INFO - Processing message: hello
2025-03-13 22:44:54,279 - httpx - INFO - HTTP Request: POST https://formaigpt.openai.azure.com/openai/deployments/gptest/chat/completions?api-version=2024-02-15-preview "HTTP/1.1 200 OK"
2025-03-13 22:44:54,284 - application.modules.rag_agent - INFO - RAG_Agentに問い合わせ実行: hello
2025-03-13 22:44:54,345 - application.services.payroll_service - ERROR - Error processing message: 'tuple' object has no attribute 'get'
2025-03-13 22:44:54,350 - payroll_api - INFO - Chat processed successfully for session cb67d8c8-b7ec-4e30-a7a9-bfa962dc6b95, state: chat
2025-03-13 22:52:52,610 - payroll_api - INFO - API shutting down
2025-03-13 22:53:04,126 - payroll_api - INFO - Service modules imported successfully
2025-03-13 22:53:04,147 - application.services.security.auth - INFO - API security configured
2025-03-13 22:53:04,148 - application.modules.file_agent - INFO - FileAgent を初期化します。
2025-03-13 22:53:04,198 - application.modules.file_agent - INFO - FileAgent 初期化完了: sqlite:///C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-13 22:53:04,198 - application.services.file_service - INFO - FileService initialized with temp_dir: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\temp
2025-03-13 22:53:04,199 - payroll_api - INFO - FileService initialized successfully
2025-03-13 22:53:04,199 - application.services.payroll_service - INFO - Initializing PayrollService with config: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\application\json\config.json
2025-03-13 22:53:04,199 - application.modules.agent_collection - INFO - エージェントコレクションを初期化しています...
2025-03-13 22:53:04,200 - application.modules.file_agent - INFO - FileAgent を初期化します。
2025-03-13 22:53:04,200 - application.modules.file_agent - WARNING - Could not remove existing database file: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-13 22:53:04,201 - application.modules.file_agent - WARNING - Will try to reuse existing database.
2025-03-13 22:53:04,203 - application.modules.file_agent - INFO - FileAgent 初期化完了: sqlite:///C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-13 22:53:04,204 - application.modules.agent_collection - INFO - ファイルエージェントを初期化しました。
2025-03-13 22:53:06,064 - application.modules.agent_collection - INFO - 設定ファイルを正常に読み込みました: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\application\json\config.json
2025-03-13 22:53:06,069 - application.modules.agent_collection - INFO - タスクを正常に作成。タスク数: 4
2025-03-13 22:53:06,070 - application.modules.agent_collection - INFO - IntentAnalyzer を初期化
2025-03-13 22:53:06,070 - application.modules.agent_collection - INFO - RAG_AGENT: 初期化開始
2025-03-13 22:53:06,071 - application.modules.rag_agent - INFO - RAG_Agentを初期化します。
2025-03-13 22:53:38,855 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-03-13 22:53:38,856 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-03-13 22:53:43,872 - application.modules.rag_agent - INFO - RAG用に複数ファイルからRetrieverを作成します。
2025-03-13 22:53:43,913 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-03-13 22:53:44,149 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-03-13 22:53:44,161 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-03-13 22:53:44,475 - application.modules.rag_agent - INFO - RAG_Agent初期化完了
2025-03-13 22:53:44,476 - application.modules.agent_collection - INFO - RAG_AGENT: 初期化完了
2025-03-13 22:53:44,477 - application.modules.agent_collection - INFO - workflow 作成
2025-03-13 22:53:44,478 - application.services.payroll_service - INFO - AgentCollection initialized successfully
2025-03-13 22:53:44,478 - payroll_api - INFO - PayrollService initialized successfully
2025-03-13 22:53:44,480 - application.services.session_service - INFO - Session persistence enabled, using directory: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\sessions
2025-03-13 22:53:44,541 - application.services.session_service - INFO - Loaded 7 sessions from disk
2025-03-13 22:53:44,542 - application.services.session_service - INFO - SessionService initialized with 7 sessions
2025-03-13 22:53:44,543 - payroll_api - INFO - SessionService initialized successfully
2025-03-13 22:53:44,553 - application.services.session_service - INFO - Cleaned up 0 old sessions
2025-03-13 22:53:44,553 - payroll_api - INFO - Startup: cleaned up sessions older than 24 hours
2025-03-13 22:53:44,555 - payroll_api - INFO - Startup: cleaned up temporary files
2025-03-13 22:54:32,412 - payroll_api - INFO - API shutting down
2025-03-13 22:54:38,095 - payroll_api - INFO - Service modules imported successfully
2025-03-13 22:54:38,118 - application.services.security.auth - INFO - API security configured
2025-03-13 22:54:38,119 - application.modules.file_agent - INFO - FileAgent を初期化します。
2025-03-13 22:54:38,160 - application.modules.file_agent - INFO - FileAgent 初期化完了: sqlite:///C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-13 22:54:38,161 - application.services.file_service - INFO - FileService initialized with temp_dir: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\temp
2025-03-13 22:54:38,161 - payroll_api - INFO - FileService initialized successfully
2025-03-13 22:54:38,162 - application.services.payroll_service - INFO - Initializing PayrollService with config: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\application\json\config.json
2025-03-13 22:54:38,163 - application.modules.agent_collection - INFO - エージェントコレクションを初期化しています...
2025-03-13 22:54:38,163 - application.modules.file_agent - INFO - FileAgent を初期化します。
2025-03-13 22:54:38,164 - application.modules.file_agent - WARNING - Could not remove existing database file: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-13 22:54:38,164 - application.modules.file_agent - WARNING - Will try to reuse existing database.
2025-03-13 22:54:38,168 - application.modules.file_agent - INFO - FileAgent 初期化完了: sqlite:///C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-13 22:54:38,168 - application.modules.agent_collection - INFO - ファイルエージェントを初期化しました。
2025-03-13 22:54:40,193 - application.modules.agent_collection - INFO - 設定ファイルを正常に読み込みました: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\application\json\config.json
2025-03-13 22:54:40,197 - application.modules.agent_collection - INFO - タスクを正常に作成。タスク数: 4
2025-03-13 22:54:40,197 - application.modules.agent_collection - INFO - IntentAnalyzer を初期化
2025-03-13 22:54:40,197 - application.modules.agent_collection - INFO - RAG_AGENT: 初期化開始
2025-03-13 22:54:40,197 - application.modules.rag_agent - INFO - RAG_Agentを初期化します。
2025-03-13 22:54:47,973 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-03-13 22:54:47,973 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-03-13 22:54:50,496 - application.modules.rag_agent - INFO - RAG用に複数ファイルからRetrieverを作成します。
2025-03-13 22:54:50,526 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-03-13 22:54:50,558 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-03-13 22:54:50,569 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-03-13 22:54:50,812 - application.modules.rag_agent - INFO - RAG_Agent初期化完了
2025-03-13 22:54:50,814 - application.modules.agent_collection - INFO - RAG_AGENT: 初期化完了
2025-03-13 22:54:50,815 - application.modules.agent_collection - INFO - workflow 作成
2025-03-13 22:54:50,817 - application.services.payroll_service - INFO - AgentCollection initialized successfully
2025-03-13 22:54:50,818 - payroll_api - INFO - PayrollService initialized successfully
2025-03-13 22:54:50,824 - application.services.session_service - INFO - Session persistence enabled, using directory: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\sessions
2025-03-13 22:54:50,839 - application.services.session_service - INFO - Loaded 7 sessions from disk
2025-03-13 22:54:50,842 - application.services.session_service - INFO - SessionService initialized with 7 sessions
2025-03-13 22:54:50,844 - payroll_api - INFO - SessionService initialized successfully
2025-03-13 22:54:50,874 - application.services.session_service - INFO - Cleaned up 0 old sessions
2025-03-13 22:54:50,875 - payroll_api - INFO - Startup: cleaned up sessions older than 24 hours
2025-03-13 22:54:50,875 - payroll_api - INFO - Startup: cleaned up temporary files
2025-03-13 22:55:39,382 - application.services.session_service - INFO - Created new session: 43a3fa0a-411e-4f83-9c1d-a06b95609d5f
2025-03-13 22:55:39,383 - payroll_api - INFO - Created new session: 43a3fa0a-411e-4f83-9c1d-a06b95609d5f
2025-03-13 22:55:39,562 - payroll_api - INFO - Processing chat message for session 43a3fa0a-411e-4f83-9c1d-a06b95609d5f
2025-03-13 22:55:39,564 - application.services.payroll_service - INFO - Processing message: Hello
2025-03-13 22:55:40,882 - httpx - INFO - HTTP Request: POST https://formaigpt.openai.azure.com/openai/deployments/gptest/chat/completions?api-version=2024-02-15-preview "HTTP/1.1 200 OK"
2025-03-13 22:55:40,890 - payroll_api - INFO - Chat processed successfully for session 43a3fa0a-411e-4f83-9c1d-a06b95609d5f, state: chat
2025-03-13 22:55:49,064 - payroll_api - INFO - Task list requested
2025-03-13 22:55:53,174 - payroll_api - INFO - Conversation history requested for session 43a3fa0a-411e-4f83-9c1d-a06b95609d5f
2025-03-13 22:55:55,227 - payroll_api - INFO - Session reset requested for 43a3fa0a-411e-4f83-9c1d-a06b95609d5f
2025-03-13 22:55:55,229 - application.modules.agent_collection - INFO - タスク 支給控除等一覧(データ更新) をリセットします。
2025-03-13 22:55:55,231 - application.modules.agent_collection - INFO - タスク 支給控除等一覧(後処理) をリセットします。
2025-03-13 22:55:55,234 - application.modules.agent_collection - INFO - タスク Yonosukeデータ作成(加算処理) をリセットします。
2025-03-13 22:55:55,236 - application.modules.agent_collection - INFO - タスク Yonosukeデータ作成(データ除去) をリセットします。
2025-03-13 22:55:55,237 - application.modules.agent_collection - INFO - 状態を変更: chat -> chat
2025-03-13 22:55:59,324 - application.services.session_service - INFO - Created new session: ad39c9be-7c5c-498e-9074-42cd665e822a
2025-03-13 22:55:59,324 - payroll_api - INFO - Created new session: ad39c9be-7c5c-498e-9074-42cd665e822a
2025-03-13 22:55:59,325 - payroll_api - INFO - Processing chat message for session ad39c9be-7c5c-498e-9074-42cd665e822a
2025-03-13 22:55:59,326 - application.services.payroll_service - INFO - Processing message: Hello from admin
2025-03-13 22:56:00,472 - httpx - INFO - HTTP Request: POST https://formaigpt.openai.azure.com/openai/deployments/gptest/chat/completions?api-version=2024-02-15-preview "HTTP/1.1 200 OK"
2025-03-13 22:56:00,478 - payroll_api - INFO - Chat processed successfully for session ad39c9be-7c5c-498e-9074-42cd665e822a, state: chat
2025-03-13 22:56:02,528 - application.services.session_service - INFO - Created new session: e5ae788e-b9bf-48b1-9d09-e394f2e25cb7
2025-03-13 22:56:02,529 - payroll_api - INFO - Created new session: e5ae788e-b9bf-48b1-9d09-e394f2e25cb7
2025-03-13 22:56:02,530 - payroll_api - INFO - Processing chat message for session e5ae788e-b9bf-48b1-9d09-e394f2e25cb7
2025-03-13 22:56:02,533 - application.services.payroll_service - INFO - Processing message: Hello from user
2025-03-13 22:56:03,123 - httpx - INFO - HTTP Request: POST https://formaigpt.openai.azure.com/openai/deployments/gptest/chat/completions?api-version=2024-02-15-preview "HTTP/1.1 200 OK"
2025-03-13 22:56:03,127 - payroll_api - INFO - Chat processed successfully for session e5ae788e-b9bf-48b1-9d09-e394f2e25cb7, state: chat
2025-03-13 22:56:05,188 - application.services.session_service - INFO - Created new session: 8bc09605-4e8d-42d9-98cc-c9f26c8bffc3
2025-03-13 22:56:05,189 - payroll_api - INFO - Created new session: 8bc09605-4e8d-42d9-98cc-c9f26c8bffc3
2025-03-13 22:56:05,191 - payroll_api - INFO - Processing chat message for session 8bc09605-4e8d-42d9-98cc-c9f26c8bffc3
2025-03-13 22:56:05,192 - application.services.payroll_service - INFO - Processing message: Hello with no auth
2025-03-13 22:56:05,743 - httpx - INFO - HTTP Request: POST https://formaigpt.openai.azure.com/openai/deployments/gptest/chat/completions?api-version=2024-02-15-preview "HTTP/1.1 200 OK"
2025-03-13 22:56:05,747 - payroll_api - INFO - Chat processed successfully for session 8bc09605-4e8d-42d9-98cc-c9f26c8bffc3, state: chat
2025-03-13 22:59:43,705 - payroll_api - INFO - API shutting down
2025-03-13 22:59:49,702 - payroll_api - INFO - Service modules imported successfully
2025-03-13 22:59:49,726 - application.services.security.auth - INFO - API security configured
2025-03-13 22:59:49,726 - application.modules.file_agent - INFO - FileAgent を初期化します。
2025-03-13 22:59:49,760 - application.modules.file_agent - INFO - FileAgent 初期化完了: sqlite:///C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-13 22:59:49,761 - application.services.file_service - INFO - FileService initialized with temp_dir: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\temp
2025-03-13 22:59:49,761 - payroll_api - INFO - FileService initialized successfully
2025-03-13 22:59:49,761 - application.services.payroll_service - INFO - Initializing PayrollService with config: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\application\json\config.json
2025-03-13 22:59:49,762 - application.modules.agent_collection - INFO - エージェントコレクションを初期化しています...
2025-03-13 22:59:49,762 - application.modules.file_agent - INFO - FileAgent を初期化します。
2025-03-13 22:59:49,763 - application.modules.file_agent - WARNING - Could not remove existing database file: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-13 22:59:49,763 - application.modules.file_agent - WARNING - Will try to reuse existing database.
2025-03-13 22:59:49,768 - application.modules.file_agent - INFO - FileAgent 初期化完了: sqlite:///C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-13 22:59:49,769 - application.modules.agent_collection - INFO - ファイルエージェントを初期化しました。
2025-03-13 22:59:51,573 - application.modules.agent_collection - INFO - 設定ファイルを正常に読み込みました: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\application\json\config.json
2025-03-13 22:59:51,578 - application.modules.agent_collection - INFO - タスクを正常に作成。タスク数: 4
2025-03-13 22:59:51,578 - application.modules.agent_collection - INFO - IntentAnalyzer を初期化
2025-03-13 22:59:51,578 - application.modules.agent_collection - INFO - RAG_AGENT: 初期化開始
2025-03-13 22:59:51,580 - application.modules.rag_agent - INFO - RAG_Agentを初期化します。
2025-03-13 22:59:58,394 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-03-13 22:59:58,394 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-03-13 23:00:00,594 - application.modules.rag_agent - INFO - RAG用に複数ファイルからRetrieverを作成します。
2025-03-13 23:00:00,611 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-03-13 23:00:00,629 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-03-13 23:00:00,636 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-03-13 23:00:00,858 - application.modules.rag_agent - INFO - RAG_Agent初期化完了
2025-03-13 23:00:00,859 - application.modules.agent_collection - INFO - RAG_AGENT: 初期化完了
2025-03-13 23:00:00,861 - application.modules.agent_collection - INFO - workflow 作成
2025-03-13 23:00:00,864 - application.services.payroll_service - INFO - AgentCollection initialized successfully
2025-03-13 23:00:00,867 - payroll_api - INFO - PayrollService initialized successfully
2025-03-13 23:00:00,870 - application.services.session_service - INFO - Session persistence enabled, using directory: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\sessions
2025-03-13 23:00:00,947 - application.services.session_service - INFO - Loaded 11 sessions from disk
2025-03-13 23:00:00,948 - application.services.session_service - INFO - SessionService initialized with 11 sessions
2025-03-13 23:00:00,948 - payroll_api - INFO - SessionService initialized successfully
2025-03-13 23:00:00,969 - application.services.session_service - INFO - Cleaned up 0 old sessions
2025-03-13 23:00:00,969 - payroll_api - INFO - Startup: cleaned up sessions older than 24 hours
2025-03-13 23:00:00,971 - payroll_api - INFO - Startup: cleaned up temporary files
2025-03-13 23:00:44,327 - payroll_api - INFO - API shutting down
2025-03-13 23:00:50,504 - payroll_api - INFO - Service modules imported successfully
2025-03-13 23:00:50,524 - application.services.security.auth - INFO - API security configured
2025-03-13 23:00:50,525 - application.modules.file_agent - INFO - FileAgent を初期化します。
2025-03-13 23:00:50,555 - application.modules.file_agent - INFO - FileAgent 初期化完了: sqlite:///C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-13 23:00:50,557 - application.services.file_service - INFO - FileService initialized with temp_dir: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\temp
2025-03-13 23:00:50,557 - payroll_api - INFO - FileService initialized successfully
2025-03-13 23:00:50,557 - application.services.payroll_service - INFO - Initializing PayrollService with config: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\application\json\config.json
2025-03-13 23:00:50,557 - application.modules.agent_collection - INFO - エージェントコレクションを初期化しています...
2025-03-13 23:00:50,558 - application.modules.file_agent - INFO - FileAgent を初期化します。
2025-03-13 23:00:50,558 - application.modules.file_agent - WARNING - Could not remove existing database file: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-13 23:00:50,559 - application.modules.file_agent - WARNING - Will try to reuse existing database.
2025-03-13 23:00:50,562 - application.modules.file_agent - INFO - FileAgent 初期化完了: sqlite:///C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-13 23:00:50,562 - application.modules.agent_collection - INFO - ファイルエージェントを初期化しました。
2025-03-13 23:00:52,339 - application.modules.agent_collection - INFO - 設定ファイルを正常に読み込みました: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\application\json\config.json
2025-03-13 23:00:52,343 - application.modules.agent_collection - INFO - タスクを正常に作成。タスク数: 4
2025-03-13 23:00:52,343 - application.modules.agent_collection - INFO - IntentAnalyzer を初期化
2025-03-13 23:00:52,344 - application.modules.agent_collection - INFO - RAG_AGENT: 初期化開始
2025-03-13 23:00:52,344 - application.modules.rag_agent - INFO - RAG_Agentを初期化します。
2025-03-13 23:01:00,806 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-03-13 23:01:00,807 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-03-13 23:01:03,515 - application.modules.rag_agent - INFO - RAG用に複数ファイルからRetrieverを作成します。
2025-03-13 23:01:03,548 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-03-13 23:01:03,571 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-03-13 23:01:03,582 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-03-13 23:01:03,818 - application.modules.rag_agent - INFO - RAG_Agent初期化完了
2025-03-13 23:01:03,820 - application.modules.agent_collection - INFO - RAG_AGENT: 初期化完了
2025-03-13 23:01:03,823 - application.modules.agent_collection - INFO - workflow 作成
2025-03-13 23:01:03,826 - application.services.payroll_service - INFO - AgentCollection initialized successfully
2025-03-13 23:01:03,829 - payroll_api - INFO - PayrollService initialized successfully
2025-03-13 23:01:03,832 - application.services.session_service - INFO - Session persistence enabled, using directory: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\sessions
2025-03-13 23:01:03,852 - application.services.session_service - INFO - Loaded 11 sessions from disk
2025-03-13 23:01:03,854 - application.services.session_service - INFO - SessionService initialized with 11 sessions
2025-03-13 23:01:03,856 - payroll_api - INFO - SessionService initialized successfully
2025-03-13 23:01:03,898 - application.services.session_service - INFO - Cleaned up 0 old sessions
2025-03-13 23:01:03,900 - payroll_api - INFO - Startup: cleaned up sessions older than 24 hours
2025-03-13 23:01:03,902 - payroll_api - INFO - Startup: cleaned up temporary files
2025-03-13 23:01:03,934 - application.services.session_service - INFO - Created new session: 406e4e53-653b-4e7f-9c71-3963a38acd43
2025-03-13 23:01:03,935 - payroll_api - INFO - Created new session: 406e4e53-653b-4e7f-9c71-3963a38acd43
2025-03-13 23:01:03,940 - payroll_api - INFO - Processing chat message for session 406e4e53-653b-4e7f-9c71-3963a38acd43
2025-03-13 23:01:03,946 - application.services.payroll_service - INFO - Processing message: hello
2025-03-13 23:01:05,666 - httpx - INFO - HTTP Request: POST https://formaigpt.openai.azure.com/openai/deployments/gptest/chat/completions?api-version=2024-02-15-preview "HTTP/1.1 200 OK"
2025-03-13 23:01:05,677 - payroll_api - INFO - Chat processed successfully for session 406e4e53-653b-4e7f-9c71-3963a38acd43, state: chat
2025-03-14 14:15:39,571 - payroll_api - INFO - Service modules imported successfully
2025-03-14 14:15:39,635 - application.services.security.auth - INFO - API security configured
2025-03-14 14:15:39,638 - application.modules.file_agent - INFO - FileAgent を初期化します。
2025-03-14 14:15:39,770 - application.modules.file_agent - INFO - FileAgent 初期化完了: sqlite:///C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-14 14:15:39,770 - application.services.file_service - INFO - FileService initialized with temp_dir: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\temp
2025-03-14 14:15:39,774 - payroll_api - INFO - FileService initialized successfully
2025-03-14 14:15:39,776 - application.services.payroll_service - INFO - Initializing PayrollService with config: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\application\json\config.json
2025-03-14 14:15:39,776 - application.modules.agent_collection - INFO - エージェントコレクションを初期化しています...
2025-03-14 14:15:39,776 - application.modules.file_agent - INFO - FileAgent を初期化します。
2025-03-14 14:15:39,780 - application.modules.file_agent - WARNING - Could not remove existing database file: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-14 14:15:39,782 - application.modules.file_agent - WARNING - Will try to reuse existing database.
2025-03-14 14:15:39,787 - application.modules.file_agent - INFO - FileAgent 初期化完了: sqlite:///C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-14 14:15:39,790 - application.modules.agent_collection - INFO - ファイルエージェントを初期化しました。
2025-03-14 14:15:44,264 - application.modules.agent_collection - INFO - 設定ファイルを正常に読み込みました: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\application\json\config.json
2025-03-14 14:15:44,266 - application.modules.agent_collection - INFO - タスクを正常に作成。タスク数: 4
2025-03-14 14:15:44,266 - application.modules.agent_collection - INFO - IntentAnalyzer を初期化
2025-03-14 14:15:44,266 - application.modules.agent_collection - INFO - RAG_AGENT: 初期化開始
2025-03-14 14:15:44,272 - application.modules.rag_agent - INFO - RAG_Agentを初期化します。
2025-03-14 14:16:58,642 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-03-14 14:16:58,642 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-03-14 14:17:03,353 - application.modules.rag_agent - INFO - RAG用に複数ファイルからRetrieverを作成します。
2025-03-14 14:17:03,393 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-03-14 14:17:03,737 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-03-14 14:17:03,749 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-03-14 14:17:04,058 - application.modules.rag_agent - INFO - RAG_Agent初期化完了
2025-03-14 14:17:04,065 - application.modules.agent_collection - INFO - RAG_AGENT: 初期化完了
2025-03-14 14:17:04,067 - application.modules.agent_collection - INFO - workflow 作成
2025-03-14 14:17:04,069 - application.services.payroll_service - INFO - AgentCollection initialized successfully
2025-03-14 14:17:04,070 - payroll_api - INFO - PayrollService initialized successfully
2025-03-14 14:17:04,073 - application.services.session_service - INFO - Session persistence enabled, using directory: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\sessions
2025-03-14 14:17:04,100 - application.services.session_service - INFO - Skipping expired session 057b59ff-3d7d-4459-a8cc-307e2fe1711a
2025-03-14 14:17:04,107 - application.services.session_service - ERROR - Error loading session 057b59ff-3d7d-4459-a8cc-307e2fe1711a: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\057b59ff-3d7d-4459-a8cc-307e2fe1711a.json'
2025-03-14 14:17:04,132 - application.services.session_service - INFO - Skipping expired session 06099bb8-004f-416c-9616-54cbe4dcb901
2025-03-14 14:17:04,140 - application.services.session_service - ERROR - Error loading session 06099bb8-004f-416c-9616-54cbe4dcb901: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\06099bb8-004f-416c-9616-54cbe4dcb901.json'
2025-03-14 14:17:04,253 - application.services.session_service - INFO - Skipping expired session 7c8ba81c-1329-46ac-b5fe-eb498a052cf1
2025-03-14 14:17:04,258 - application.services.session_service - ERROR - Error loading session 7c8ba81c-1329-46ac-b5fe-eb498a052cf1: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\7c8ba81c-1329-46ac-b5fe-eb498a052cf1.json'
2025-03-14 14:17:04,350 - application.services.session_service - INFO - Skipping expired session c0edf2ac-da7a-4d7a-90cd-6e136696f28d
2025-03-14 14:17:04,352 - application.services.session_service - ERROR - Error loading session c0edf2ac-da7a-4d7a-90cd-6e136696f28d: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\c0edf2ac-da7a-4d7a-90cd-6e136696f28d.json'
2025-03-14 14:17:04,413 - application.services.session_service - INFO - Skipping expired session d5198628-1bd3-4b0a-b5c9-45827d28032c
2025-03-14 14:17:04,416 - application.services.session_service - ERROR - Error loading session d5198628-1bd3-4b0a-b5c9-45827d28032c: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\d5198628-1bd3-4b0a-b5c9-45827d28032c.json'
2025-03-14 14:17:04,449 - application.services.session_service - INFO - Loaded 7 sessions from disk
2025-03-14 14:17:04,453 - application.services.session_service - INFO - SessionService initialized with 7 sessions
2025-03-14 14:17:04,453 - payroll_api - INFO - SessionService initialized successfully
2025-03-14 14:17:04,501 - application.services.session_service - INFO - Cleaned up 0 old sessions
2025-03-14 14:17:04,504 - payroll_api - INFO - Startup: cleaned up sessions older than 24 hours
2025-03-14 14:17:04,506 - payroll_api - INFO - Startup: cleaned up temporary files
2025-03-14 14:18:20,410 - application.services.session_service - INFO - Created new session: a31aa61a-592b-47bb-af35-924ec8274000
2025-03-14 14:18:20,412 - payroll_api - INFO - Created new session: a31aa61a-592b-47bb-af35-924ec8274000
2025-03-14 14:18:20,808 - payroll_api - INFO - Processing chat message for session a31aa61a-592b-47bb-af35-924ec8274000
2025-03-14 14:18:20,821 - application.services.payroll_service - INFO - Processing message: Hello
2025-03-14 14:18:22,725 - httpx - INFO - HTTP Request: POST https://formaigpt.openai.azure.com/openai/deployments/gptest/chat/completions?api-version=2024-02-15-preview "HTTP/1.1 200 OK"
2025-03-14 14:18:22,749 - payroll_api - INFO - Chat processed successfully for session a31aa61a-592b-47bb-af35-924ec8274000, state: chat
2025-03-14 14:18:30,989 - payroll_api - INFO - Task list requested
2025-03-14 14:18:35,142 - payroll_api - INFO - Conversation history requested for session a31aa61a-592b-47bb-af35-924ec8274000
2025-03-14 14:18:37,207 - payroll_api - INFO - Session reset requested for a31aa61a-592b-47bb-af35-924ec8274000
2025-03-14 14:18:37,209 - application.modules.agent_collection - INFO - タスク 支給控除等一覧(データ更新) をリセットします。
2025-03-14 14:18:37,217 - application.modules.agent_collection - INFO - タスク 支給控除等一覧(後処理) をリセットします。
2025-03-14 14:18:37,219 - application.modules.agent_collection - INFO - タスク Yonosukeデータ作成(加算処理) をリセットします。
2025-03-14 14:18:37,222 - application.modules.agent_collection - INFO - タスク Yonosukeデータ作成(データ除去) をリセットします。
2025-03-14 14:18:37,224 - application.modules.agent_collection - INFO - 状態を変更: chat -> chat
2025-03-14 14:18:41,342 - application.services.session_service - INFO - Created new session: 21ce5472-d4f3-4b33-8991-ec932a1b3a18
2025-03-14 14:18:41,342 - payroll_api - INFO - Created new session: 21ce5472-d4f3-4b33-8991-ec932a1b3a18
2025-03-14 14:18:41,344 - payroll_api - INFO - Processing chat message for session 21ce5472-d4f3-4b33-8991-ec932a1b3a18
2025-03-14 14:18:41,344 - application.services.payroll_service - INFO - Processing message: Hello from admin
2025-03-14 14:18:42,688 - httpx - INFO - HTTP Request: POST https://formaigpt.openai.azure.com/openai/deployments/gptest/chat/completions?api-version=2024-02-15-preview "HTTP/1.1 200 OK"
2025-03-14 14:18:42,702 - payroll_api - INFO - Chat processed successfully for session 21ce5472-d4f3-4b33-8991-ec932a1b3a18, state: chat
2025-03-14 14:18:44,784 - application.services.session_service - INFO - Created new session: 1b712ea2-c445-4803-bcc7-a4168375ea4f
2025-03-14 14:18:44,787 - payroll_api - INFO - Created new session: 1b712ea2-c445-4803-bcc7-a4168375ea4f
2025-03-14 14:18:44,794 - payroll_api - INFO - Processing chat message for session 1b712ea2-c445-4803-bcc7-a4168375ea4f
2025-03-14 14:18:44,799 - application.services.payroll_service - INFO - Processing message: Hello from user
2025-03-14 14:18:45,354 - httpx - INFO - HTTP Request: POST https://formaigpt.openai.azure.com/openai/deployments/gptest/chat/completions?api-version=2024-02-15-preview "HTTP/1.1 200 OK"
2025-03-14 14:18:45,368 - payroll_api - INFO - Chat processed successfully for session 1b712ea2-c445-4803-bcc7-a4168375ea4f, state: chat
2025-03-14 14:18:47,454 - application.services.session_service - INFO - Created new session: 4c354c12-95d3-4b09-9a06-769df90cf892
2025-03-14 14:18:47,455 - payroll_api - INFO - Created new session: 4c354c12-95d3-4b09-9a06-769df90cf892
2025-03-14 14:18:47,455 - payroll_api - INFO - Processing chat message for session 4c354c12-95d3-4b09-9a06-769df90cf892
2025-03-14 14:18:47,464 - application.services.payroll_service - INFO - Processing message: Hello with no auth
2025-03-14 14:18:48,322 - httpx - INFO - HTTP Request: POST https://formaigpt.openai.azure.com/openai/deployments/gptest/chat/completions?api-version=2024-02-15-preview "HTTP/1.1 200 OK"
2025-03-14 14:18:48,345 - payroll_api - INFO - Chat processed successfully for session 4c354c12-95d3-4b09-9a06-769df90cf892, state: chat
2025-03-14 17:26:40,030 - payroll_api - INFO - Task list requested
2025-03-14 17:26:40,047 - application.services.session_service - INFO - Created new session: 968e4c2d-f0b6-433b-bce3-4ef21056f06c
2025-03-14 17:26:40,047 - payroll_api - INFO - Created new session: 968e4c2d-f0b6-433b-bce3-4ef21056f06c
2025-03-14 17:26:40,050 - payroll_api - INFO - Processing chat message for session 968e4c2d-f0b6-433b-bce3-4ef21056f06c
2025-03-14 17:26:40,053 - application.services.payroll_service - INFO - Processing message: Hello
2025-03-14 17:26:41,266 - httpx - INFO - HTTP Request: POST https://formaigpt.openai.azure.com/openai/deployments/gptest/chat/completions?api-version=2024-02-15-preview "HTTP/1.1 200 OK"
2025-03-14 17:26:41,280 - payroll_api - INFO - Chat processed successfully for session 968e4c2d-f0b6-433b-bce3-4ef21056f06c, state: chat
2025-03-14 17:26:41,307 - payroll_api - INFO - Task list requested
2025-03-14 17:26:54,890 - payroll_api - INFO - Processing chat message for session 968e4c2d-f0b6-433b-bce3-4ef21056f06c
2025-03-14 17:26:54,893 - application.services.payroll_service - INFO - Processing message: heello
2025-03-14 17:26:56,077 - httpx - INFO - HTTP Request: POST https://formaigpt.openai.azure.com/openai/deployments/gptest/chat/completions?api-version=2024-02-15-preview "HTTP/1.1 200 OK"
2025-03-14 17:26:56,083 - payroll_api - INFO - Chat processed successfully for session 968e4c2d-f0b6-433b-bce3-4ef21056f06c, state: chat
2025-03-14 17:27:00,735 - payroll_api - INFO - Task list requested
2025-03-14 17:27:03,343 - payroll_api - INFO - Task list requested
2025-03-14 17:27:05,388 - payroll_api - INFO - Task list requested
2025-03-14 17:27:07,264 - payroll_api - INFO - Task list requested
2025-03-14 17:41:36,626 - payroll_api - INFO - API shutting down
2025-03-14 17:42:23,860 - payroll_api - INFO - Service modules imported successfully
2025-03-14 17:42:23,884 - application.services.security.auth - INFO - API security configured
2025-03-14 17:42:23,884 - application.modules.file_agent - INFO - FileAgent を初期化します。
2025-03-14 17:42:23,932 - application.modules.file_agent - INFO - FileAgent 初期化完了: sqlite:///C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-14 17:42:23,934 - application.services.file_service - INFO - FileService initialized with temp_dir: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\temp
2025-03-14 17:42:23,935 - payroll_api - INFO - FileService initialized successfully
2025-03-14 17:42:23,935 - application.services.payroll_service - INFO - Initializing PayrollService with config: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\application\json\config.json
2025-03-14 17:42:23,936 - application.modules.agent_collection - INFO - エージェントコレクションを初期化しています...
2025-03-14 17:42:23,936 - application.modules.file_agent - INFO - FileAgent を初期化します。
2025-03-14 17:42:23,939 - application.modules.file_agent - WARNING - Could not remove existing database file: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-14 17:42:23,939 - application.modules.file_agent - WARNING - Will try to reuse existing database.
2025-03-14 17:42:23,945 - application.modules.file_agent - INFO - FileAgent 初期化完了: sqlite:///C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-14 17:42:23,946 - application.modules.agent_collection - INFO - ファイルエージェントを初期化しました。
2025-03-14 17:42:26,944 - application.modules.agent_collection - INFO - 設定ファイルを正常に読み込みました: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\application\json\config.json
2025-03-14 17:42:26,953 - application.modules.agent_collection - INFO - タスクを正常に作成。タスク数: 4
2025-03-14 17:42:26,953 - application.modules.agent_collection - INFO - IntentAnalyzer を初期化
2025-03-14 17:42:26,953 - application.modules.agent_collection - INFO - RAG_AGENT: 初期化開始
2025-03-14 17:42:26,957 - application.modules.rag_agent - INFO - RAG_Agentを初期化します。
2025-03-14 17:42:40,164 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-03-14 17:42:40,164 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-03-14 17:42:43,709 - application.modules.rag_agent - INFO - RAG用に複数ファイルからRetrieverを作成します。
2025-03-14 17:42:43,760 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-03-14 17:42:43,818 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-03-14 17:42:43,825 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-03-14 17:42:44,890 - application.modules.rag_agent - INFO - RAG_Agent初期化完了
2025-03-14 17:42:44,890 - application.modules.agent_collection - INFO - RAG_AGENT: 初期化完了
2025-03-14 17:42:44,897 - application.modules.agent_collection - INFO - workflow 作成
2025-03-14 17:42:44,900 - application.services.payroll_service - INFO - AgentCollection initialized successfully
2025-03-14 17:42:44,900 - payroll_api - INFO - PayrollService initialized successfully
2025-03-14 17:42:44,901 - application.services.session_service - INFO - Session persistence enabled, using directory: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\sessions
2025-03-14 17:42:44,905 - application.services.session_service - INFO - Skipping expired session 057b59ff-3d7d-4459-a8cc-307e2fe1711a
2025-03-14 17:42:44,908 - application.services.session_service - ERROR - Error loading session 057b59ff-3d7d-4459-a8cc-307e2fe1711a: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\057b59ff-3d7d-4459-a8cc-307e2fe1711a.json'
2025-03-14 17:42:44,911 - application.services.session_service - INFO - Skipping expired session 06099bb8-004f-416c-9616-54cbe4dcb901
2025-03-14 17:42:44,913 - application.services.session_service - ERROR - Error loading session 06099bb8-004f-416c-9616-54cbe4dcb901: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\06099bb8-004f-416c-9616-54cbe4dcb901.json'
2025-03-14 17:42:44,915 - application.services.session_service - INFO - Skipping expired session 7c8ba81c-1329-46ac-b5fe-eb498a052cf1
2025-03-14 17:42:44,922 - application.services.session_service - ERROR - Error loading session 7c8ba81c-1329-46ac-b5fe-eb498a052cf1: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\7c8ba81c-1329-46ac-b5fe-eb498a052cf1.json'
2025-03-14 17:42:44,950 - application.services.session_service - INFO - Skipping expired session c0edf2ac-da7a-4d7a-90cd-6e136696f28d
2025-03-14 17:42:44,955 - application.services.session_service - ERROR - Error loading session c0edf2ac-da7a-4d7a-90cd-6e136696f28d: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\c0edf2ac-da7a-4d7a-90cd-6e136696f28d.json'
2025-03-14 17:42:44,957 - application.services.session_service - INFO - Skipping expired session d5198628-1bd3-4b0a-b5c9-45827d28032c
2025-03-14 17:42:44,957 - application.services.session_service - ERROR - Error loading session d5198628-1bd3-4b0a-b5c9-45827d28032c: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\d5198628-1bd3-4b0a-b5c9-45827d28032c.json'
2025-03-14 17:42:44,965 - application.services.session_service - INFO - Loaded 12 sessions from disk
2025-03-14 17:42:44,965 - application.services.session_service - INFO - SessionService initialized with 12 sessions
2025-03-14 17:42:44,966 - payroll_api - INFO - SessionService initialized successfully
2025-03-14 17:42:44,999 - application.services.session_service - INFO - Cleaned up 0 old sessions
2025-03-14 17:42:44,999 - payroll_api - INFO - Startup: cleaned up sessions older than 24 hours
2025-03-14 17:42:44,999 - payroll_api - INFO - Startup: cleaned up temporary files
2025-03-14 17:43:02,606 - payroll_api - INFO - Task list requested
2025-03-14 17:43:02,643 - application.services.session_service - INFO - Created new session: 3a5589e4-9a1a-45cb-93d3-39938cae4c5c
2025-03-14 17:43:02,652 - payroll_api - INFO - Created new session: 3a5589e4-9a1a-45cb-93d3-39938cae4c5c
2025-03-14 17:43:02,660 - payroll_api - INFO - Processing chat message for session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c
2025-03-14 17:43:02,663 - application.services.payroll_service - INFO - Processing message: Hello
2025-03-14 17:43:04,134 - httpx - INFO - HTTP Request: POST https://formaigpt.openai.azure.com/openai/deployments/gptest/chat/completions?api-version=2024-02-15-preview "HTTP/1.1 200 OK"
2025-03-14 17:43:04,140 - payroll_api - INFO - Chat processed successfully for session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c, state: chat
2025-03-14 17:43:04,176 - payroll_api - INFO - Task list requested
2025-03-14 17:43:14,310 - payroll_api - INFO - Task list requested
2025-03-14 17:43:20,445 - payroll_api - INFO - Processing chat message for session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c
2025-03-14 17:43:20,448 - application.services.payroll_service - INFO - Processing message: bbb
2025-03-14 17:43:21,744 - httpx - INFO - HTTP Request: POST https://formaigpt.openai.azure.com/openai/deployments/gptest/chat/completions?api-version=2024-02-15-preview "HTTP/1.1 200 OK"
2025-03-14 17:43:21,755 - payroll_api - INFO - Chat processed successfully for session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c, state: chat
2025-03-14 19:17:58,681 - payroll_api - INFO - API shutting down
2025-03-14 19:18:11,377 - payroll_api - INFO - Service modules imported successfully
2025-03-14 19:18:11,397 - application.modules.file_agent - INFO - FileAgent を初期化します。
2025-03-14 19:18:11,444 - application.modules.file_agent - INFO - FileAgent 初期化完了: sqlite:///C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-14 19:18:11,446 - application.services.file_service - INFO - FileService initialized with temp_dir: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\temp
2025-03-14 19:18:11,446 - payroll_api - INFO - FileService initialized successfully
2025-03-14 19:18:11,447 - application.services.payroll_service - INFO - Initializing PayrollService with config: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\application\json\config.json
2025-03-14 19:18:11,447 - application.modules.agent_collection - INFO - エージェントコレクションを初期化しています...
2025-03-14 19:18:11,447 - application.modules.file_agent - INFO - FileAgent を初期化します。
2025-03-14 19:18:11,449 - application.modules.file_agent - WARNING - Could not remove existing database file: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-14 19:18:11,451 - application.modules.file_agent - WARNING - Will try to reuse existing database.
2025-03-14 19:18:11,453 - application.modules.file_agent - INFO - FileAgent 初期化完了: sqlite:///C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-14 19:18:11,453 - application.modules.agent_collection - INFO - ファイルエージェントを初期化しました。
2025-03-14 19:18:15,360 - application.modules.agent_collection - INFO - 設定ファイルを正常に読み込みました: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\application\json\config.json
2025-03-14 19:18:15,366 - application.modules.agent_collection - INFO - タスクを正常に作成。タスク数: 4
2025-03-14 19:18:15,367 - application.modules.agent_collection - INFO - IntentAnalyzer を初期化
2025-03-14 19:18:15,367 - application.modules.agent_collection - INFO - RAG_AGENT: 初期化開始
2025-03-14 19:18:15,367 - application.modules.rag_agent - INFO - RAG_Agentを初期化します。
2025-03-14 19:18:27,400 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-03-14 19:18:27,401 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-03-14 19:18:32,552 - application.modules.rag_agent - INFO - RAG用に複数ファイルからRetrieverを作成します。
2025-03-14 19:18:32,623 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-03-14 19:18:32,673 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-03-14 19:18:32,693 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-03-14 19:18:33,082 - application.modules.rag_agent - INFO - RAG_Agent初期化完了
2025-03-14 19:18:33,082 - application.modules.agent_collection - INFO - RAG_AGENT: 初期化完了
2025-03-14 19:18:33,084 - application.modules.agent_collection - INFO - workflow 作成
2025-03-14 19:18:33,084 - application.services.payroll_service - INFO - AgentCollection initialized successfully
2025-03-14 19:18:33,086 - payroll_api - INFO - PayrollService initialized successfully
2025-03-14 19:18:33,086 - application.services.session_service - INFO - Session persistence enabled, using directory: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\sessions
2025-03-14 19:18:33,088 - application.services.session_service - INFO - Skipping expired session 057b59ff-3d7d-4459-a8cc-307e2fe1711a
2025-03-14 19:18:33,090 - application.services.session_service - ERROR - Error loading session 057b59ff-3d7d-4459-a8cc-307e2fe1711a: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\057b59ff-3d7d-4459-a8cc-307e2fe1711a.json'
2025-03-14 19:18:33,091 - application.services.session_service - INFO - Skipping expired session 06099bb8-004f-416c-9616-54cbe4dcb901
2025-03-14 19:18:33,091 - application.services.session_service - ERROR - Error loading session 06099bb8-004f-416c-9616-54cbe4dcb901: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\06099bb8-004f-416c-9616-54cbe4dcb901.json'
2025-03-14 19:18:33,096 - application.services.session_service - INFO - Skipping expired session 7c8ba81c-1329-46ac-b5fe-eb498a052cf1
2025-03-14 19:18:33,098 - application.services.session_service - ERROR - Error loading session 7c8ba81c-1329-46ac-b5fe-eb498a052cf1: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\7c8ba81c-1329-46ac-b5fe-eb498a052cf1.json'
2025-03-14 19:18:33,098 - application.services.session_service - INFO - Skipping expired session c0edf2ac-da7a-4d7a-90cd-6e136696f28d
2025-03-14 19:18:33,098 - application.services.session_service - ERROR - Error loading session c0edf2ac-da7a-4d7a-90cd-6e136696f28d: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\c0edf2ac-da7a-4d7a-90cd-6e136696f28d.json'
2025-03-14 19:18:33,103 - application.services.session_service - INFO - Skipping expired session d5198628-1bd3-4b0a-b5c9-45827d28032c
2025-03-14 19:18:33,105 - application.services.session_service - ERROR - Error loading session d5198628-1bd3-4b0a-b5c9-45827d28032c: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\d5198628-1bd3-4b0a-b5c9-45827d28032c.json'
2025-03-14 19:18:33,106 - application.services.session_service - INFO - Loaded 13 sessions from disk
2025-03-14 19:18:33,107 - application.services.session_service - INFO - SessionService initialized with 13 sessions
2025-03-14 19:18:33,108 - payroll_api - INFO - SessionService initialized successfully
2025-03-14 19:20:52,425 - payroll_api - INFO - Service modules imported successfully
2025-03-14 19:20:52,436 - application.modules.file_agent - INFO - FileAgent を初期化します。
2025-03-14 19:20:52,468 - application.modules.file_agent - INFO - FileAgent 初期化完了: sqlite:///C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-14 19:20:52,470 - application.services.file_service - INFO - FileService initialized with temp_dir: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\temp
2025-03-14 19:20:52,471 - payroll_api - INFO - FileService initialized successfully
2025-03-14 19:20:52,471 - application.services.payroll_service - INFO - Initializing PayrollService with config: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\application\json\config.json
2025-03-14 19:20:52,472 - application.modules.agent_collection - INFO - エージェントコレクションを初期化しています...
2025-03-14 19:20:52,472 - application.modules.file_agent - INFO - FileAgent を初期化します。
2025-03-14 19:20:52,474 - application.modules.file_agent - WARNING - Could not remove existing database file: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-14 19:20:52,475 - application.modules.file_agent - WARNING - Will try to reuse existing database.
2025-03-14 19:20:52,478 - application.modules.file_agent - INFO - FileAgent 初期化完了: sqlite:///C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-14 19:20:52,478 - application.modules.agent_collection - INFO - ファイルエージェントを初期化しました。
2025-03-14 19:20:54,425 - application.modules.agent_collection - INFO - 設定ファイルを正常に読み込みました: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\application\json\config.json
2025-03-14 19:20:54,428 - application.modules.agent_collection - INFO - タスクを正常に作成。タスク数: 4
2025-03-14 19:20:54,428 - application.modules.agent_collection - INFO - IntentAnalyzer を初期化
2025-03-14 19:20:54,428 - application.modules.agent_collection - INFO - RAG_AGENT: 初期化開始
2025-03-14 19:20:54,430 - application.modules.rag_agent - INFO - RAG_Agentを初期化します。
2025-03-14 19:21:01,901 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-03-14 19:21:01,903 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-03-14 19:21:05,199 - application.modules.rag_agent - INFO - RAG用に複数ファイルからRetrieverを作成します。
2025-03-14 19:21:05,224 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-03-14 19:21:05,249 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-03-14 19:21:05,255 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-03-14 19:21:05,487 - application.modules.rag_agent - INFO - RAG_Agent初期化完了
2025-03-14 19:21:05,487 - application.modules.agent_collection - INFO - RAG_AGENT: 初期化完了
2025-03-14 19:21:05,487 - application.modules.agent_collection - INFO - workflow 作成
2025-03-14 19:21:05,489 - application.services.payroll_service - INFO - AgentCollection initialized successfully
2025-03-14 19:21:05,489 - payroll_api - INFO - PayrollService initialized successfully
2025-03-14 19:21:05,490 - application.services.session_service - INFO - Session persistence enabled, using directory: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\sessions
2025-03-14 19:21:05,491 - application.services.session_service - INFO - Skipping expired session 057b59ff-3d7d-4459-a8cc-307e2fe1711a
2025-03-14 19:21:05,492 - application.services.session_service - ERROR - Error loading session 057b59ff-3d7d-4459-a8cc-307e2fe1711a: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\057b59ff-3d7d-4459-a8cc-307e2fe1711a.json'
2025-03-14 19:21:05,493 - application.services.session_service - INFO - Skipping expired session 06099bb8-004f-416c-9616-54cbe4dcb901
2025-03-14 19:21:05,494 - application.services.session_service - ERROR - Error loading session 06099bb8-004f-416c-9616-54cbe4dcb901: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\06099bb8-004f-416c-9616-54cbe4dcb901.json'
2025-03-14 19:21:05,497 - application.services.session_service - INFO - Skipping expired session 7c8ba81c-1329-46ac-b5fe-eb498a052cf1
2025-03-14 19:21:05,498 - application.services.session_service - ERROR - Error loading session 7c8ba81c-1329-46ac-b5fe-eb498a052cf1: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\7c8ba81c-1329-46ac-b5fe-eb498a052cf1.json'
2025-03-14 19:21:05,501 - application.services.session_service - INFO - Skipping expired session c0edf2ac-da7a-4d7a-90cd-6e136696f28d
2025-03-14 19:21:05,501 - application.services.session_service - ERROR - Error loading session c0edf2ac-da7a-4d7a-90cd-6e136696f28d: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\c0edf2ac-da7a-4d7a-90cd-6e136696f28d.json'
2025-03-14 19:21:05,503 - application.services.session_service - INFO - Skipping expired session d5198628-1bd3-4b0a-b5c9-45827d28032c
2025-03-14 19:21:05,503 - application.services.session_service - ERROR - Error loading session d5198628-1bd3-4b0a-b5c9-45827d28032c: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\d5198628-1bd3-4b0a-b5c9-45827d28032c.json'
2025-03-14 19:21:05,505 - application.services.session_service - INFO - Loaded 13 sessions from disk
2025-03-14 19:21:05,505 - application.services.session_service - INFO - SessionService initialized with 13 sessions
2025-03-14 19:21:05,505 - payroll_api - INFO - SessionService initialized successfully
2025-03-14 19:32:39,868 - payroll_api - INFO - Service modules imported successfully
2025-03-14 19:32:39,885 - application.modules.file_agent - INFO - FileAgent を初期化します。
2025-03-14 19:32:39,927 - application.modules.file_agent - INFO - FileAgent 初期化完了: sqlite:///C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-14 19:32:39,928 - application.services.file_service - INFO - FileService initialized with temp_dir: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\temp
2025-03-14 19:32:39,928 - payroll_api - INFO - FileService initialized successfully
2025-03-14 19:32:39,929 - application.services.payroll_service - INFO - Initializing PayrollService with config: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\application\json\config.json
2025-03-14 19:32:39,929 - application.modules.agent_collection - INFO - エージェントコレクションを初期化しています...
2025-03-14 19:32:39,930 - application.modules.file_agent - INFO - FileAgent を初期化します。
2025-03-14 19:32:39,932 - application.modules.file_agent - WARNING - Could not remove existing database file: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-14 19:32:39,933 - application.modules.file_agent - WARNING - Will try to reuse existing database.
2025-03-14 19:32:39,937 - application.modules.file_agent - INFO - FileAgent 初期化完了: sqlite:///C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-14 19:32:39,937 - application.modules.agent_collection - INFO - ファイルエージェントを初期化しました。
2025-03-14 19:32:43,033 - application.modules.agent_collection - INFO - 設定ファイルを正常に読み込みました: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\application\json\config.json
2025-03-14 19:32:43,037 - application.modules.agent_collection - INFO - タスクを正常に作成。タスク数: 4
2025-03-14 19:32:43,037 - application.modules.agent_collection - INFO - IntentAnalyzer を初期化
2025-03-14 19:32:43,038 - application.modules.agent_collection - INFO - RAG_AGENT: 初期化開始
2025-03-14 19:32:43,038 - application.modules.rag_agent - INFO - RAG_Agentを初期化します。
2025-03-14 19:32:51,790 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-03-14 19:32:51,791 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-03-14 19:32:58,501 - application.modules.rag_agent - INFO - RAG用に複数ファイルからRetrieverを作成します。
2025-03-14 19:32:58,526 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-03-14 19:32:58,557 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-03-14 19:32:58,566 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-03-14 19:32:58,797 - application.modules.rag_agent - INFO - RAG_Agent初期化完了
2025-03-14 19:32:58,798 - application.modules.agent_collection - INFO - RAG_AGENT: 初期化完了
2025-03-14 19:32:58,798 - application.modules.agent_collection - INFO - workflow 作成
2025-03-14 19:32:58,800 - application.services.payroll_service - INFO - AgentCollection initialized successfully
2025-03-14 19:32:58,800 - payroll_api - INFO - PayrollService initialized successfully
2025-03-14 19:32:58,801 - application.services.session_service - INFO - Session persistence enabled, using directory: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\sessions
2025-03-14 19:32:58,802 - application.services.session_service - INFO - Skipping expired session 057b59ff-3d7d-4459-a8cc-307e2fe1711a
2025-03-14 19:32:58,803 - application.services.session_service - ERROR - Error loading session 057b59ff-3d7d-4459-a8cc-307e2fe1711a: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\057b59ff-3d7d-4459-a8cc-307e2fe1711a.json'
2025-03-14 19:32:58,804 - application.services.session_service - INFO - Skipping expired session 06099bb8-004f-416c-9616-54cbe4dcb901
2025-03-14 19:32:58,804 - application.services.session_service - ERROR - Error loading session 06099bb8-004f-416c-9616-54cbe4dcb901: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\06099bb8-004f-416c-9616-54cbe4dcb901.json'
2025-03-14 19:32:58,807 - application.services.session_service - INFO - Skipping expired session 7c8ba81c-1329-46ac-b5fe-eb498a052cf1
2025-03-14 19:32:58,809 - application.services.session_service - ERROR - Error loading session 7c8ba81c-1329-46ac-b5fe-eb498a052cf1: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\7c8ba81c-1329-46ac-b5fe-eb498a052cf1.json'
2025-03-14 19:32:58,811 - application.services.session_service - INFO - Skipping expired session c0edf2ac-da7a-4d7a-90cd-6e136696f28d
2025-03-14 19:32:58,812 - application.services.session_service - ERROR - Error loading session c0edf2ac-da7a-4d7a-90cd-6e136696f28d: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\c0edf2ac-da7a-4d7a-90cd-6e136696f28d.json'
2025-03-14 19:32:58,813 - application.services.session_service - INFO - Skipping expired session d5198628-1bd3-4b0a-b5c9-45827d28032c
2025-03-14 19:32:58,814 - application.services.session_service - ERROR - Error loading session d5198628-1bd3-4b0a-b5c9-45827d28032c: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\d5198628-1bd3-4b0a-b5c9-45827d28032c.json'
2025-03-14 19:32:58,816 - application.services.session_service - INFO - Loaded 13 sessions from disk
2025-03-14 19:32:58,816 - application.services.session_service - INFO - SessionService initialized with 13 sessions
2025-03-14 19:32:58,817 - payroll_api - INFO - SessionService initialized successfully
2025-03-14 19:37:03,113 - payroll_api - INFO - Service modules imported successfully
2025-03-14 19:37:03,135 - application.services.security.auth - INFO - API security configured
2025-03-14 19:37:03,135 - application.modules.file_agent - INFO - FileAgent を初期化します。
2025-03-14 19:37:03,167 - application.modules.file_agent - INFO - FileAgent 初期化完了: sqlite:///C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-14 19:37:03,168 - application.services.file_service - INFO - FileService initialized with temp_dir: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\temp
2025-03-14 19:37:03,168 - payroll_api - INFO - FileService initialized successfully
2025-03-14 19:37:03,168 - application.services.payroll_service - INFO - Initializing PayrollService with config: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\application\json\config.json
2025-03-14 19:37:03,168 - application.modules.agent_collection - INFO - エージェントコレクションを初期化しています...
2025-03-14 19:37:03,169 - application.modules.file_agent - INFO - FileAgent を初期化します。
2025-03-14 19:37:03,170 - application.modules.file_agent - WARNING - Could not remove existing database file: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-14 19:37:03,170 - application.modules.file_agent - WARNING - Will try to reuse existing database.
2025-03-14 19:37:03,174 - application.modules.file_agent - INFO - FileAgent 初期化完了: sqlite:///C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-14 19:37:03,174 - application.modules.agent_collection - INFO - ファイルエージェントを初期化しました。
2025-03-14 19:37:05,636 - application.modules.agent_collection - INFO - 設定ファイルを正常に読み込みました: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\application\json\config.json
2025-03-14 19:37:05,641 - application.modules.agent_collection - INFO - タスクを正常に作成。タスク数: 4
2025-03-14 19:37:05,641 - application.modules.agent_collection - INFO - IntentAnalyzer を初期化
2025-03-14 19:37:05,641 - application.modules.agent_collection - INFO - RAG_AGENT: 初期化開始
2025-03-14 19:37:05,642 - application.modules.rag_agent - INFO - RAG_Agentを初期化します。
2025-03-14 19:37:13,742 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-03-14 19:37:13,743 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-03-14 19:37:15,901 - application.modules.rag_agent - INFO - RAG用に複数ファイルからRetrieverを作成します。
2025-03-14 19:37:15,922 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-03-14 19:37:15,947 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-03-14 19:37:15,956 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-03-14 19:37:16,180 - application.modules.rag_agent - INFO - RAG_Agent初期化完了
2025-03-14 19:37:16,180 - application.modules.agent_collection - INFO - RAG_AGENT: 初期化完了
2025-03-14 19:37:16,181 - application.modules.agent_collection - INFO - workflow 作成
2025-03-14 19:37:16,181 - application.services.payroll_service - INFO - AgentCollection initialized successfully
2025-03-14 19:37:16,182 - payroll_api - INFO - PayrollService initialized successfully
2025-03-14 19:37:16,182 - application.services.session_service - INFO - Session persistence enabled, using directory: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\sessions
2025-03-14 19:37:16,184 - application.services.session_service - INFO - Skipping expired session 057b59ff-3d7d-4459-a8cc-307e2fe1711a
2025-03-14 19:37:16,185 - application.services.session_service - ERROR - Error loading session 057b59ff-3d7d-4459-a8cc-307e2fe1711a: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\057b59ff-3d7d-4459-a8cc-307e2fe1711a.json'
2025-03-14 19:37:16,186 - application.services.session_service - INFO - Skipping expired session 06099bb8-004f-416c-9616-54cbe4dcb901
2025-03-14 19:37:16,186 - application.services.session_service - ERROR - Error loading session 06099bb8-004f-416c-9616-54cbe4dcb901: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\06099bb8-004f-416c-9616-54cbe4dcb901.json'
2025-03-14 19:37:16,189 - application.services.session_service - INFO - Skipping expired session 7c8ba81c-1329-46ac-b5fe-eb498a052cf1
2025-03-14 19:37:16,190 - application.services.session_service - ERROR - Error loading session 7c8ba81c-1329-46ac-b5fe-eb498a052cf1: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\7c8ba81c-1329-46ac-b5fe-eb498a052cf1.json'
2025-03-14 19:37:16,192 - application.services.session_service - INFO - Skipping expired session c0edf2ac-da7a-4d7a-90cd-6e136696f28d
2025-03-14 19:37:16,194 - application.services.session_service - ERROR - Error loading session c0edf2ac-da7a-4d7a-90cd-6e136696f28d: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\c0edf2ac-da7a-4d7a-90cd-6e136696f28d.json'
2025-03-14 19:37:16,194 - application.services.session_service - INFO - Skipping expired session d5198628-1bd3-4b0a-b5c9-45827d28032c
2025-03-14 19:37:16,195 - application.services.session_service - ERROR - Error loading session d5198628-1bd3-4b0a-b5c9-45827d28032c: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\d5198628-1bd3-4b0a-b5c9-45827d28032c.json'
2025-03-14 19:37:16,196 - application.services.session_service - INFO - Loaded 13 sessions from disk
2025-03-14 19:37:16,196 - application.services.session_service - INFO - SessionService initialized with 13 sessions
2025-03-14 19:37:16,197 - payroll_api - INFO - SessionService initialized successfully
2025-03-14 19:39:57,576 - payroll_api - INFO - Service modules imported successfully
2025-03-14 19:39:57,608 - application.services.security.auth - INFO - API security configured
2025-03-14 19:39:57,609 - application.modules.file_agent - INFO - FileAgent を初期化します。
2025-03-14 19:39:57,649 - application.modules.file_agent - INFO - FileAgent 初期化完了: sqlite:///C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-14 19:39:57,651 - application.services.file_service - INFO - FileService initialized with temp_dir: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\temp
2025-03-14 19:39:57,651 - payroll_api - INFO - FileService initialized successfully
2025-03-14 19:39:57,653 - application.services.payroll_service - INFO - Initializing PayrollService with config: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\application\json\config.json
2025-03-14 19:39:57,653 - application.modules.agent_collection - INFO - エージェントコレクションを初期化しています...
2025-03-14 19:39:57,653 - application.modules.file_agent - INFO - FileAgent を初期化します。
2025-03-14 19:39:57,654 - application.modules.file_agent - WARNING - Could not remove existing database file: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-14 19:39:57,655 - application.modules.file_agent - WARNING - Will try to reuse existing database.
2025-03-14 19:39:57,660 - application.modules.file_agent - INFO - FileAgent 初期化完了: sqlite:///C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-14 19:39:57,660 - application.modules.agent_collection - INFO - ファイルエージェントを初期化しました。
2025-03-14 19:40:00,232 - application.modules.agent_collection - INFO - 設定ファイルを正常に読み込みました: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\application\json\config.json
2025-03-14 19:40:00,237 - application.modules.agent_collection - INFO - タスクを正常に作成。タスク数: 4
2025-03-14 19:40:00,237 - application.modules.agent_collection - INFO - IntentAnalyzer を初期化
2025-03-14 19:40:00,237 - application.modules.agent_collection - INFO - RAG_AGENT: 初期化開始
2025-03-14 19:40:00,237 - application.modules.rag_agent - INFO - RAG_Agentを初期化します。
2025-03-14 19:40:08,307 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-03-14 19:40:08,308 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-03-14 19:40:14,551 - application.modules.rag_agent - INFO - RAG用に複数ファイルからRetrieverを作成します。
2025-03-14 19:40:14,574 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-03-14 19:40:14,600 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-03-14 19:40:14,607 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-03-14 19:40:14,830 - application.modules.rag_agent - INFO - RAG_Agent初期化完了
2025-03-14 19:40:14,830 - application.modules.agent_collection - INFO - RAG_AGENT: 初期化完了
2025-03-14 19:40:14,830 - application.modules.agent_collection - INFO - workflow 作成
2025-03-14 19:40:14,831 - application.services.payroll_service - INFO - AgentCollection initialized successfully
2025-03-14 19:40:14,831 - payroll_api - INFO - PayrollService initialized successfully
2025-03-14 19:40:14,832 - application.services.session_service - INFO - Session persistence enabled, using directory: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\sessions
2025-03-14 19:40:14,833 - application.services.session_service - INFO - Skipping expired session 057b59ff-3d7d-4459-a8cc-307e2fe1711a
2025-03-14 19:40:14,833 - application.services.session_service - ERROR - Error loading session 057b59ff-3d7d-4459-a8cc-307e2fe1711a: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\057b59ff-3d7d-4459-a8cc-307e2fe1711a.json'
2025-03-14 19:40:14,834 - application.services.session_service - INFO - Skipping expired session 06099bb8-004f-416c-9616-54cbe4dcb901
2025-03-14 19:40:14,835 - application.services.session_service - ERROR - Error loading session 06099bb8-004f-416c-9616-54cbe4dcb901: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\06099bb8-004f-416c-9616-54cbe4dcb901.json'
2025-03-14 19:40:14,837 - application.services.session_service - INFO - Skipping expired session 7c8ba81c-1329-46ac-b5fe-eb498a052cf1
2025-03-14 19:40:14,838 - application.services.session_service - ERROR - Error loading session 7c8ba81c-1329-46ac-b5fe-eb498a052cf1: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\7c8ba81c-1329-46ac-b5fe-eb498a052cf1.json'
2025-03-14 19:40:14,840 - application.services.session_service - INFO - Skipping expired session c0edf2ac-da7a-4d7a-90cd-6e136696f28d
2025-03-14 19:40:14,840 - application.services.session_service - ERROR - Error loading session c0edf2ac-da7a-4d7a-90cd-6e136696f28d: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\c0edf2ac-da7a-4d7a-90cd-6e136696f28d.json'
2025-03-14 19:40:14,841 - application.services.session_service - INFO - Skipping expired session d5198628-1bd3-4b0a-b5c9-45827d28032c
2025-03-14 19:40:14,842 - application.services.session_service - ERROR - Error loading session d5198628-1bd3-4b0a-b5c9-45827d28032c: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\d5198628-1bd3-4b0a-b5c9-45827d28032c.json'
2025-03-14 19:40:14,842 - application.services.session_service - INFO - Loaded 13 sessions from disk
2025-03-14 19:40:14,842 - application.services.session_service - INFO - SessionService initialized with 13 sessions
2025-03-14 19:40:14,843 - payroll_api - INFO - SessionService initialized successfully
2025-03-14 19:40:15,033 - application.services.session_service - INFO - Cleaned up 0 old sessions
2025-03-14 19:40:15,033 - payroll_api - INFO - Startup: cleaned up sessions older than 24 hours
2025-03-14 19:40:15,034 - payroll_api - INFO - Startup: cleaned up temporary files
2025-03-14 19:40:34,096 - payroll_api - INFO - Task list requested for session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c
2025-03-14 19:40:34,109 - payroll_api - INFO - Files list requested for session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c
2025-03-14 19:40:34,136 - payroll_api - INFO - Session history list requested for session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c
2025-03-14 19:40:34,149 - payroll_api - INFO - Task list requested for session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c
2025-03-14 19:40:34,161 - payroll_api - INFO - Files list requested for session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c
2025-03-14 19:40:34,170 - payroll_api - INFO - Session history list requested for session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c
2025-03-14 19:40:42,941 - payroll_api - INFO - Task selection request for session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c: 支給控除等一覧(データ更新)
2025-03-14 19:40:42,941 - application.modules.agent_collection - INFO - 現在タスクを変更: 支給控除等一覧(データ更新)
2025-03-14 19:40:42,943 - application.modules.agent_collection - INFO - 状態を変更: chat -> chat
2025-03-14 19:40:43,455 - payroll_api - INFO - Task selection request for session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c: 支給控除等一覧(データ更新)
2025-03-14 19:40:43,456 - application.modules.agent_collection - INFO - 現在タスクを変更: 支給控除等一覧(データ更新)
2025-03-14 19:40:43,457 - application.modules.agent_collection - INFO - 状態を変更: chat -> chat
2025-03-14 19:40:44,342 - payroll_api - INFO - Task selection request for session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c: 支給控除等一覧(後処理)
2025-03-14 19:40:44,343 - application.modules.agent_collection - INFO - 現在タスクを変更: 支給控除等一覧(後処理)
2025-03-14 19:40:44,343 - application.modules.agent_collection - INFO - 状態を変更: chat -> chat
2025-03-14 19:40:44,814 - payroll_api - INFO - Task selection request for session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c: Yonosukeデータ作成(加算処理)
2025-03-14 19:40:44,814 - application.modules.agent_collection - INFO - 現在タスクを変更: Yonosukeデータ作成(加算処理)
2025-03-14 19:40:44,814 - application.modules.agent_collection - INFO - 状態を変更: chat -> chat
2025-03-14 19:40:45,222 - payroll_api - INFO - Task selection request for session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c: Yonosukeデータ作成(データ除去)
2025-03-14 19:40:45,223 - application.modules.agent_collection - INFO - 現在タスクを変更: Yonosukeデータ作成(データ除去)
2025-03-14 19:40:45,223 - application.modules.agent_collection - INFO - 状態を変更: chat -> chat
2025-03-14 19:40:45,738 - payroll_api - INFO - Task selection request for session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c: 支給控除等一覧(後処理)
2025-03-14 19:40:45,738 - application.modules.agent_collection - INFO - 現在タスクを変更: 支給控除等一覧(後処理)
2025-03-14 19:40:45,739 - application.modules.agent_collection - INFO - 状態を変更: chat -> chat
2025-03-14 19:40:46,143 - payroll_api - INFO - Task selection request for session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c: 支給控除等一覧(データ更新)
2025-03-14 19:40:46,143 - application.modules.agent_collection - INFO - 現在タスクを変更: 支給控除等一覧(データ更新)
2025-03-14 19:40:46,144 - application.modules.agent_collection - INFO - 状態を変更: chat -> chat
2025-03-14 19:40:51,361 - payroll_api - INFO - File upload request for session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c: sikyu_csv_sample.csv
2025-03-14 19:40:51,498 - application.services.file_service - INFO - Created secure copy of C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\web_application\uploads\7e4695ac-d342-447f-9db8-49e27b13a5be.csv at C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\temp\55487834-a17c-4ec5-9d72-27d0ecf2f14f.csv
2025-03-14 19:40:51,499 - application.modules.file_agent - INFO - check_file_identity開始: file_path=C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\temp\55487834-a17c-4ec5-9d72-27d0ecf2f14f.csv
2025-03-14 19:40:51,499 - application.modules.file_agent - ERROR - check_file_identity中にエラーが発生
Traceback (most recent call last):
  File "C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\application\modules\file_agent.py", line 253, in check_file_identity
    for task_dict in self.task_configs.values():
                     ^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'values'
2025-03-14 19:40:51,503 - application.services.file_service - INFO - Successfully processed file: 7e4695ac-d342-447f-9db8-49e27b13a5be.csv
2025-03-14 19:40:51,503 - application.services.payroll_service - INFO - Processing message: 選択されたファイル: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\web_application\uploads\7e4695ac-d342-447f-9db8-49e27b13a5be.csv
2025-03-14 19:40:52,819 - httpx - INFO - HTTP Request: POST https://formaigpt.openai.azure.com/openai/deployments/gptest/chat/completions?api-version=2024-02-15-preview "HTTP/1.1 200 OK"
2025-03-14 19:40:52,823 - application.modules.file_agent - INFO - check_file_identity開始: file_path=C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\web_application\uploads\7e4695ac-d342-447f-9db8-49e27b13a5be.csv
2025-03-14 19:40:52,969 - payroll_api - INFO - File uploaded successfully: sikyu_csv_sample.csv
2025-03-14 19:40:52,978 - payroll_api - INFO - Files list requested for session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c
2025-03-14 19:40:58,627 - payroll_api - INFO - Session reset requested for 3a5589e4-9a1a-45cb-93d3-39938cae4c5c
2025-03-14 19:40:58,629 - application.modules.agent_collection - INFO - タスク 支給控除等一覧(データ更新) をリセットします。
2025-03-14 19:40:58,629 - application.modules.agent_collection - INFO - タスク 支給控除等一覧(後処理) をリセットします。
2025-03-14 19:40:58,629 - application.modules.agent_collection - INFO - タスク Yonosukeデータ作成(加算処理) をリセットします。
2025-03-14 19:40:58,630 - application.modules.agent_collection - INFO - タスク Yonosukeデータ作成(データ除去) をリセットします。
2025-03-14 19:40:58,630 - application.modules.agent_collection - INFO - 状態を変更: chat -> chat
2025-03-14 19:41:01,762 - payroll_api - INFO - Processing chat message for session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c
2025-03-14 19:41:01,765 - application.services.payroll_service - INFO - Processing message: hello
2025-03-14 19:41:03,028 - httpx - INFO - HTTP Request: POST https://formaigpt.openai.azure.com/openai/deployments/gptest/chat/completions?api-version=2024-02-15-preview "HTTP/1.1 200 OK"
2025-03-14 19:41:03,029 - application.modules.rag_agent - INFO - RAG_Agentに問い合わせ実行: hello
2025-03-14 19:41:03,090 - application.services.payroll_service - ERROR - Error processing message: 'tuple' object has no attribute 'get'
2025-03-14 19:41:03,093 - payroll_api - INFO - Chat processed successfully for session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c, state: chat
2025-03-14 19:41:41,748 - payroll_api - INFO - Task selection request for session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c: 支給控除等一覧(データ更新)
2025-03-14 19:41:41,748 - application.modules.agent_collection - INFO - 現在タスクを変更: 支給控除等一覧(データ更新)
2025-03-14 19:41:41,749 - application.modules.agent_collection - INFO - 状態を変更: chat -> chat
2025-03-14 19:41:42,547 - payroll_api - INFO - Task selection request for session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c: 支給控除等一覧(後処理)
2025-03-14 19:41:42,548 - application.modules.agent_collection - INFO - 現在タスクを変更: 支給控除等一覧(後処理)
2025-03-14 19:41:42,548 - application.modules.agent_collection - INFO - 状態を変更: chat -> chat
2025-03-14 19:41:43,257 - payroll_api - INFO - Task selection request for session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c: Yonosukeデータ作成(加算処理)
2025-03-14 19:41:43,258 - application.modules.agent_collection - INFO - 現在タスクを変更: Yonosukeデータ作成(加算処理)
2025-03-14 19:41:43,258 - application.modules.agent_collection - INFO - 状態を変更: chat -> chat
2025-03-14 19:41:43,723 - payroll_api - INFO - Task selection request for session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c: Yonosukeデータ作成(データ除去)
2025-03-14 19:41:43,724 - application.modules.agent_collection - INFO - 現在タスクを変更: Yonosukeデータ作成(データ除去)
2025-03-14 19:41:43,725 - application.modules.agent_collection - INFO - 状態を変更: chat -> chat
2025-03-14 19:44:22,274 - payroll_api - INFO - Task selection request for session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c: 支給控除等一覧(後処理)
2025-03-14 19:44:22,275 - application.modules.agent_collection - INFO - 現在タスクを変更: 支給控除等一覧(後処理)
2025-03-14 19:44:22,275 - application.modules.agent_collection - INFO - 状態を変更: chat -> chat
2025-03-14 19:44:25,615 - payroll_api - INFO - Conversation history requested for session session1
2025-03-14 19:44:25,616 - payroll_api - ERROR - Error getting conversation history: Session session1 not found or has no history
2025-03-14 19:44:30,311 - payroll_api - INFO - Task list requested for session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c
2025-03-14 19:44:30,316 - payroll_api - INFO - Files list requested for session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c
2025-03-14 19:44:30,329 - payroll_api - INFO - Session history list requested for session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c
2025-03-14 19:44:30,359 - payroll_api - INFO - Task list requested for session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c
2025-03-14 19:44:30,367 - payroll_api - INFO - Files list requested for session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c
2025-03-14 19:44:30,391 - payroll_api - INFO - Session history list requested for session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c
2025-03-14 19:44:31,433 - payroll_api - INFO - Conversation history requested for session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c
2025-03-14 19:44:31,435 - payroll_api - ERROR - Error getting conversation history: 1 validation error for SessionHistoryItem
timestamp
  Input should be a valid string [type=string_type, input_value=1741948861.7637527, input_type=float]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
2025-03-14 19:44:36,617 - payroll_api - INFO - Task list requested for session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c
2025-03-14 19:44:36,626 - payroll_api - INFO - Files list requested for session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c
2025-03-14 19:44:36,633 - payroll_api - INFO - Session history list requested for session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c
2025-03-14 19:44:36,643 - payroll_api - INFO - Task list requested for session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c
2025-03-14 19:44:36,648 - payroll_api - INFO - Files list requested for session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c
2025-03-14 19:44:36,657 - payroll_api - INFO - Session history list requested for session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c
2025-03-14 19:44:48,827 - payroll_api - INFO - File upload request for session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c: sikyu_csv_sample.csv
2025-03-14 19:44:48,849 - application.services.file_service - INFO - Created secure copy of C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\web_application\uploads\20ada831-386a-4cb3-a07b-e1395d35272d.csv at C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\temp\3288e0ec-7cb6-4bf4-920b-1cdcba3c064c.csv
2025-03-14 19:44:48,850 - application.modules.file_agent - INFO - check_file_identity開始: file_path=C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\temp\3288e0ec-7cb6-4bf4-920b-1cdcba3c064c.csv
2025-03-14 19:44:48,850 - application.modules.file_agent - ERROR - check_file_identity中にエラーが発生
Traceback (most recent call last):
  File "C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\application\modules\file_agent.py", line 253, in check_file_identity
    for task_dict in self.task_configs.values():
                     ^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'values'
2025-03-14 19:44:48,852 - application.services.file_service - INFO - Successfully processed file: 20ada831-386a-4cb3-a07b-e1395d35272d.csv
2025-03-14 19:44:48,852 - application.services.payroll_service - INFO - Processing message: 選択されたファイル: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\web_application\uploads\20ada831-386a-4cb3-a07b-e1395d35272d.csv
2025-03-14 19:44:50,149 - httpx - INFO - HTTP Request: POST https://formaigpt.openai.azure.com/openai/deployments/gptest/chat/completions?api-version=2024-02-15-preview "HTTP/1.1 200 OK"
2025-03-14 19:44:50,150 - application.modules.file_agent - INFO - check_file_identity開始: file_path=C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\web_application\uploads\20ada831-386a-4cb3-a07b-e1395d35272d.csv
2025-03-14 19:44:50,276 - payroll_api - INFO - File uploaded successfully: sikyu_csv_sample.csv
2025-03-14 19:44:50,286 - payroll_api - INFO - Files list requested for session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c
2025-03-14 19:55:49,230 - payroll_api - INFO - Conversation history requested for session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c
2025-03-14 19:55:49,230 - payroll_api - ERROR - Error getting conversation history: 1 validation error for SessionHistoryItem
timestamp
  Input should be a valid string [type=string_type, input_value=1741948861.7637527, input_type=float]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
2025-03-14 19:56:02,808 - payroll_api - INFO - Processing chat message for session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c
2025-03-14 19:56:02,809 - application.services.payroll_service - INFO - Processing message: sdsd
2025-03-14 19:56:03,949 - httpx - INFO - HTTP Request: POST https://formaigpt.openai.azure.com/openai/deployments/gptest/chat/completions?api-version=2024-02-15-preview "HTTP/1.1 200 OK"
2025-03-14 19:56:03,955 - payroll_api - INFO - Chat processed successfully for session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c, state: chat
2025-03-14 19:56:19,857 - payroll_api - INFO - Task selection request for session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c: Yonosukeデータ作成(データ除去)
2025-03-14 19:56:19,857 - application.modules.agent_collection - INFO - 現在タスクを変更: Yonosukeデータ作成(データ除去)
2025-03-14 19:56:19,857 - application.modules.agent_collection - INFO - 状態を変更: chat -> chat
2025-03-14 19:56:21,421 - payroll_api - INFO - Task selection request for session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c: Yonosukeデータ作成(データ除去)
2025-03-14 19:56:21,422 - application.modules.agent_collection - INFO - 現在タスクを変更: Yonosukeデータ作成(データ除去)
2025-03-14 19:56:21,423 - application.modules.agent_collection - INFO - 状態を変更: chat -> chat
2025-03-14 19:56:22,832 - payroll_api - INFO - Task selection request for session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c: Yonosukeデータ作成(加算処理)
2025-03-14 19:56:22,834 - application.modules.agent_collection - INFO - 現在タスクを変更: Yonosukeデータ作成(加算処理)
2025-03-14 19:56:22,834 - application.modules.agent_collection - INFO - 状態を変更: chat -> chat
2025-03-14 19:56:23,418 - payroll_api - INFO - Task selection request for session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c: 支給控除等一覧(後処理)
2025-03-14 19:56:23,419 - application.modules.agent_collection - INFO - 現在タスクを変更: 支給控除等一覧(後処理)
2025-03-14 19:56:23,419 - application.modules.agent_collection - INFO - 状態を変更: chat -> chat
2025-03-14 19:56:24,077 - payroll_api - INFO - Task selection request for session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c: Yonosukeデータ作成(加算処理)
2025-03-14 19:56:24,077 - application.modules.agent_collection - INFO - 現在タスクを変更: Yonosukeデータ作成(加算処理)
2025-03-14 19:56:24,078 - application.modules.agent_collection - INFO - 状態を変更: chat -> chat
2025-03-14 22:45:22,465 - payroll_api - INFO - API shutting down
2025-03-14 22:45:30,028 - payroll_api - INFO - Service modules imported successfully
2025-03-14 22:45:30,049 - application.services.security.auth - INFO - API security configured
2025-03-14 22:45:30,050 - application.modules.file_agent - INFO - FileAgent を初期化します。
2025-03-14 22:45:30,085 - application.modules.file_agent - INFO - FileAgent 初期化完了: sqlite:///C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-14 22:45:30,087 - application.services.file_service - INFO - FileService initialized with temp_dir: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\temp
2025-03-14 22:45:30,087 - payroll_api - INFO - FileService initialized successfully
2025-03-14 22:45:30,088 - application.services.payroll_service - INFO - Initializing PayrollService with config: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\application\json\config.json
2025-03-14 22:45:30,088 - application.modules.agent_collection - INFO - エージェントコレクションを初期化しています...
2025-03-14 22:45:30,089 - application.modules.file_agent - INFO - FileAgent を初期化します。
2025-03-14 22:45:30,091 - application.modules.file_agent - WARNING - Could not remove existing database file: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-14 22:45:30,091 - application.modules.file_agent - WARNING - Will try to reuse existing database.
2025-03-14 22:45:30,094 - application.modules.file_agent - INFO - FileAgent 初期化完了: sqlite:///C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-14 22:45:30,095 - application.modules.agent_collection - INFO - ファイルエージェントを初期化しました。
2025-03-14 22:45:32,105 - application.modules.agent_collection - INFO - 設定ファイルを正常に読み込みました: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\application\json\config.json
2025-03-14 22:45:32,109 - application.modules.agent_collection - INFO - タスクを正常に作成。タスク数: 4
2025-03-14 22:45:32,110 - application.modules.agent_collection - INFO - IntentAnalyzer を初期化
2025-03-14 22:45:32,110 - application.modules.agent_collection - INFO - RAG_AGENT: 初期化開始
2025-03-14 22:45:32,110 - application.modules.rag_agent - INFO - RAG_Agentを初期化します。
2025-03-14 22:45:40,628 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-03-14 22:45:40,629 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-03-14 22:45:42,952 - application.modules.rag_agent - INFO - RAG用に複数ファイルからRetrieverを作成します。
2025-03-14 22:45:42,972 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-03-14 22:45:42,997 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-03-14 22:45:43,008 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-03-14 22:45:43,376 - application.modules.rag_agent - INFO - RAG_Agent初期化完了
2025-03-14 22:45:43,377 - application.modules.agent_collection - INFO - RAG_AGENT: 初期化完了
2025-03-14 22:45:43,377 - application.modules.agent_collection - INFO - workflow 作成
2025-03-14 22:45:43,378 - application.services.payroll_service - INFO - AgentCollection initialized successfully
2025-03-14 22:45:43,378 - payroll_api - INFO - PayrollService initialized successfully
2025-03-14 22:45:43,378 - application.services.session_service - INFO - Session persistence enabled, using directory: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\sessions
2025-03-14 22:45:43,379 - application.services.session_service - INFO - Skipping expired session 057b59ff-3d7d-4459-a8cc-307e2fe1711a
2025-03-14 22:45:43,380 - application.services.session_service - ERROR - Error loading session 057b59ff-3d7d-4459-a8cc-307e2fe1711a: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\057b59ff-3d7d-4459-a8cc-307e2fe1711a.json'
2025-03-14 22:45:43,380 - application.services.session_service - INFO - Skipping expired session 06099bb8-004f-416c-9616-54cbe4dcb901
2025-03-14 22:45:43,382 - application.services.session_service - ERROR - Error loading session 06099bb8-004f-416c-9616-54cbe4dcb901: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\06099bb8-004f-416c-9616-54cbe4dcb901.json'
2025-03-14 22:45:43,396 - application.services.session_service - INFO - Skipping expired session 4e11869f-ea3d-403d-bbe1-c302b71c954d
2025-03-14 22:45:43,396 - application.services.session_service - ERROR - Error loading session 4e11869f-ea3d-403d-bbe1-c302b71c954d: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\4e11869f-ea3d-403d-bbe1-c302b71c954d.json'
2025-03-14 22:45:43,398 - application.services.session_service - INFO - Skipping expired session 7c8ba81c-1329-46ac-b5fe-eb498a052cf1
2025-03-14 22:45:43,398 - application.services.session_service - ERROR - Error loading session 7c8ba81c-1329-46ac-b5fe-eb498a052cf1: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\7c8ba81c-1329-46ac-b5fe-eb498a052cf1.json'
2025-03-14 22:45:43,402 - application.services.session_service - INFO - Skipping expired session c0edf2ac-da7a-4d7a-90cd-6e136696f28d
2025-03-14 22:45:43,402 - application.services.session_service - ERROR - Error loading session c0edf2ac-da7a-4d7a-90cd-6e136696f28d: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\c0edf2ac-da7a-4d7a-90cd-6e136696f28d.json'
2025-03-14 22:45:43,403 - application.services.session_service - INFO - Skipping expired session cb67d8c8-b7ec-4e30-a7a9-bfa962dc6b95
2025-03-14 22:45:43,405 - application.services.session_service - ERROR - Error loading session cb67d8c8-b7ec-4e30-a7a9-bfa962dc6b95: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\cb67d8c8-b7ec-4e30-a7a9-bfa962dc6b95.json'
2025-03-14 22:45:43,406 - application.services.session_service - INFO - Skipping expired session d5198628-1bd3-4b0a-b5c9-45827d28032c
2025-03-14 22:45:43,406 - application.services.session_service - ERROR - Error loading session d5198628-1bd3-4b0a-b5c9-45827d28032c: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\d5198628-1bd3-4b0a-b5c9-45827d28032c.json'
2025-03-14 22:45:43,407 - application.services.session_service - INFO - Loaded 11 sessions from disk
2025-03-14 22:45:43,407 - application.services.session_service - INFO - SessionService initialized with 11 sessions
2025-03-14 22:45:43,407 - payroll_api - INFO - SessionService initialized successfully
2025-03-14 22:45:43,603 - application.services.session_service - INFO - Cleaned up 0 old sessions
2025-03-14 22:45:43,604 - payroll_api - INFO - Startup: cleaned up sessions older than 24 hours
2025-03-14 22:45:43,605 - payroll_api - INFO - Startup: cleaned up temporary files
2025-03-14 22:46:55,989 - payroll_api - INFO - Files list requested for session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c
2025-03-14 22:46:56,015 - payroll_api - INFO - Task list requested for session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c
2025-03-14 22:46:56,027 - payroll_api - INFO - Session history list requested for session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c
2025-03-14 22:46:56,042 - payroll_api - INFO - Files list requested for session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c
2025-03-14 22:46:56,088 - payroll_api - INFO - Task list requested for session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c
2025-03-14 22:46:56,103 - payroll_api - INFO - Session history list requested for session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c
2025-03-14 22:47:01,464 - payroll_api - INFO - Session reset requested for 3a5589e4-9a1a-45cb-93d3-39938cae4c5c
2025-03-14 22:47:01,466 - application.modules.agent_collection - INFO - タスク 支給控除等一覧(データ更新) をリセットします。
2025-03-14 22:47:01,467 - application.modules.agent_collection - INFO - タスク 支給控除等一覧(後処理) をリセットします。
2025-03-14 22:47:01,467 - application.modules.agent_collection - INFO - タスク Yonosukeデータ作成(加算処理) をリセットします。
2025-03-14 22:47:01,468 - application.modules.agent_collection - INFO - タスク Yonosukeデータ作成(データ除去) をリセットします。
2025-03-14 22:47:01,468 - application.modules.agent_collection - INFO - 状態を変更: chat -> chat
2025-03-14 22:47:04,855 - payroll_api - INFO - Task selection request for session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c: 支給控除等一覧(データ更新)
2025-03-14 22:47:04,856 - application.modules.agent_collection - INFO - 現在タスクを変更: 支給控除等一覧(データ更新)
2025-03-14 22:47:04,857 - application.modules.agent_collection - INFO - 状態を変更: chat -> chat
2025-03-14 22:47:05,519 - payroll_api - INFO - Task selection request for session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c: 支給控除等一覧(後処理)
2025-03-14 22:47:05,519 - application.modules.agent_collection - INFO - 現在タスクを変更: 支給控除等一覧(後処理)
2025-03-14 22:47:05,520 - application.modules.agent_collection - INFO - 状態を変更: chat -> chat
2025-03-14 22:47:12,474 - payroll_api - INFO - Task selection request for session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c: 支給控除等一覧(データ更新)
2025-03-14 22:47:12,475 - application.modules.agent_collection - INFO - 現在タスクを変更: 支給控除等一覧(データ更新)
2025-03-14 22:47:12,475 - application.modules.agent_collection - INFO - 状態を変更: chat -> chat
2025-03-14 22:47:15,993 - payroll_api - INFO - Conversation history requested for session session1
2025-03-14 22:47:15,993 - payroll_api - ERROR - Error getting conversation history: Session session1 not found or has no history
2025-03-14 22:47:20,998 - payroll_api - INFO - Task list requested for session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c
2025-03-14 22:47:21,008 - payroll_api - INFO - Task list requested for session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c
2025-03-14 22:47:21,012 - payroll_api - INFO - Files list requested for session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c
2025-03-14 22:47:21,024 - payroll_api - INFO - Session history list requested for session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c
2025-03-14 22:47:21,040 - payroll_api - INFO - Files list requested for session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c
2025-03-14 22:47:21,046 - payroll_api - INFO - Session history list requested for session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c
2025-03-14 22:47:22,309 - payroll_api - INFO - Conversation history requested for session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c
2025-03-14 22:47:23,184 - payroll_api - INFO - Conversation history requested for session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c
2025-03-14 22:47:24,763 - payroll_api - INFO - Conversation history requested for session session1
2025-03-14 22:47:24,763 - payroll_api - ERROR - Error getting conversation history: Session session1 not found or has no history
2025-03-14 22:48:11,335 - payroll_api - INFO - Processing chat message for session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c
2025-03-14 22:48:11,337 - application.services.payroll_service - INFO - Processing message: Hello
2025-03-14 22:48:12,516 - httpx - INFO - HTTP Request: POST https://formaigpt.openai.azure.com/openai/deployments/gptest/chat/completions?api-version=2024-02-15-preview "HTTP/1.1 200 OK"
2025-03-14 22:48:12,524 - payroll_api - INFO - Chat processed successfully for session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c, state: chat
2025-03-14 22:48:17,016 - payroll_api - INFO - File upload request for session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c: sikyu_csv_sample.csv
2025-03-14 22:48:17,128 - application.services.file_service - INFO - Created secure copy of C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\web_application\uploads\b9fe6c91-80b6-4086-bf66-857139534c21.csv at C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\temp\974b5fc8-fbb6-41e3-aefb-f7dcf873c87e.csv
2025-03-14 22:48:17,128 - application.modules.file_agent - INFO - check_file_identity開始: file_path=C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\temp\974b5fc8-fbb6-41e3-aefb-f7dcf873c87e.csv
2025-03-14 22:48:17,129 - application.modules.file_agent - ERROR - check_file_identity中にエラーが発生
Traceback (most recent call last):
  File "C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\application\modules\file_agent.py", line 253, in check_file_identity
    for task_dict in self.task_configs.values():
                     ^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'values'
2025-03-14 22:48:17,132 - application.services.file_service - INFO - Successfully processed file: b9fe6c91-80b6-4086-bf66-857139534c21.csv
2025-03-14 22:48:17,132 - application.services.payroll_service - INFO - Processing message: 選択されたファイル: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\web_application\uploads\b9fe6c91-80b6-4086-bf66-857139534c21.csv
2025-03-14 22:48:17,816 - httpx - INFO - HTTP Request: POST https://formaigpt.openai.azure.com/openai/deployments/gptest/chat/completions?api-version=2024-02-15-preview "HTTP/1.1 200 OK"
2025-03-14 22:48:17,818 - application.modules.file_agent - INFO - check_file_identity開始: file_path=C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\web_application\uploads\b9fe6c91-80b6-4086-bf66-857139534c21.csv
2025-03-14 22:48:17,956 - payroll_api - INFO - File uploaded successfully: sikyu_csv_sample.csv
2025-03-14 22:48:17,971 - payroll_api - INFO - Files list requested for session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c
2025-03-14 22:48:26,122 - payroll_api - INFO - Task list requested for session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c
2025-03-14 22:48:26,127 - payroll_api - INFO - Files list requested for session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c
2025-03-14 22:48:26,133 - payroll_api - INFO - Session history list requested for session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c
2025-03-14 22:48:26,145 - payroll_api - INFO - Task list requested for session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c
2025-03-14 22:48:26,150 - payroll_api - INFO - Files list requested for session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c
2025-03-14 22:48:26,160 - payroll_api - INFO - Session history list requested for session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c
2025-03-14 22:48:27,149 - payroll_api - INFO - Conversation history requested for session session1
2025-03-14 22:48:27,149 - payroll_api - ERROR - Error getting conversation history: Session session1 not found or has no history
2025-03-14 22:48:31,830 - payroll_api - INFO - Session reset requested for 3a5589e4-9a1a-45cb-93d3-39938cae4c5c
2025-03-14 22:48:31,834 - application.modules.agent_collection - INFO - タスク 支給控除等一覧(データ更新) をリセットします。
2025-03-14 22:48:31,835 - application.modules.agent_collection - INFO - タスク 支給控除等一覧(後処理) をリセットします。
2025-03-14 22:48:31,836 - application.modules.agent_collection - INFO - タスク Yonosukeデータ作成(加算処理) をリセットします。
2025-03-14 22:48:31,836 - application.modules.agent_collection - INFO - タスク Yonosukeデータ作成(データ除去) をリセットします。
2025-03-14 22:48:31,837 - application.modules.agent_collection - INFO - 状態を変更: chat -> chat
2025-03-14 22:48:34,176 - payroll_api - INFO - Task list requested for session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c
2025-03-14 22:48:34,181 - payroll_api - INFO - Files list requested for session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c
2025-03-14 22:48:34,189 - payroll_api - INFO - Session history list requested for session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c
2025-03-14 22:48:34,205 - payroll_api - INFO - Task list requested for session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c
2025-03-14 22:48:34,209 - payroll_api - INFO - Files list requested for session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c
2025-03-14 22:48:34,217 - payroll_api - INFO - Session history list requested for session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c
2025-03-14 22:48:36,442 - payroll_api - INFO - Session reset requested for 3a5589e4-9a1a-45cb-93d3-39938cae4c5c
2025-03-14 22:48:36,444 - application.modules.agent_collection - INFO - タスク 支給控除等一覧(データ更新) をリセットします。
2025-03-14 22:48:36,445 - application.modules.agent_collection - INFO - タスク 支給控除等一覧(後処理) をリセットします。
2025-03-14 22:48:36,445 - application.modules.agent_collection - INFO - タスク Yonosukeデータ作成(加算処理) をリセットします。
2025-03-14 22:48:36,446 - application.modules.agent_collection - INFO - タスク Yonosukeデータ作成(データ除去) をリセットします。
2025-03-14 22:48:36,448 - application.modules.agent_collection - INFO - 状態を変更: chat -> chat
2025-03-14 22:48:37,602 - payroll_api - INFO - Conversation history requested for session session1
2025-03-14 22:48:37,602 - payroll_api - ERROR - Error getting conversation history: Session session1 not found or has no history
2025-03-14 22:48:40,794 - payroll_api - INFO - Task list requested for session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c
2025-03-14 22:48:40,818 - payroll_api - INFO - Files list requested for session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c
2025-03-14 22:48:40,834 - payroll_api - INFO - Session history list requested for session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c
2025-03-14 22:48:40,846 - payroll_api - INFO - Task list requested for session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c
2025-03-14 22:48:40,858 - payroll_api - INFO - Files list requested for session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c
2025-03-14 22:48:40,905 - payroll_api - INFO - Session history list requested for session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c
2025-03-14 22:48:41,881 - payroll_api - INFO - Conversation history requested for session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c
2025-03-14 22:48:41,881 - payroll_api - ERROR - Error getting conversation history: Session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c not found or has no history
2025-03-15 00:25:24,582 - payroll_api - INFO - Task list requested for session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c
2025-03-15 00:25:24,590 - payroll_api - INFO - Files list requested for session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c
2025-03-15 00:25:24,622 - payroll_api - INFO - Session history list requested for session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c
2025-03-15 00:25:24,635 - payroll_api - INFO - Task list requested for session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c
2025-03-15 00:25:24,651 - payroll_api - INFO - Files list requested for session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c
2025-03-15 00:25:24,655 - payroll_api - INFO - Session history list requested for session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c
2025-03-15 00:25:28,357 - payroll_api - INFO - Session reset requested for 3a5589e4-9a1a-45cb-93d3-39938cae4c5c
2025-03-15 00:25:28,361 - application.modules.agent_collection - INFO - タスク 支給控除等一覧(データ更新) をリセットします。
2025-03-15 00:25:28,363 - application.modules.agent_collection - INFO - タスク 支給控除等一覧(後処理) をリセットします。
2025-03-15 00:25:28,363 - application.modules.agent_collection - INFO - タスク Yonosukeデータ作成(加算処理) をリセットします。
2025-03-15 00:25:28,363 - application.modules.agent_collection - INFO - タスク Yonosukeデータ作成(データ除去) をリセットします。
2025-03-15 00:25:28,363 - application.modules.agent_collection - INFO - 状態を変更: chat -> chat
2025-03-15 00:25:32,712 - payroll_api - INFO - Processing chat message for session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c
2025-03-15 00:25:32,712 - application.services.payroll_service - INFO - Processing message: Hello
2025-03-15 00:25:34,301 - httpx - INFO - HTTP Request: POST https://formaigpt.openai.azure.com/openai/deployments/gptest/chat/completions?api-version=2024-02-15-preview "HTTP/1.1 200 OK"
2025-03-15 00:25:34,315 - payroll_api - INFO - Chat processed successfully for session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c, state: chat
2025-03-18 18:09:11,153 - payroll_api - INFO - Service modules imported successfully
2025-03-18 18:09:11,170 - application.services.security.auth - INFO - API security configured
2025-03-18 18:09:11,170 - application.modules.file_agent - INFO - FileAgent を初期化します。
2025-03-18 18:09:11,227 - application.modules.file_agent - INFO - FileAgent 初期化完了: sqlite:///C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-18 18:09:11,228 - application.services.file_service - INFO - FileService initialized with temp_dir: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\temp
2025-03-18 18:09:11,229 - payroll_api - INFO - FileService initialized successfully
2025-03-18 18:09:11,229 - application.services.payroll_service - INFO - Initializing PayrollService with config: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\application\json\config.json
2025-03-18 18:09:11,229 - application.modules.agent_collection - INFO - エージェントコレクションを初期化しています...
2025-03-18 18:09:11,230 - application.modules.file_agent - INFO - FileAgent を初期化します。
2025-03-18 18:09:11,231 - application.modules.file_agent - WARNING - Could not remove existing database file: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-18 18:09:11,231 - application.modules.file_agent - WARNING - Will try to reuse existing database.
2025-03-18 18:09:11,233 - application.modules.file_agent - INFO - FileAgent 初期化完了: sqlite:///C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-18 18:09:11,233 - application.modules.agent_collection - INFO - ファイルエージェントを初期化しました。
2025-03-18 18:09:13,037 - application.modules.agent_collection - INFO - 設定ファイルを正常に読み込みました: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\application\json\config.json
2025-03-18 18:09:13,047 - application.modules.agent_collection - INFO - タスクを正常に作成。タスク数: 4
2025-03-18 18:09:13,048 - application.modules.agent_collection - INFO - IntentAnalyzer を初期化
2025-03-18 18:09:13,048 - application.modules.agent_collection - INFO - RAG_AGENT: 初期化開始
2025-03-18 18:09:13,048 - application.modules.rag_agent - INFO - RAG_Agentを初期化します。
2025-03-18 18:09:20,145 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-03-18 18:09:20,145 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-03-18 18:09:22,839 - application.modules.rag_agent - INFO - RAG用に複数ファイルからRetrieverを作成します。
2025-03-18 18:09:22,869 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-03-18 18:09:22,945 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-03-18 18:09:22,947 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-03-18 18:09:23,379 - application.modules.rag_agent - INFO - RAG_Agent初期化完了
2025-03-18 18:09:23,379 - application.modules.agent_collection - INFO - RAG_AGENT: 初期化完了
2025-03-18 18:09:23,379 - application.modules.agent_collection - INFO - workflow 作成
2025-03-18 18:09:23,389 - application.services.payroll_service - INFO - AgentCollection initialized successfully
2025-03-18 18:09:23,389 - payroll_api - INFO - PayrollService initialized successfully
2025-03-18 18:09:23,389 - application.services.session_service - INFO - Session persistence enabled, using directory: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\sessions
2025-03-18 18:09:23,389 - application.services.session_service - INFO - Skipping expired session 057b59ff-3d7d-4459-a8cc-307e2fe1711a
2025-03-18 18:09:23,391 - application.services.session_service - ERROR - Error loading session 057b59ff-3d7d-4459-a8cc-307e2fe1711a: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\057b59ff-3d7d-4459-a8cc-307e2fe1711a.json'
2025-03-18 18:09:23,392 - application.services.session_service - INFO - Skipping expired session 06099bb8-004f-416c-9616-54cbe4dcb901
2025-03-18 18:09:23,392 - application.services.session_service - ERROR - Error loading session 06099bb8-004f-416c-9616-54cbe4dcb901: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\06099bb8-004f-416c-9616-54cbe4dcb901.json'
2025-03-18 18:09:23,393 - application.services.session_service - INFO - Skipping expired session 1b712ea2-c445-4803-bcc7-a4168375ea4f
2025-03-18 18:09:23,393 - application.services.session_service - ERROR - Error loading session 1b712ea2-c445-4803-bcc7-a4168375ea4f: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\1b712ea2-c445-4803-bcc7-a4168375ea4f.json'
2025-03-18 18:09:23,394 - application.services.session_service - INFO - Skipping expired session 21ce5472-d4f3-4b33-8991-ec932a1b3a18
2025-03-18 18:09:23,394 - application.services.session_service - ERROR - Error loading session 21ce5472-d4f3-4b33-8991-ec932a1b3a18: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\21ce5472-d4f3-4b33-8991-ec932a1b3a18.json'
2025-03-18 18:09:23,396 - application.services.session_service - INFO - Skipping expired session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c
2025-03-18 18:09:23,396 - application.services.session_service - ERROR - Error loading session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\3a5589e4-9a1a-45cb-93d3-39938cae4c5c.json'
2025-03-18 18:09:23,396 - application.services.session_service - INFO - Skipping expired session 406e4e53-653b-4e7f-9c71-3963a38acd43
2025-03-18 18:09:23,397 - application.services.session_service - ERROR - Error loading session 406e4e53-653b-4e7f-9c71-3963a38acd43: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\406e4e53-653b-4e7f-9c71-3963a38acd43.json'
2025-03-18 18:09:23,397 - application.services.session_service - INFO - Skipping expired session 43a3fa0a-411e-4f83-9c1d-a06b95609d5f
2025-03-18 18:09:23,398 - application.services.session_service - ERROR - Error loading session 43a3fa0a-411e-4f83-9c1d-a06b95609d5f: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\43a3fa0a-411e-4f83-9c1d-a06b95609d5f.json'
2025-03-18 18:09:23,398 - application.services.session_service - INFO - Skipping expired session 4c354c12-95d3-4b09-9a06-769df90cf892
2025-03-18 18:09:23,398 - application.services.session_service - ERROR - Error loading session 4c354c12-95d3-4b09-9a06-769df90cf892: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\4c354c12-95d3-4b09-9a06-769df90cf892.json'
2025-03-18 18:09:23,399 - application.services.session_service - INFO - Skipping expired session 4e11869f-ea3d-403d-bbe1-c302b71c954d
2025-03-18 18:09:23,399 - application.services.session_service - ERROR - Error loading session 4e11869f-ea3d-403d-bbe1-c302b71c954d: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\4e11869f-ea3d-403d-bbe1-c302b71c954d.json'
2025-03-18 18:09:23,400 - application.services.session_service - INFO - Skipping expired session 7c8ba81c-1329-46ac-b5fe-eb498a052cf1
2025-03-18 18:09:23,400 - application.services.session_service - ERROR - Error loading session 7c8ba81c-1329-46ac-b5fe-eb498a052cf1: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\7c8ba81c-1329-46ac-b5fe-eb498a052cf1.json'
2025-03-18 18:09:23,401 - application.services.session_service - INFO - Skipping expired session 8bc09605-4e8d-42d9-98cc-c9f26c8bffc3
2025-03-18 18:09:23,401 - application.services.session_service - ERROR - Error loading session 8bc09605-4e8d-42d9-98cc-c9f26c8bffc3: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\8bc09605-4e8d-42d9-98cc-c9f26c8bffc3.json'
2025-03-18 18:09:23,401 - application.services.session_service - INFO - Skipping expired session 968e4c2d-f0b6-433b-bce3-4ef21056f06c
2025-03-18 18:09:23,402 - application.services.session_service - ERROR - Error loading session 968e4c2d-f0b6-433b-bce3-4ef21056f06c: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\968e4c2d-f0b6-433b-bce3-4ef21056f06c.json'
2025-03-18 18:09:23,402 - application.services.session_service - INFO - Skipping expired session a31aa61a-592b-47bb-af35-924ec8274000
2025-03-18 18:09:23,402 - application.services.session_service - ERROR - Error loading session a31aa61a-592b-47bb-af35-924ec8274000: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\a31aa61a-592b-47bb-af35-924ec8274000.json'
2025-03-18 18:09:23,403 - application.services.session_service - INFO - Skipping expired session ad39c9be-7c5c-498e-9074-42cd665e822a
2025-03-18 18:09:23,403 - application.services.session_service - ERROR - Error loading session ad39c9be-7c5c-498e-9074-42cd665e822a: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\ad39c9be-7c5c-498e-9074-42cd665e822a.json'
2025-03-18 18:09:23,403 - application.services.session_service - INFO - Skipping expired session c0edf2ac-da7a-4d7a-90cd-6e136696f28d
2025-03-18 18:09:23,404 - application.services.session_service - ERROR - Error loading session c0edf2ac-da7a-4d7a-90cd-6e136696f28d: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\c0edf2ac-da7a-4d7a-90cd-6e136696f28d.json'
2025-03-18 18:09:23,404 - application.services.session_service - INFO - Skipping expired session cb67d8c8-b7ec-4e30-a7a9-bfa962dc6b95
2025-03-18 18:09:23,405 - application.services.session_service - ERROR - Error loading session cb67d8c8-b7ec-4e30-a7a9-bfa962dc6b95: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\cb67d8c8-b7ec-4e30-a7a9-bfa962dc6b95.json'
2025-03-18 18:09:23,405 - application.services.session_service - INFO - Skipping expired session d5198628-1bd3-4b0a-b5c9-45827d28032c
2025-03-18 18:09:23,405 - application.services.session_service - ERROR - Error loading session d5198628-1bd3-4b0a-b5c9-45827d28032c: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\d5198628-1bd3-4b0a-b5c9-45827d28032c.json'
2025-03-18 18:09:23,405 - application.services.session_service - INFO - Skipping expired session e5ae788e-b9bf-48b1-9d09-e394f2e25cb7
2025-03-18 18:09:23,407 - application.services.session_service - ERROR - Error loading session e5ae788e-b9bf-48b1-9d09-e394f2e25cb7: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\e5ae788e-b9bf-48b1-9d09-e394f2e25cb7.json'
2025-03-18 18:09:23,407 - application.services.session_service - INFO - Loaded 0 sessions from disk
2025-03-18 18:09:23,407 - application.services.session_service - INFO - SessionService initialized with 0 sessions
2025-03-18 18:09:23,407 - payroll_api - INFO - SessionService initialized successfully
2025-03-18 18:09:23,445 - application.services.session_service - INFO - Cleaned up 0 old sessions
2025-03-18 18:09:23,445 - payroll_api - INFO - Startup: cleaned up sessions older than 24 hours
2025-03-18 18:09:23,447 - payroll_api - INFO - Startup: cleaned up temporary files
2025-03-18 18:10:06,758 - application.services.session_service - INFO - Created new session: c9bef824-1fe3-4ff2-b01c-180b6c3ceb46
2025-03-18 18:10:06,758 - payroll_api - INFO - Invalid session ID provided, created new session: c9bef824-1fe3-4ff2-b01c-180b6c3ceb46
2025-03-18 18:10:06,787 - payroll_api - INFO - Processing chat message for session c9bef824-1fe3-4ff2-b01c-180b6c3ceb46
2025-03-18 18:10:06,789 - application.services.payroll_service - INFO - Processing message: 給与計算について教えてください
2025-03-18 18:10:08,114 - httpx - INFO - HTTP Request: POST https://formaigpt.openai.azure.com/openai/deployments/gptest/chat/completions?api-version=2024-02-15-preview "HTTP/1.1 200 OK"
2025-03-18 18:10:08,121 - application.modules.rag_agent - INFO - RAG_Agentに問い合わせ実行: 給与計算について教えてください
2025-03-18 18:10:08,181 - application.services.payroll_service - ERROR - Error processing message: 'tuple' object has no attribute 'get'
2025-03-18 18:10:08,184 - payroll_api - INFO - Chat processed successfully for session c9bef824-1fe3-4ff2-b01c-180b6c3ceb46, state: chat
2025-03-18 18:11:57,113 - payroll_api - INFO - API shutting down
2025-03-18 18:12:12,129 - payroll_api - INFO - Service modules imported successfully
2025-03-18 18:12:12,152 - application.services.security.auth - INFO - API security configured
2025-03-18 18:12:12,153 - application.modules.file_agent - INFO - FileAgent を初期化します。
2025-03-18 18:12:12,189 - application.modules.file_agent - INFO - FileAgent 初期化完了: sqlite:///C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-18 18:12:12,190 - application.services.file_service - INFO - FileService initialized with temp_dir: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\temp
2025-03-18 18:12:12,190 - payroll_api - INFO - FileService initialized successfully
2025-03-18 18:12:12,190 - application.services.payroll_service - INFO - Initializing PayrollService with config: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\application\json\config.json
2025-03-18 18:12:12,190 - application.modules.agent_collection - INFO - エージェントコレクションを初期化しています...
2025-03-18 18:12:12,191 - application.modules.file_agent - INFO - FileAgent を初期化します。
2025-03-18 18:12:12,192 - application.modules.file_agent - WARNING - Could not remove existing database file: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-18 18:12:12,192 - application.modules.file_agent - WARNING - Will try to reuse existing database.
2025-03-18 18:12:12,196 - application.modules.file_agent - INFO - FileAgent 初期化完了: sqlite:///C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-18 18:12:12,197 - application.modules.agent_collection - INFO - ファイルエージェントを初期化しました。
2025-03-18 18:12:14,594 - application.modules.agent_collection - INFO - 設定ファイルを正常に読み込みました: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\application\json\config.json
2025-03-18 18:12:14,601 - application.modules.agent_collection - INFO - タスクを正常に作成。タスク数: 4
2025-03-18 18:12:14,601 - application.modules.agent_collection - INFO - IntentAnalyzer を初期化
2025-03-18 18:12:14,602 - application.modules.agent_collection - INFO - RAG_AGENT: 初期化開始
2025-03-18 18:12:14,602 - application.modules.rag_agent - INFO - RAG_Agentを初期化します。
2025-03-18 18:12:22,656 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-03-18 18:12:22,657 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-03-18 18:12:25,102 - application.modules.rag_agent - INFO - RAG用に複数ファイルからRetrieverを作成します。
2025-03-18 18:12:25,126 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-03-18 18:12:25,149 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-03-18 18:12:25,153 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-03-18 18:12:25,370 - application.modules.rag_agent - INFO - RAG_Agent初期化完了
2025-03-18 18:12:25,370 - application.modules.agent_collection - INFO - RAG_AGENT: 初期化完了
2025-03-18 18:12:25,371 - application.modules.agent_collection - INFO - workflow 作成
2025-03-18 18:12:25,371 - application.services.payroll_service - INFO - AgentCollection initialized successfully
2025-03-18 18:12:25,372 - payroll_api - INFO - PayrollService initialized successfully
2025-03-18 18:12:25,373 - application.services.session_service - INFO - Session persistence enabled, using directory: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\sessions
2025-03-18 18:12:25,374 - application.services.session_service - INFO - Skipping expired session 057b59ff-3d7d-4459-a8cc-307e2fe1711a
2025-03-18 18:12:25,374 - application.services.session_service - ERROR - Error loading session 057b59ff-3d7d-4459-a8cc-307e2fe1711a: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\057b59ff-3d7d-4459-a8cc-307e2fe1711a.json'
2025-03-18 18:12:25,375 - application.services.session_service - INFO - Skipping expired session 06099bb8-004f-416c-9616-54cbe4dcb901
2025-03-18 18:12:25,375 - application.services.session_service - ERROR - Error loading session 06099bb8-004f-416c-9616-54cbe4dcb901: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\06099bb8-004f-416c-9616-54cbe4dcb901.json'
2025-03-18 18:12:25,376 - application.services.session_service - INFO - Skipping expired session 1b712ea2-c445-4803-bcc7-a4168375ea4f
2025-03-18 18:12:25,376 - application.services.session_service - ERROR - Error loading session 1b712ea2-c445-4803-bcc7-a4168375ea4f: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\1b712ea2-c445-4803-bcc7-a4168375ea4f.json'
2025-03-18 18:12:25,377 - application.services.session_service - INFO - Skipping expired session 21ce5472-d4f3-4b33-8991-ec932a1b3a18
2025-03-18 18:12:25,379 - application.services.session_service - ERROR - Error loading session 21ce5472-d4f3-4b33-8991-ec932a1b3a18: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\21ce5472-d4f3-4b33-8991-ec932a1b3a18.json'
2025-03-18 18:12:25,380 - application.services.session_service - INFO - Skipping expired session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c
2025-03-18 18:12:25,380 - application.services.session_service - ERROR - Error loading session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\3a5589e4-9a1a-45cb-93d3-39938cae4c5c.json'
2025-03-18 18:12:25,381 - application.services.session_service - INFO - Skipping expired session 406e4e53-653b-4e7f-9c71-3963a38acd43
2025-03-18 18:12:25,381 - application.services.session_service - ERROR - Error loading session 406e4e53-653b-4e7f-9c71-3963a38acd43: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\406e4e53-653b-4e7f-9c71-3963a38acd43.json'
2025-03-18 18:12:25,381 - application.services.session_service - INFO - Skipping expired session 43a3fa0a-411e-4f83-9c1d-a06b95609d5f
2025-03-18 18:12:25,381 - application.services.session_service - ERROR - Error loading session 43a3fa0a-411e-4f83-9c1d-a06b95609d5f: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\43a3fa0a-411e-4f83-9c1d-a06b95609d5f.json'
2025-03-18 18:12:25,384 - application.services.session_service - INFO - Skipping expired session 4c354c12-95d3-4b09-9a06-769df90cf892
2025-03-18 18:12:25,384 - application.services.session_service - ERROR - Error loading session 4c354c12-95d3-4b09-9a06-769df90cf892: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\4c354c12-95d3-4b09-9a06-769df90cf892.json'
2025-03-18 18:12:25,384 - application.services.session_service - INFO - Skipping expired session 4e11869f-ea3d-403d-bbe1-c302b71c954d
2025-03-18 18:12:25,385 - application.services.session_service - ERROR - Error loading session 4e11869f-ea3d-403d-bbe1-c302b71c954d: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\4e11869f-ea3d-403d-bbe1-c302b71c954d.json'
2025-03-18 18:12:25,385 - application.services.session_service - INFO - Skipping expired session 7c8ba81c-1329-46ac-b5fe-eb498a052cf1
2025-03-18 18:12:25,387 - application.services.session_service - ERROR - Error loading session 7c8ba81c-1329-46ac-b5fe-eb498a052cf1: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\7c8ba81c-1329-46ac-b5fe-eb498a052cf1.json'
2025-03-18 18:12:25,387 - application.services.session_service - INFO - Skipping expired session 8bc09605-4e8d-42d9-98cc-c9f26c8bffc3
2025-03-18 18:12:25,389 - application.services.session_service - ERROR - Error loading session 8bc09605-4e8d-42d9-98cc-c9f26c8bffc3: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\8bc09605-4e8d-42d9-98cc-c9f26c8bffc3.json'
2025-03-18 18:12:25,389 - application.services.session_service - INFO - Skipping expired session 968e4c2d-f0b6-433b-bce3-4ef21056f06c
2025-03-18 18:12:25,390 - application.services.session_service - ERROR - Error loading session 968e4c2d-f0b6-433b-bce3-4ef21056f06c: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\968e4c2d-f0b6-433b-bce3-4ef21056f06c.json'
2025-03-18 18:12:25,391 - application.services.session_service - INFO - Skipping expired session a31aa61a-592b-47bb-af35-924ec8274000
2025-03-18 18:12:25,391 - application.services.session_service - ERROR - Error loading session a31aa61a-592b-47bb-af35-924ec8274000: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\a31aa61a-592b-47bb-af35-924ec8274000.json'
2025-03-18 18:12:25,393 - application.services.session_service - INFO - Skipping expired session ad39c9be-7c5c-498e-9074-42cd665e822a
2025-03-18 18:12:25,393 - application.services.session_service - ERROR - Error loading session ad39c9be-7c5c-498e-9074-42cd665e822a: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\ad39c9be-7c5c-498e-9074-42cd665e822a.json'
2025-03-18 18:12:25,394 - application.services.session_service - INFO - Skipping expired session c0edf2ac-da7a-4d7a-90cd-6e136696f28d
2025-03-18 18:12:25,394 - application.services.session_service - ERROR - Error loading session c0edf2ac-da7a-4d7a-90cd-6e136696f28d: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\c0edf2ac-da7a-4d7a-90cd-6e136696f28d.json'
2025-03-18 18:12:25,404 - application.services.session_service - INFO - Skipping expired session cb67d8c8-b7ec-4e30-a7a9-bfa962dc6b95
2025-03-18 18:12:25,405 - application.services.session_service - ERROR - Error loading session cb67d8c8-b7ec-4e30-a7a9-bfa962dc6b95: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\cb67d8c8-b7ec-4e30-a7a9-bfa962dc6b95.json'
2025-03-18 18:12:25,407 - application.services.session_service - INFO - Skipping expired session d5198628-1bd3-4b0a-b5c9-45827d28032c
2025-03-18 18:12:25,407 - application.services.session_service - ERROR - Error loading session d5198628-1bd3-4b0a-b5c9-45827d28032c: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\d5198628-1bd3-4b0a-b5c9-45827d28032c.json'
2025-03-18 18:12:25,408 - application.services.session_service - INFO - Skipping expired session e5ae788e-b9bf-48b1-9d09-e394f2e25cb7
2025-03-18 18:12:25,409 - application.services.session_service - ERROR - Error loading session e5ae788e-b9bf-48b1-9d09-e394f2e25cb7: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\e5ae788e-b9bf-48b1-9d09-e394f2e25cb7.json'
2025-03-18 18:12:25,409 - application.services.session_service - INFO - Loaded 1 sessions from disk
2025-03-18 18:12:25,409 - application.services.session_service - INFO - SessionService initialized with 1 sessions
2025-03-18 18:12:25,410 - payroll_api - INFO - SessionService initialized successfully
2025-03-18 18:12:25,455 - application.services.session_service - INFO - Cleaned up 0 old sessions
2025-03-18 18:12:25,455 - payroll_api - INFO - Startup: cleaned up sessions older than 24 hours
2025-03-18 18:12:25,456 - payroll_api - INFO - Startup: cleaned up temporary files
2025-03-18 18:12:40,559 - payroll_api - INFO - API shutting down
2025-03-18 18:12:46,295 - payroll_api - INFO - Service modules imported successfully
2025-03-18 18:12:46,322 - application.services.security.auth - INFO - API security configured
2025-03-18 18:12:46,323 - application.modules.file_agent - INFO - FileAgent を初期化します。
2025-03-18 18:12:46,356 - application.modules.file_agent - INFO - FileAgent 初期化完了: sqlite:///C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-18 18:12:46,356 - application.services.file_service - INFO - FileService initialized with temp_dir: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\temp
2025-03-18 18:12:46,356 - payroll_api - INFO - FileService initialized successfully
2025-03-18 18:12:46,358 - application.services.payroll_service - INFO - Initializing PayrollService with config: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\application\json\config.json
2025-03-18 18:12:46,358 - application.modules.agent_collection - INFO - エージェントコレクションを初期化しています...
2025-03-18 18:12:46,358 - application.modules.file_agent - INFO - FileAgent を初期化します。
2025-03-18 18:12:46,359 - application.modules.file_agent - WARNING - Could not remove existing database file: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-18 18:12:46,359 - application.modules.file_agent - WARNING - Will try to reuse existing database.
2025-03-18 18:12:46,362 - application.modules.file_agent - INFO - FileAgent 初期化完了: sqlite:///C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-18 18:12:46,363 - application.modules.agent_collection - INFO - ファイルエージェントを初期化しました。
2025-03-18 18:12:48,667 - application.modules.agent_collection - INFO - 設定ファイルを正常に読み込みました: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\application\json\config.json
2025-03-18 18:12:48,669 - application.modules.agent_collection - INFO - タスクを正常に作成。タスク数: 4
2025-03-18 18:12:48,669 - application.modules.agent_collection - INFO - IntentAnalyzer を初期化
2025-03-18 18:12:48,669 - application.modules.agent_collection - INFO - RAG_AGENT: 初期化開始
2025-03-18 18:12:48,669 - application.modules.rag_agent - INFO - RAG_Agentを初期化します。
2025-03-18 18:12:55,687 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-03-18 18:12:55,687 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-03-18 18:12:58,029 - application.modules.rag_agent - INFO - RAG用に複数ファイルからRetrieverを作成します。
2025-03-18 18:12:58,059 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-03-18 18:12:58,084 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-03-18 18:12:58,091 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-03-18 18:12:58,292 - application.modules.rag_agent - INFO - RAG_Agent初期化完了
2025-03-18 18:12:58,292 - application.modules.agent_collection - INFO - RAG_AGENT: 初期化完了
2025-03-18 18:12:58,293 - application.modules.agent_collection - INFO - workflow 作成
2025-03-18 18:12:58,293 - application.services.payroll_service - INFO - AgentCollection initialized successfully
2025-03-18 18:12:58,293 - payroll_api - INFO - PayrollService initialized successfully
2025-03-18 18:12:58,295 - application.services.session_service - INFO - Session persistence enabled, using directory: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\sessions
2025-03-18 18:12:58,295 - application.services.session_service - INFO - Skipping expired session 057b59ff-3d7d-4459-a8cc-307e2fe1711a
2025-03-18 18:12:58,296 - application.services.session_service - ERROR - Error loading session 057b59ff-3d7d-4459-a8cc-307e2fe1711a: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\057b59ff-3d7d-4459-a8cc-307e2fe1711a.json'
2025-03-18 18:12:58,296 - application.services.session_service - INFO - Skipping expired session 06099bb8-004f-416c-9616-54cbe4dcb901
2025-03-18 18:12:58,298 - application.services.session_service - ERROR - Error loading session 06099bb8-004f-416c-9616-54cbe4dcb901: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\06099bb8-004f-416c-9616-54cbe4dcb901.json'
2025-03-18 18:12:58,298 - application.services.session_service - INFO - Skipping expired session 1b712ea2-c445-4803-bcc7-a4168375ea4f
2025-03-18 18:12:58,299 - application.services.session_service - ERROR - Error loading session 1b712ea2-c445-4803-bcc7-a4168375ea4f: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\1b712ea2-c445-4803-bcc7-a4168375ea4f.json'
2025-03-18 18:12:58,299 - application.services.session_service - INFO - Skipping expired session 21ce5472-d4f3-4b33-8991-ec932a1b3a18
2025-03-18 18:12:58,299 - application.services.session_service - ERROR - Error loading session 21ce5472-d4f3-4b33-8991-ec932a1b3a18: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\21ce5472-d4f3-4b33-8991-ec932a1b3a18.json'
2025-03-18 18:12:58,301 - application.services.session_service - INFO - Skipping expired session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c
2025-03-18 18:12:58,301 - application.services.session_service - ERROR - Error loading session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\3a5589e4-9a1a-45cb-93d3-39938cae4c5c.json'
2025-03-18 18:12:58,301 - application.services.session_service - INFO - Skipping expired session 406e4e53-653b-4e7f-9c71-3963a38acd43
2025-03-18 18:12:58,301 - application.services.session_service - ERROR - Error loading session 406e4e53-653b-4e7f-9c71-3963a38acd43: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\406e4e53-653b-4e7f-9c71-3963a38acd43.json'
2025-03-18 18:12:58,302 - application.services.session_service - INFO - Skipping expired session 43a3fa0a-411e-4f83-9c1d-a06b95609d5f
2025-03-18 18:12:58,302 - application.services.session_service - ERROR - Error loading session 43a3fa0a-411e-4f83-9c1d-a06b95609d5f: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\43a3fa0a-411e-4f83-9c1d-a06b95609d5f.json'
2025-03-18 18:12:58,303 - application.services.session_service - INFO - Skipping expired session 4c354c12-95d3-4b09-9a06-769df90cf892
2025-03-18 18:12:58,303 - application.services.session_service - ERROR - Error loading session 4c354c12-95d3-4b09-9a06-769df90cf892: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\4c354c12-95d3-4b09-9a06-769df90cf892.json'
2025-03-18 18:12:58,303 - application.services.session_service - INFO - Skipping expired session 4e11869f-ea3d-403d-bbe1-c302b71c954d
2025-03-18 18:12:58,303 - application.services.session_service - ERROR - Error loading session 4e11869f-ea3d-403d-bbe1-c302b71c954d: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\4e11869f-ea3d-403d-bbe1-c302b71c954d.json'
2025-03-18 18:12:58,303 - application.services.session_service - INFO - Skipping expired session 7c8ba81c-1329-46ac-b5fe-eb498a052cf1
2025-03-18 18:12:58,303 - application.services.session_service - ERROR - Error loading session 7c8ba81c-1329-46ac-b5fe-eb498a052cf1: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\7c8ba81c-1329-46ac-b5fe-eb498a052cf1.json'
2025-03-18 18:12:58,306 - application.services.session_service - INFO - Skipping expired session 8bc09605-4e8d-42d9-98cc-c9f26c8bffc3
2025-03-18 18:12:58,306 - application.services.session_service - ERROR - Error loading session 8bc09605-4e8d-42d9-98cc-c9f26c8bffc3: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\8bc09605-4e8d-42d9-98cc-c9f26c8bffc3.json'
2025-03-18 18:12:58,306 - application.services.session_service - INFO - Skipping expired session 968e4c2d-f0b6-433b-bce3-4ef21056f06c
2025-03-18 18:12:58,306 - application.services.session_service - ERROR - Error loading session 968e4c2d-f0b6-433b-bce3-4ef21056f06c: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\968e4c2d-f0b6-433b-bce3-4ef21056f06c.json'
2025-03-18 18:12:58,308 - application.services.session_service - INFO - Skipping expired session a31aa61a-592b-47bb-af35-924ec8274000
2025-03-18 18:12:58,308 - application.services.session_service - ERROR - Error loading session a31aa61a-592b-47bb-af35-924ec8274000: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\a31aa61a-592b-47bb-af35-924ec8274000.json'
2025-03-18 18:12:58,308 - application.services.session_service - INFO - Skipping expired session ad39c9be-7c5c-498e-9074-42cd665e822a
2025-03-18 18:12:58,308 - application.services.session_service - ERROR - Error loading session ad39c9be-7c5c-498e-9074-42cd665e822a: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\ad39c9be-7c5c-498e-9074-42cd665e822a.json'
2025-03-18 18:12:58,310 - application.services.session_service - INFO - Skipping expired session c0edf2ac-da7a-4d7a-90cd-6e136696f28d
2025-03-18 18:12:58,310 - application.services.session_service - ERROR - Error loading session c0edf2ac-da7a-4d7a-90cd-6e136696f28d: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\c0edf2ac-da7a-4d7a-90cd-6e136696f28d.json'
2025-03-18 18:12:58,311 - application.services.session_service - INFO - Skipping expired session cb67d8c8-b7ec-4e30-a7a9-bfa962dc6b95
2025-03-18 18:12:58,312 - application.services.session_service - ERROR - Error loading session cb67d8c8-b7ec-4e30-a7a9-bfa962dc6b95: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\cb67d8c8-b7ec-4e30-a7a9-bfa962dc6b95.json'
2025-03-18 18:12:58,312 - application.services.session_service - INFO - Skipping expired session d5198628-1bd3-4b0a-b5c9-45827d28032c
2025-03-18 18:12:58,313 - application.services.session_service - ERROR - Error loading session d5198628-1bd3-4b0a-b5c9-45827d28032c: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\d5198628-1bd3-4b0a-b5c9-45827d28032c.json'
2025-03-18 18:12:58,313 - application.services.session_service - INFO - Skipping expired session e5ae788e-b9bf-48b1-9d09-e394f2e25cb7
2025-03-18 18:12:58,314 - application.services.session_service - ERROR - Error loading session e5ae788e-b9bf-48b1-9d09-e394f2e25cb7: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\e5ae788e-b9bf-48b1-9d09-e394f2e25cb7.json'
2025-03-18 18:12:58,314 - application.services.session_service - INFO - Loaded 1 sessions from disk
2025-03-18 18:12:58,314 - application.services.session_service - INFO - SessionService initialized with 1 sessions
2025-03-18 18:12:58,314 - payroll_api - INFO - SessionService initialized successfully
2025-03-18 18:12:58,347 - application.services.session_service - INFO - Cleaned up 0 old sessions
2025-03-18 18:12:58,347 - payroll_api - INFO - Startup: cleaned up sessions older than 24 hours
2025-03-18 18:12:58,348 - payroll_api - INFO - Startup: cleaned up temporary files
2025-03-18 18:13:39,386 - application.services.session_service - INFO - Created new session: 39139951-b5d4-489e-bade-b4ea314784b9
2025-03-18 18:13:39,386 - payroll_api - INFO - Invalid session ID provided, created new session: 39139951-b5d4-489e-bade-b4ea314784b9
2025-03-18 18:13:39,387 - payroll_api - INFO - Processing chat message for session 39139951-b5d4-489e-bade-b4ea314784b9
2025-03-18 18:13:39,389 - application.services.payroll_service - INFO - Processing message: 給与計算について教えてください
2025-03-18 18:13:40,786 - httpx - INFO - HTTP Request: POST https://formaigpt.openai.azure.com/openai/deployments/gptest/chat/completions?api-version=2024-02-15-preview "HTTP/1.1 200 OK"
2025-03-18 18:13:40,790 - application.modules.rag_agent - INFO - RAG_Agentに問い合わせ実行: 給与計算について教えてください
2025-03-18 18:13:40,837 - application.services.payroll_service - ERROR - Error processing message: 'tuple' object has no attribute 'get'
2025-03-18 18:13:40,839 - payroll_api - INFO - Chat processed successfully for session 39139951-b5d4-489e-bade-b4ea314784b9, state: chat
2025-03-18 18:17:04,956 - payroll_api - INFO - API shutting down
2025-03-18 18:17:11,715 - payroll_api - INFO - Service modules imported successfully
2025-03-18 18:17:11,738 - application.services.security.auth - INFO - API security configured
2025-03-18 18:17:11,739 - application.modules.file_agent - INFO - FileAgent を初期化します。
2025-03-18 18:17:11,775 - application.modules.file_agent - INFO - FileAgent 初期化完了: sqlite:///C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-18 18:17:11,775 - application.services.file_service - INFO - FileService initialized with temp_dir: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\temp
2025-03-18 18:17:11,776 - payroll_api - INFO - FileService initialized successfully
2025-03-18 18:17:11,776 - application.services.payroll_service - INFO - Initializing PayrollService with config: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\application\json\config.json
2025-03-18 18:17:11,776 - application.modules.agent_collection - INFO - エージェントコレクションを初期化しています...
2025-03-18 18:17:11,776 - application.modules.file_agent - INFO - FileAgent を初期化します。
2025-03-18 18:17:11,778 - application.modules.file_agent - WARNING - Could not remove existing database file: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-18 18:17:11,778 - application.modules.file_agent - WARNING - Will try to reuse existing database.
2025-03-18 18:17:11,782 - application.modules.file_agent - INFO - FileAgent 初期化完了: sqlite:///C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-18 18:17:11,782 - application.modules.agent_collection - INFO - ファイルエージェントを初期化しました。
2025-03-18 18:17:14,767 - application.modules.agent_collection - INFO - 設定ファイルを正常に読み込みました: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\application\json\config.json
2025-03-18 18:17:14,781 - application.modules.agent_collection - INFO - タスクを正常に作成。タスク数: 4
2025-03-18 18:17:14,782 - application.modules.agent_collection - INFO - IntentAnalyzer を初期化
2025-03-18 18:17:14,782 - application.modules.agent_collection - INFO - RAG_AGENT: 初期化開始
2025-03-18 18:17:14,782 - application.modules.rag_agent - INFO - RAG_Agentを初期化します。
2025-03-18 18:17:24,404 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-03-18 18:17:24,404 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-03-18 18:17:26,897 - application.modules.rag_agent - INFO - RAG用に複数ファイルからRetrieverを作成します。
2025-03-18 18:17:26,923 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-03-18 18:17:26,945 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-03-18 18:17:26,955 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-03-18 18:17:27,202 - application.modules.rag_agent - INFO - RAG_Agent初期化完了
2025-03-18 18:17:27,202 - application.modules.agent_collection - INFO - RAG_AGENT: 初期化完了
2025-03-18 18:17:27,203 - application.modules.agent_collection - INFO - workflow 作成
2025-03-18 18:17:27,203 - application.services.payroll_service - INFO - AgentCollection initialized successfully
2025-03-18 18:17:27,204 - payroll_api - INFO - PayrollService initialized successfully
2025-03-18 18:17:27,204 - application.services.session_service - INFO - Session persistence enabled, using directory: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\sessions
2025-03-18 18:17:27,205 - application.services.session_service - INFO - Skipping expired session 057b59ff-3d7d-4459-a8cc-307e2fe1711a
2025-03-18 18:17:27,206 - application.services.session_service - ERROR - Error loading session 057b59ff-3d7d-4459-a8cc-307e2fe1711a: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\057b59ff-3d7d-4459-a8cc-307e2fe1711a.json'
2025-03-18 18:17:27,206 - application.services.session_service - INFO - Skipping expired session 06099bb8-004f-416c-9616-54cbe4dcb901
2025-03-18 18:17:27,207 - application.services.session_service - ERROR - Error loading session 06099bb8-004f-416c-9616-54cbe4dcb901: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\06099bb8-004f-416c-9616-54cbe4dcb901.json'
2025-03-18 18:17:27,208 - application.services.session_service - INFO - Skipping expired session 1b712ea2-c445-4803-bcc7-a4168375ea4f
2025-03-18 18:17:27,208 - application.services.session_service - ERROR - Error loading session 1b712ea2-c445-4803-bcc7-a4168375ea4f: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\1b712ea2-c445-4803-bcc7-a4168375ea4f.json'
2025-03-18 18:17:27,209 - application.services.session_service - INFO - Skipping expired session 21ce5472-d4f3-4b33-8991-ec932a1b3a18
2025-03-18 18:17:27,210 - application.services.session_service - ERROR - Error loading session 21ce5472-d4f3-4b33-8991-ec932a1b3a18: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\21ce5472-d4f3-4b33-8991-ec932a1b3a18.json'
2025-03-18 18:17:27,220 - application.services.session_service - INFO - Skipping expired session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c
2025-03-18 18:17:27,221 - application.services.session_service - ERROR - Error loading session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\3a5589e4-9a1a-45cb-93d3-39938cae4c5c.json'
2025-03-18 18:17:27,222 - application.services.session_service - INFO - Skipping expired session 406e4e53-653b-4e7f-9c71-3963a38acd43
2025-03-18 18:17:27,222 - application.services.session_service - ERROR - Error loading session 406e4e53-653b-4e7f-9c71-3963a38acd43: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\406e4e53-653b-4e7f-9c71-3963a38acd43.json'
2025-03-18 18:17:27,223 - application.services.session_service - INFO - Skipping expired session 43a3fa0a-411e-4f83-9c1d-a06b95609d5f
2025-03-18 18:17:27,224 - application.services.session_service - ERROR - Error loading session 43a3fa0a-411e-4f83-9c1d-a06b95609d5f: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\43a3fa0a-411e-4f83-9c1d-a06b95609d5f.json'
2025-03-18 18:17:27,224 - application.services.session_service - INFO - Skipping expired session 4c354c12-95d3-4b09-9a06-769df90cf892
2025-03-18 18:17:27,226 - application.services.session_service - ERROR - Error loading session 4c354c12-95d3-4b09-9a06-769df90cf892: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\4c354c12-95d3-4b09-9a06-769df90cf892.json'
2025-03-18 18:17:27,226 - application.services.session_service - INFO - Skipping expired session 4e11869f-ea3d-403d-bbe1-c302b71c954d
2025-03-18 18:17:27,227 - application.services.session_service - ERROR - Error loading session 4e11869f-ea3d-403d-bbe1-c302b71c954d: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\4e11869f-ea3d-403d-bbe1-c302b71c954d.json'
2025-03-18 18:17:27,228 - application.services.session_service - INFO - Skipping expired session 7c8ba81c-1329-46ac-b5fe-eb498a052cf1
2025-03-18 18:17:27,228 - application.services.session_service - ERROR - Error loading session 7c8ba81c-1329-46ac-b5fe-eb498a052cf1: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\7c8ba81c-1329-46ac-b5fe-eb498a052cf1.json'
2025-03-18 18:17:27,230 - application.services.session_service - INFO - Skipping expired session 8bc09605-4e8d-42d9-98cc-c9f26c8bffc3
2025-03-18 18:17:27,230 - application.services.session_service - ERROR - Error loading session 8bc09605-4e8d-42d9-98cc-c9f26c8bffc3: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\8bc09605-4e8d-42d9-98cc-c9f26c8bffc3.json'
2025-03-18 18:17:27,231 - application.services.session_service - INFO - Skipping expired session 968e4c2d-f0b6-433b-bce3-4ef21056f06c
2025-03-18 18:17:27,232 - application.services.session_service - ERROR - Error loading session 968e4c2d-f0b6-433b-bce3-4ef21056f06c: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\968e4c2d-f0b6-433b-bce3-4ef21056f06c.json'
2025-03-18 18:17:27,233 - application.services.session_service - INFO - Skipping expired session a31aa61a-592b-47bb-af35-924ec8274000
2025-03-18 18:17:27,235 - application.services.session_service - ERROR - Error loading session a31aa61a-592b-47bb-af35-924ec8274000: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\a31aa61a-592b-47bb-af35-924ec8274000.json'
2025-03-18 18:17:27,236 - application.services.session_service - INFO - Skipping expired session ad39c9be-7c5c-498e-9074-42cd665e822a
2025-03-18 18:17:27,236 - application.services.session_service - ERROR - Error loading session ad39c9be-7c5c-498e-9074-42cd665e822a: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\ad39c9be-7c5c-498e-9074-42cd665e822a.json'
2025-03-18 18:17:27,237 - application.services.session_service - INFO - Skipping expired session c0edf2ac-da7a-4d7a-90cd-6e136696f28d
2025-03-18 18:17:27,239 - application.services.session_service - ERROR - Error loading session c0edf2ac-da7a-4d7a-90cd-6e136696f28d: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\c0edf2ac-da7a-4d7a-90cd-6e136696f28d.json'
2025-03-18 18:17:27,240 - application.services.session_service - INFO - Skipping expired session cb67d8c8-b7ec-4e30-a7a9-bfa962dc6b95
2025-03-18 18:17:27,241 - application.services.session_service - ERROR - Error loading session cb67d8c8-b7ec-4e30-a7a9-bfa962dc6b95: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\cb67d8c8-b7ec-4e30-a7a9-bfa962dc6b95.json'
2025-03-18 18:17:27,241 - application.services.session_service - INFO - Skipping expired session d5198628-1bd3-4b0a-b5c9-45827d28032c
2025-03-18 18:17:27,243 - application.services.session_service - ERROR - Error loading session d5198628-1bd3-4b0a-b5c9-45827d28032c: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\d5198628-1bd3-4b0a-b5c9-45827d28032c.json'
2025-03-18 18:17:27,244 - application.services.session_service - INFO - Skipping expired session e5ae788e-b9bf-48b1-9d09-e394f2e25cb7
2025-03-18 18:17:27,244 - application.services.session_service - ERROR - Error loading session e5ae788e-b9bf-48b1-9d09-e394f2e25cb7: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\e5ae788e-b9bf-48b1-9d09-e394f2e25cb7.json'
2025-03-18 18:17:27,245 - application.services.session_service - INFO - Loaded 2 sessions from disk
2025-03-18 18:17:27,245 - application.services.session_service - INFO - SessionService initialized with 2 sessions
2025-03-18 18:17:27,245 - payroll_api - INFO - SessionService initialized successfully
2025-03-18 18:17:27,293 - application.services.session_service - INFO - Cleaned up 0 old sessions
2025-03-18 18:17:27,293 - payroll_api - INFO - Startup: cleaned up sessions older than 24 hours
2025-03-18 18:17:27,293 - payroll_api - INFO - Startup: cleaned up temporary files
2025-03-18 18:17:48,746 - payroll_api - INFO - API shutting down
2025-03-18 18:24:58,423 - payroll_api - INFO - Service modules imported successfully
2025-03-18 18:24:58,444 - application.services.security.auth - INFO - API security configured
2025-03-18 18:24:58,445 - application.modules.file_agent - INFO - FileAgent を初期化します。
2025-03-18 18:24:58,484 - application.modules.file_agent - INFO - FileAgent 初期化完了: sqlite:///C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-18 18:24:58,486 - application.services.file_service - INFO - FileService initialized with temp_dir: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\temp
2025-03-18 18:24:58,486 - payroll_api - INFO - FileService initialized successfully
2025-03-18 18:24:58,487 - application.services.payroll_service - INFO - Initializing PayrollService with config: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\application\json\config.json
2025-03-18 18:24:58,487 - application.modules.agent_collection - INFO - エージェントコレクションを初期化しています...
2025-03-18 18:24:58,487 - application.modules.file_agent - INFO - FileAgent を初期化します。
2025-03-18 18:24:58,488 - application.modules.file_agent - WARNING - Could not remove existing database file: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-18 18:24:58,488 - application.modules.file_agent - WARNING - Will try to reuse existing database.
2025-03-18 18:24:58,491 - application.modules.file_agent - INFO - FileAgent 初期化完了: sqlite:///C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-18 18:24:58,491 - application.modules.agent_collection - INFO - ファイルエージェントを初期化しました。
2025-03-18 18:25:00,970 - application.modules.agent_collection - INFO - 設定ファイルを正常に読み込みました: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\application\json\config.json
2025-03-18 18:25:00,974 - application.modules.agent_collection - INFO - タスクを正常に作成。タスク数: 4
2025-03-18 18:25:00,975 - application.modules.agent_collection - INFO - IntentAnalyzer を初期化
2025-03-18 18:25:00,975 - application.modules.agent_collection - INFO - RAG_AGENT: 初期化開始
2025-03-18 18:25:00,975 - application.modules.rag_agent - INFO - RAG_Agentを初期化します。
2025-03-18 18:25:08,474 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-03-18 18:25:08,474 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-03-18 18:25:11,580 - application.modules.rag_agent - INFO - RAG用に複数ファイルからRetrieverを作成します。
2025-03-18 18:25:11,603 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-03-18 18:25:11,624 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-03-18 18:25:11,632 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-03-18 18:25:11,837 - application.modules.rag_agent - INFO - RAG_Agent初期化完了
2025-03-18 18:25:11,837 - application.modules.agent_collection - INFO - RAG_AGENT: 初期化完了
2025-03-18 18:25:11,838 - application.modules.agent_collection - INFO - workflow 作成
2025-03-18 18:25:11,838 - application.services.payroll_service - INFO - AgentCollection initialized successfully
2025-03-18 18:25:11,838 - payroll_api - INFO - PayrollService initialized successfully
2025-03-18 18:25:11,838 - application.services.session_service - INFO - Session persistence enabled, using directory: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\sessions
2025-03-18 18:25:11,839 - application.services.session_service - INFO - Skipping expired session 057b59ff-3d7d-4459-a8cc-307e2fe1711a
2025-03-18 18:25:11,839 - application.services.session_service - ERROR - Error loading session 057b59ff-3d7d-4459-a8cc-307e2fe1711a: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\057b59ff-3d7d-4459-a8cc-307e2fe1711a.json'
2025-03-18 18:25:11,840 - application.services.session_service - INFO - Skipping expired session 06099bb8-004f-416c-9616-54cbe4dcb901
2025-03-18 18:25:11,840 - application.services.session_service - ERROR - Error loading session 06099bb8-004f-416c-9616-54cbe4dcb901: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\06099bb8-004f-416c-9616-54cbe4dcb901.json'
2025-03-18 18:25:11,840 - application.services.session_service - INFO - Skipping expired session 1b712ea2-c445-4803-bcc7-a4168375ea4f
2025-03-18 18:25:11,840 - application.services.session_service - ERROR - Error loading session 1b712ea2-c445-4803-bcc7-a4168375ea4f: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\1b712ea2-c445-4803-bcc7-a4168375ea4f.json'
2025-03-18 18:25:11,842 - application.services.session_service - INFO - Skipping expired session 21ce5472-d4f3-4b33-8991-ec932a1b3a18
2025-03-18 18:25:11,842 - application.services.session_service - ERROR - Error loading session 21ce5472-d4f3-4b33-8991-ec932a1b3a18: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\21ce5472-d4f3-4b33-8991-ec932a1b3a18.json'
2025-03-18 18:25:11,843 - application.services.session_service - INFO - Skipping expired session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c
2025-03-18 18:25:11,843 - application.services.session_service - ERROR - Error loading session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\3a5589e4-9a1a-45cb-93d3-39938cae4c5c.json'
2025-03-18 18:25:11,843 - application.services.session_service - INFO - Skipping expired session 406e4e53-653b-4e7f-9c71-3963a38acd43
2025-03-18 18:25:11,844 - application.services.session_service - ERROR - Error loading session 406e4e53-653b-4e7f-9c71-3963a38acd43: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\406e4e53-653b-4e7f-9c71-3963a38acd43.json'
2025-03-18 18:25:11,844 - application.services.session_service - INFO - Skipping expired session 43a3fa0a-411e-4f83-9c1d-a06b95609d5f
2025-03-18 18:25:11,845 - application.services.session_service - ERROR - Error loading session 43a3fa0a-411e-4f83-9c1d-a06b95609d5f: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\43a3fa0a-411e-4f83-9c1d-a06b95609d5f.json'
2025-03-18 18:25:11,846 - application.services.session_service - INFO - Skipping expired session 4c354c12-95d3-4b09-9a06-769df90cf892
2025-03-18 18:25:11,846 - application.services.session_service - ERROR - Error loading session 4c354c12-95d3-4b09-9a06-769df90cf892: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\4c354c12-95d3-4b09-9a06-769df90cf892.json'
2025-03-18 18:25:11,847 - application.services.session_service - INFO - Skipping expired session 4e11869f-ea3d-403d-bbe1-c302b71c954d
2025-03-18 18:25:11,847 - application.services.session_service - ERROR - Error loading session 4e11869f-ea3d-403d-bbe1-c302b71c954d: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\4e11869f-ea3d-403d-bbe1-c302b71c954d.json'
2025-03-18 18:25:11,848 - application.services.session_service - INFO - Skipping expired session 7c8ba81c-1329-46ac-b5fe-eb498a052cf1
2025-03-18 18:25:11,848 - application.services.session_service - ERROR - Error loading session 7c8ba81c-1329-46ac-b5fe-eb498a052cf1: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\7c8ba81c-1329-46ac-b5fe-eb498a052cf1.json'
2025-03-18 18:25:11,849 - application.services.session_service - INFO - Skipping expired session 8bc09605-4e8d-42d9-98cc-c9f26c8bffc3
2025-03-18 18:25:11,849 - application.services.session_service - ERROR - Error loading session 8bc09605-4e8d-42d9-98cc-c9f26c8bffc3: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\8bc09605-4e8d-42d9-98cc-c9f26c8bffc3.json'
2025-03-18 18:25:11,849 - application.services.session_service - INFO - Skipping expired session 968e4c2d-f0b6-433b-bce3-4ef21056f06c
2025-03-18 18:25:11,851 - application.services.session_service - ERROR - Error loading session 968e4c2d-f0b6-433b-bce3-4ef21056f06c: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\968e4c2d-f0b6-433b-bce3-4ef21056f06c.json'
2025-03-18 18:25:11,851 - application.services.session_service - INFO - Skipping expired session a31aa61a-592b-47bb-af35-924ec8274000
2025-03-18 18:25:11,852 - application.services.session_service - ERROR - Error loading session a31aa61a-592b-47bb-af35-924ec8274000: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\a31aa61a-592b-47bb-af35-924ec8274000.json'
2025-03-18 18:25:11,853 - application.services.session_service - INFO - Skipping expired session ad39c9be-7c5c-498e-9074-42cd665e822a
2025-03-18 18:25:11,853 - application.services.session_service - ERROR - Error loading session ad39c9be-7c5c-498e-9074-42cd665e822a: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\ad39c9be-7c5c-498e-9074-42cd665e822a.json'
2025-03-18 18:25:11,854 - application.services.session_service - INFO - Skipping expired session c0edf2ac-da7a-4d7a-90cd-6e136696f28d
2025-03-18 18:25:11,854 - application.services.session_service - ERROR - Error loading session c0edf2ac-da7a-4d7a-90cd-6e136696f28d: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\c0edf2ac-da7a-4d7a-90cd-6e136696f28d.json'
2025-03-18 18:25:11,855 - application.services.session_service - INFO - Skipping expired session cb67d8c8-b7ec-4e30-a7a9-bfa962dc6b95
2025-03-18 18:25:11,855 - application.services.session_service - ERROR - Error loading session cb67d8c8-b7ec-4e30-a7a9-bfa962dc6b95: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\cb67d8c8-b7ec-4e30-a7a9-bfa962dc6b95.json'
2025-03-18 18:25:11,855 - application.services.session_service - INFO - Skipping expired session d5198628-1bd3-4b0a-b5c9-45827d28032c
2025-03-18 18:25:11,855 - application.services.session_service - ERROR - Error loading session d5198628-1bd3-4b0a-b5c9-45827d28032c: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\d5198628-1bd3-4b0a-b5c9-45827d28032c.json'
2025-03-18 18:25:11,856 - application.services.session_service - INFO - Skipping expired session e5ae788e-b9bf-48b1-9d09-e394f2e25cb7
2025-03-18 18:25:11,856 - application.services.session_service - ERROR - Error loading session e5ae788e-b9bf-48b1-9d09-e394f2e25cb7: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\e5ae788e-b9bf-48b1-9d09-e394f2e25cb7.json'
2025-03-18 18:25:11,856 - application.services.session_service - INFO - Loaded 2 sessions from disk
2025-03-18 18:25:11,857 - application.services.session_service - INFO - SessionService initialized with 2 sessions
2025-03-18 18:25:11,857 - payroll_api - INFO - SessionService initialized successfully
2025-03-18 18:25:11,890 - application.services.session_service - INFO - Cleaned up 0 old sessions
2025-03-18 18:25:11,890 - payroll_api - INFO - Startup: cleaned up sessions older than 24 hours
2025-03-18 18:25:11,890 - payroll_api - INFO - Startup: cleaned up temporary files
2025-03-18 18:29:23,080 - payroll_api - INFO - API shutting down
2025-03-18 18:29:30,663 - payroll_api - INFO - Service modules imported successfully
2025-03-18 18:29:30,685 - application.services.security.auth - INFO - API security configured
2025-03-18 18:29:30,686 - application.modules.file_agent - INFO - FileAgent を初期化します。
2025-03-18 18:29:30,725 - application.modules.file_agent - INFO - FileAgent 初期化完了: sqlite:///C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-18 18:29:30,726 - application.services.file_service - INFO - FileService initialized with temp_dir: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\temp
2025-03-18 18:29:30,726 - payroll_api - INFO - FileService initialized successfully
2025-03-18 18:29:30,726 - application.services.payroll_service - INFO - Initializing PayrollService with config: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\application\json\config.json
2025-03-18 18:29:30,726 - application.modules.agent_collection - INFO - エージェントコレクションを初期化しています...
2025-03-18 18:29:30,726 - application.modules.file_agent - INFO - FileAgent を初期化します。
2025-03-18 18:29:30,727 - application.modules.file_agent - WARNING - Could not remove existing database file: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-18 18:29:30,727 - application.modules.file_agent - WARNING - Will try to reuse existing database.
2025-03-18 18:29:30,731 - application.modules.file_agent - INFO - FileAgent 初期化完了: sqlite:///C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-18 18:29:30,732 - application.modules.agent_collection - INFO - ファイルエージェントを初期化しました。
2025-03-18 18:29:34,124 - application.modules.agent_collection - INFO - 設定ファイルを正常に読み込みました: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\application\json\config.json
2025-03-18 18:29:34,132 - application.modules.agent_collection - INFO - タスクを正常に作成。タスク数: 4
2025-03-18 18:29:34,132 - application.modules.agent_collection - INFO - IntentAnalyzer を初期化
2025-03-18 18:29:34,132 - application.modules.agent_collection - INFO - RAG_AGENT: 初期化開始
2025-03-18 18:29:34,133 - application.modules.rag_agent - INFO - RAG_Agentを初期化します。
2025-03-18 18:29:43,547 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-03-18 18:29:43,547 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-03-18 18:29:46,345 - application.modules.rag_agent - INFO - RAG用に複数ファイルからRetrieverを作成します。
2025-03-18 18:29:46,368 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-03-18 18:29:46,388 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-03-18 18:29:46,392 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-03-18 18:29:46,596 - application.modules.rag_agent - INFO - RAG_Agent初期化完了
2025-03-18 18:29:46,596 - application.modules.agent_collection - INFO - RAG_AGENT: 初期化完了
2025-03-18 18:29:46,598 - application.modules.agent_collection - INFO - workflow 作成
2025-03-18 18:29:46,598 - application.services.payroll_service - INFO - AgentCollection initialized successfully
2025-03-18 18:29:46,600 - payroll_api - INFO - PayrollService initialized successfully
2025-03-18 18:29:46,601 - application.services.session_service - INFO - Session persistence enabled, using directory: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\sessions
2025-03-18 18:29:46,601 - application.services.session_service - INFO - Skipping expired session 057b59ff-3d7d-4459-a8cc-307e2fe1711a
2025-03-18 18:29:46,602 - application.services.session_service - ERROR - Error loading session 057b59ff-3d7d-4459-a8cc-307e2fe1711a: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\057b59ff-3d7d-4459-a8cc-307e2fe1711a.json'
2025-03-18 18:29:46,603 - application.services.session_service - INFO - Skipping expired session 06099bb8-004f-416c-9616-54cbe4dcb901
2025-03-18 18:29:46,603 - application.services.session_service - ERROR - Error loading session 06099bb8-004f-416c-9616-54cbe4dcb901: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\06099bb8-004f-416c-9616-54cbe4dcb901.json'
2025-03-18 18:29:46,605 - application.services.session_service - INFO - Skipping expired session 1b712ea2-c445-4803-bcc7-a4168375ea4f
2025-03-18 18:29:46,605 - application.services.session_service - ERROR - Error loading session 1b712ea2-c445-4803-bcc7-a4168375ea4f: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\1b712ea2-c445-4803-bcc7-a4168375ea4f.json'
2025-03-18 18:29:46,606 - application.services.session_service - INFO - Skipping expired session 21ce5472-d4f3-4b33-8991-ec932a1b3a18
2025-03-18 18:29:46,609 - application.services.session_service - ERROR - Error loading session 21ce5472-d4f3-4b33-8991-ec932a1b3a18: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\21ce5472-d4f3-4b33-8991-ec932a1b3a18.json'
2025-03-18 18:29:46,612 - application.services.session_service - INFO - Skipping expired session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c
2025-03-18 18:29:46,613 - application.services.session_service - ERROR - Error loading session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\3a5589e4-9a1a-45cb-93d3-39938cae4c5c.json'
2025-03-18 18:29:46,615 - application.services.session_service - INFO - Skipping expired session 406e4e53-653b-4e7f-9c71-3963a38acd43
2025-03-18 18:29:46,616 - application.services.session_service - ERROR - Error loading session 406e4e53-653b-4e7f-9c71-3963a38acd43: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\406e4e53-653b-4e7f-9c71-3963a38acd43.json'
2025-03-18 18:29:46,617 - application.services.session_service - INFO - Skipping expired session 43a3fa0a-411e-4f83-9c1d-a06b95609d5f
2025-03-18 18:29:46,617 - application.services.session_service - ERROR - Error loading session 43a3fa0a-411e-4f83-9c1d-a06b95609d5f: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\43a3fa0a-411e-4f83-9c1d-a06b95609d5f.json'
2025-03-18 18:29:46,618 - application.services.session_service - INFO - Skipping expired session 4c354c12-95d3-4b09-9a06-769df90cf892
2025-03-18 18:29:46,618 - application.services.session_service - ERROR - Error loading session 4c354c12-95d3-4b09-9a06-769df90cf892: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\4c354c12-95d3-4b09-9a06-769df90cf892.json'
2025-03-18 18:29:46,621 - application.services.session_service - INFO - Skipping expired session 4e11869f-ea3d-403d-bbe1-c302b71c954d
2025-03-18 18:29:46,621 - application.services.session_service - ERROR - Error loading session 4e11869f-ea3d-403d-bbe1-c302b71c954d: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\4e11869f-ea3d-403d-bbe1-c302b71c954d.json'
2025-03-18 18:29:46,622 - application.services.session_service - INFO - Skipping expired session 7c8ba81c-1329-46ac-b5fe-eb498a052cf1
2025-03-18 18:29:46,623 - application.services.session_service - ERROR - Error loading session 7c8ba81c-1329-46ac-b5fe-eb498a052cf1: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\7c8ba81c-1329-46ac-b5fe-eb498a052cf1.json'
2025-03-18 18:29:46,625 - application.services.session_service - INFO - Skipping expired session 8bc09605-4e8d-42d9-98cc-c9f26c8bffc3
2025-03-18 18:29:46,627 - application.services.session_service - ERROR - Error loading session 8bc09605-4e8d-42d9-98cc-c9f26c8bffc3: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\8bc09605-4e8d-42d9-98cc-c9f26c8bffc3.json'
2025-03-18 18:29:46,629 - application.services.session_service - INFO - Skipping expired session 968e4c2d-f0b6-433b-bce3-4ef21056f06c
2025-03-18 18:29:46,632 - application.services.session_service - ERROR - Error loading session 968e4c2d-f0b6-433b-bce3-4ef21056f06c: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\968e4c2d-f0b6-433b-bce3-4ef21056f06c.json'
2025-03-18 18:29:46,634 - application.services.session_service - INFO - Skipping expired session a31aa61a-592b-47bb-af35-924ec8274000
2025-03-18 18:29:46,635 - application.services.session_service - ERROR - Error loading session a31aa61a-592b-47bb-af35-924ec8274000: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\a31aa61a-592b-47bb-af35-924ec8274000.json'
2025-03-18 18:29:46,638 - application.services.session_service - INFO - Skipping expired session ad39c9be-7c5c-498e-9074-42cd665e822a
2025-03-18 18:29:46,638 - application.services.session_service - ERROR - Error loading session ad39c9be-7c5c-498e-9074-42cd665e822a: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\ad39c9be-7c5c-498e-9074-42cd665e822a.json'
2025-03-18 18:29:46,640 - application.services.session_service - INFO - Skipping expired session c0edf2ac-da7a-4d7a-90cd-6e136696f28d
2025-03-18 18:29:46,641 - application.services.session_service - ERROR - Error loading session c0edf2ac-da7a-4d7a-90cd-6e136696f28d: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\c0edf2ac-da7a-4d7a-90cd-6e136696f28d.json'
2025-03-18 18:29:46,643 - application.services.session_service - INFO - Skipping expired session cb67d8c8-b7ec-4e30-a7a9-bfa962dc6b95
2025-03-18 18:29:46,643 - application.services.session_service - ERROR - Error loading session cb67d8c8-b7ec-4e30-a7a9-bfa962dc6b95: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\cb67d8c8-b7ec-4e30-a7a9-bfa962dc6b95.json'
2025-03-18 18:29:46,648 - application.services.session_service - INFO - Skipping expired session d5198628-1bd3-4b0a-b5c9-45827d28032c
2025-03-18 18:29:46,649 - application.services.session_service - ERROR - Error loading session d5198628-1bd3-4b0a-b5c9-45827d28032c: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\d5198628-1bd3-4b0a-b5c9-45827d28032c.json'
2025-03-18 18:29:46,650 - application.services.session_service - INFO - Skipping expired session e5ae788e-b9bf-48b1-9d09-e394f2e25cb7
2025-03-18 18:29:46,651 - application.services.session_service - ERROR - Error loading session e5ae788e-b9bf-48b1-9d09-e394f2e25cb7: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\e5ae788e-b9bf-48b1-9d09-e394f2e25cb7.json'
2025-03-18 18:29:46,652 - application.services.session_service - INFO - Loaded 2 sessions from disk
2025-03-18 18:29:46,652 - application.services.session_service - INFO - SessionService initialized with 2 sessions
2025-03-18 18:29:46,652 - payroll_api - INFO - SessionService initialized successfully
2025-03-18 18:29:46,728 - application.services.session_service - INFO - Cleaned up 0 old sessions
2025-03-18 18:29:46,728 - payroll_api - INFO - Startup: cleaned up sessions older than 24 hours
2025-03-18 18:29:46,730 - payroll_api - INFO - Startup: cleaned up temporary files
2025-03-18 18:32:36,779 - payroll_api - INFO - API shutting down
2025-03-18 18:32:45,525 - payroll_api - INFO - Service modules imported successfully
2025-03-18 18:32:45,557 - application.services.security.auth - INFO - API security configured
2025-03-18 18:32:45,558 - application.modules.file_agent - INFO - FileAgent を初期化します。
2025-03-18 18:32:45,601 - application.modules.file_agent - INFO - FileAgent 初期化完了: sqlite:///C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-18 18:32:45,602 - application.services.file_service - INFO - FileService initialized with temp_dir: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\temp
2025-03-18 18:32:45,603 - payroll_api - INFO - FileService initialized successfully
2025-03-18 18:32:45,603 - application.services.payroll_service - INFO - Initializing PayrollService with config: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\application\json\config.json
2025-03-18 18:32:45,604 - application.modules.agent_collection - INFO - エージェントコレクションを初期化しています...
2025-03-18 18:32:45,604 - application.modules.file_agent - INFO - FileAgent を初期化します。
2025-03-18 18:32:45,605 - application.modules.file_agent - WARNING - Could not remove existing database file: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-18 18:32:45,605 - application.modules.file_agent - WARNING - Will try to reuse existing database.
2025-03-18 18:32:45,609 - application.modules.file_agent - INFO - FileAgent 初期化完了: sqlite:///C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-18 18:32:45,609 - application.modules.agent_collection - INFO - ファイルエージェントを初期化しました。
2025-03-18 18:32:48,855 - application.modules.agent_collection - INFO - 設定ファイルを正常に読み込みました: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\application\json\config.json
2025-03-18 18:32:48,860 - application.modules.agent_collection - INFO - タスクを正常に作成。タスク数: 4
2025-03-18 18:32:48,860 - application.modules.agent_collection - INFO - IntentAnalyzer を初期化
2025-03-18 18:32:48,861 - application.modules.agent_collection - INFO - RAG_AGENT: 初期化開始
2025-03-18 18:32:48,862 - application.modules.rag_agent - INFO - RAG_Agentを初期化します。
2025-03-18 18:32:57,816 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-03-18 18:32:57,816 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-03-18 18:33:00,617 - application.modules.rag_agent - INFO - RAG用に複数ファイルからRetrieverを作成します。
2025-03-18 18:33:00,649 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-03-18 18:33:00,680 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-03-18 18:33:00,689 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-03-18 18:33:00,911 - application.modules.rag_agent - INFO - RAG_Agent初期化完了
2025-03-18 18:33:00,912 - application.modules.agent_collection - INFO - RAG_AGENT: 初期化完了
2025-03-18 18:33:00,912 - application.modules.agent_collection - INFO - workflow 作成
2025-03-18 18:33:00,912 - application.services.payroll_service - INFO - AgentCollection initialized successfully
2025-03-18 18:33:00,914 - payroll_api - INFO - PayrollService initialized successfully
2025-03-18 18:33:00,914 - application.services.session_service - INFO - Session persistence enabled, using directory: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\sessions
2025-03-18 18:33:00,915 - application.services.session_service - INFO - Skipping expired session 057b59ff-3d7d-4459-a8cc-307e2fe1711a
2025-03-18 18:33:00,915 - application.services.session_service - ERROR - Error loading session 057b59ff-3d7d-4459-a8cc-307e2fe1711a: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\057b59ff-3d7d-4459-a8cc-307e2fe1711a.json'
2025-03-18 18:33:00,916 - application.services.session_service - INFO - Skipping expired session 06099bb8-004f-416c-9616-54cbe4dcb901
2025-03-18 18:33:00,917 - application.services.session_service - ERROR - Error loading session 06099bb8-004f-416c-9616-54cbe4dcb901: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\06099bb8-004f-416c-9616-54cbe4dcb901.json'
2025-03-18 18:33:00,917 - application.services.session_service - INFO - Skipping expired session 1b712ea2-c445-4803-bcc7-a4168375ea4f
2025-03-18 18:33:00,918 - application.services.session_service - ERROR - Error loading session 1b712ea2-c445-4803-bcc7-a4168375ea4f: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\1b712ea2-c445-4803-bcc7-a4168375ea4f.json'
2025-03-18 18:33:00,918 - application.services.session_service - INFO - Skipping expired session 21ce5472-d4f3-4b33-8991-ec932a1b3a18
2025-03-18 18:33:00,918 - application.services.session_service - ERROR - Error loading session 21ce5472-d4f3-4b33-8991-ec932a1b3a18: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\21ce5472-d4f3-4b33-8991-ec932a1b3a18.json'
2025-03-18 18:33:00,919 - application.services.session_service - INFO - Skipping expired session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c
2025-03-18 18:33:00,921 - application.services.session_service - ERROR - Error loading session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\3a5589e4-9a1a-45cb-93d3-39938cae4c5c.json'
2025-03-18 18:33:00,922 - application.services.session_service - INFO - Skipping expired session 406e4e53-653b-4e7f-9c71-3963a38acd43
2025-03-18 18:33:00,922 - application.services.session_service - ERROR - Error loading session 406e4e53-653b-4e7f-9c71-3963a38acd43: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\406e4e53-653b-4e7f-9c71-3963a38acd43.json'
2025-03-18 18:33:00,923 - application.services.session_service - INFO - Skipping expired session 43a3fa0a-411e-4f83-9c1d-a06b95609d5f
2025-03-18 18:33:00,923 - application.services.session_service - ERROR - Error loading session 43a3fa0a-411e-4f83-9c1d-a06b95609d5f: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\43a3fa0a-411e-4f83-9c1d-a06b95609d5f.json'
2025-03-18 18:33:00,924 - application.services.session_service - INFO - Skipping expired session 4c354c12-95d3-4b09-9a06-769df90cf892
2025-03-18 18:33:00,925 - application.services.session_service - ERROR - Error loading session 4c354c12-95d3-4b09-9a06-769df90cf892: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\4c354c12-95d3-4b09-9a06-769df90cf892.json'
2025-03-18 18:33:00,926 - application.services.session_service - INFO - Skipping expired session 4e11869f-ea3d-403d-bbe1-c302b71c954d
2025-03-18 18:33:00,926 - application.services.session_service - ERROR - Error loading session 4e11869f-ea3d-403d-bbe1-c302b71c954d: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\4e11869f-ea3d-403d-bbe1-c302b71c954d.json'
2025-03-18 18:33:00,927 - application.services.session_service - INFO - Skipping expired session 7c8ba81c-1329-46ac-b5fe-eb498a052cf1
2025-03-18 18:33:00,927 - application.services.session_service - ERROR - Error loading session 7c8ba81c-1329-46ac-b5fe-eb498a052cf1: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\7c8ba81c-1329-46ac-b5fe-eb498a052cf1.json'
2025-03-18 18:33:00,928 - application.services.session_service - INFO - Skipping expired session 8bc09605-4e8d-42d9-98cc-c9f26c8bffc3
2025-03-18 18:33:00,928 - application.services.session_service - ERROR - Error loading session 8bc09605-4e8d-42d9-98cc-c9f26c8bffc3: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\8bc09605-4e8d-42d9-98cc-c9f26c8bffc3.json'
2025-03-18 18:33:00,928 - application.services.session_service - INFO - Skipping expired session 968e4c2d-f0b6-433b-bce3-4ef21056f06c
2025-03-18 18:33:00,930 - application.services.session_service - ERROR - Error loading session 968e4c2d-f0b6-433b-bce3-4ef21056f06c: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\968e4c2d-f0b6-433b-bce3-4ef21056f06c.json'
2025-03-18 18:33:00,931 - application.services.session_service - INFO - Skipping expired session a31aa61a-592b-47bb-af35-924ec8274000
2025-03-18 18:33:00,931 - application.services.session_service - ERROR - Error loading session a31aa61a-592b-47bb-af35-924ec8274000: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\a31aa61a-592b-47bb-af35-924ec8274000.json'
2025-03-18 18:33:00,932 - application.services.session_service - INFO - Skipping expired session ad39c9be-7c5c-498e-9074-42cd665e822a
2025-03-18 18:33:00,932 - application.services.session_service - ERROR - Error loading session ad39c9be-7c5c-498e-9074-42cd665e822a: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\ad39c9be-7c5c-498e-9074-42cd665e822a.json'
2025-03-18 18:33:00,933 - application.services.session_service - INFO - Skipping expired session c0edf2ac-da7a-4d7a-90cd-6e136696f28d
2025-03-18 18:33:00,933 - application.services.session_service - ERROR - Error loading session c0edf2ac-da7a-4d7a-90cd-6e136696f28d: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\c0edf2ac-da7a-4d7a-90cd-6e136696f28d.json'
2025-03-18 18:33:00,934 - application.services.session_service - INFO - Skipping expired session cb67d8c8-b7ec-4e30-a7a9-bfa962dc6b95
2025-03-18 18:33:00,934 - application.services.session_service - ERROR - Error loading session cb67d8c8-b7ec-4e30-a7a9-bfa962dc6b95: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\cb67d8c8-b7ec-4e30-a7a9-bfa962dc6b95.json'
2025-03-18 18:33:00,936 - application.services.session_service - INFO - Skipping expired session d5198628-1bd3-4b0a-b5c9-45827d28032c
2025-03-18 18:33:00,936 - application.services.session_service - ERROR - Error loading session d5198628-1bd3-4b0a-b5c9-45827d28032c: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\d5198628-1bd3-4b0a-b5c9-45827d28032c.json'
2025-03-18 18:33:00,937 - application.services.session_service - INFO - Skipping expired session e5ae788e-b9bf-48b1-9d09-e394f2e25cb7
2025-03-18 18:33:00,937 - application.services.session_service - ERROR - Error loading session e5ae788e-b9bf-48b1-9d09-e394f2e25cb7: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\e5ae788e-b9bf-48b1-9d09-e394f2e25cb7.json'
2025-03-18 18:33:00,938 - application.services.session_service - INFO - Loaded 2 sessions from disk
2025-03-18 18:33:00,938 - application.services.session_service - INFO - SessionService initialized with 2 sessions
2025-03-18 18:33:00,938 - payroll_api - INFO - SessionService initialized successfully
2025-03-18 18:33:00,982 - application.services.session_service - INFO - Cleaned up 0 old sessions
2025-03-18 18:33:00,982 - payroll_api - INFO - Startup: cleaned up sessions older than 24 hours
2025-03-18 18:33:00,983 - payroll_api - INFO - Startup: cleaned up temporary files
2025-03-18 18:34:04,633 - payroll_api - INFO - API shutting down
2025-03-18 18:34:11,676 - payroll_api - INFO - Service modules imported successfully
2025-03-18 18:34:11,714 - application.services.security.auth - INFO - API security configured
2025-03-18 18:34:11,715 - application.modules.file_agent - INFO - FileAgent を初期化します。
2025-03-18 18:34:11,760 - application.modules.file_agent - INFO - FileAgent 初期化完了: sqlite:///C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-18 18:34:11,760 - application.services.file_service - INFO - FileService initialized with temp_dir: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\temp
2025-03-18 18:34:11,761 - payroll_api - INFO - FileService initialized successfully
2025-03-18 18:34:11,761 - application.services.payroll_service - INFO - Initializing PayrollService with config: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\application\json\config.json
2025-03-18 18:34:11,763 - application.modules.agent_collection - INFO - エージェントコレクションを初期化しています...
2025-03-18 18:34:11,763 - application.modules.file_agent - INFO - FileAgent を初期化します。
2025-03-18 18:34:11,764 - application.modules.file_agent - WARNING - Could not remove existing database file: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-18 18:34:11,764 - application.modules.file_agent - WARNING - Will try to reuse existing database.
2025-03-18 18:34:11,772 - application.modules.file_agent - INFO - FileAgent 初期化完了: sqlite:///C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-18 18:34:11,773 - application.modules.agent_collection - INFO - ファイルエージェントを初期化しました。
2025-03-18 18:34:15,217 - application.modules.agent_collection - INFO - 設定ファイルを正常に読み込みました: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\application\json\config.json
2025-03-18 18:34:15,223 - application.modules.agent_collection - INFO - タスクを正常に作成。タスク数: 4
2025-03-18 18:34:15,224 - application.modules.agent_collection - INFO - IntentAnalyzer を初期化
2025-03-18 18:34:15,224 - application.modules.agent_collection - INFO - RAG_AGENT: 初期化開始
2025-03-18 18:34:15,224 - application.modules.rag_agent - INFO - RAG_Agentを初期化します。
2025-03-18 18:34:23,499 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-03-18 18:34:23,499 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-03-18 18:34:26,213 - application.modules.rag_agent - INFO - RAG用に複数ファイルからRetrieverを作成します。
2025-03-18 18:34:26,236 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-03-18 18:34:26,255 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-03-18 18:34:26,261 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-03-18 18:34:26,474 - application.modules.rag_agent - INFO - RAG_Agent初期化完了
2025-03-18 18:34:26,474 - application.modules.agent_collection - INFO - RAG_AGENT: 初期化完了
2025-03-18 18:34:26,474 - application.modules.agent_collection - INFO - workflow 作成
2025-03-18 18:34:26,475 - application.services.payroll_service - INFO - AgentCollection initialized successfully
2025-03-18 18:34:26,475 - payroll_api - INFO - PayrollService initialized successfully
2025-03-18 18:34:26,476 - application.services.session_service - INFO - Session persistence enabled, using directory: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\sessions
2025-03-18 18:34:26,476 - application.services.session_service - INFO - Skipping expired session 057b59ff-3d7d-4459-a8cc-307e2fe1711a
2025-03-18 18:34:26,477 - application.services.session_service - ERROR - Error loading session 057b59ff-3d7d-4459-a8cc-307e2fe1711a: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\057b59ff-3d7d-4459-a8cc-307e2fe1711a.json'
2025-03-18 18:34:26,478 - application.services.session_service - INFO - Skipping expired session 06099bb8-004f-416c-9616-54cbe4dcb901
2025-03-18 18:34:26,478 - application.services.session_service - ERROR - Error loading session 06099bb8-004f-416c-9616-54cbe4dcb901: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\06099bb8-004f-416c-9616-54cbe4dcb901.json'
2025-03-18 18:34:26,478 - application.services.session_service - INFO - Skipping expired session 1b712ea2-c445-4803-bcc7-a4168375ea4f
2025-03-18 18:34:26,480 - application.services.session_service - ERROR - Error loading session 1b712ea2-c445-4803-bcc7-a4168375ea4f: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\1b712ea2-c445-4803-bcc7-a4168375ea4f.json'
2025-03-18 18:34:26,480 - application.services.session_service - INFO - Skipping expired session 21ce5472-d4f3-4b33-8991-ec932a1b3a18
2025-03-18 18:34:26,481 - application.services.session_service - ERROR - Error loading session 21ce5472-d4f3-4b33-8991-ec932a1b3a18: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\21ce5472-d4f3-4b33-8991-ec932a1b3a18.json'
2025-03-18 18:34:26,482 - application.services.session_service - INFO - Skipping expired session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c
2025-03-18 18:34:26,482 - application.services.session_service - ERROR - Error loading session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\3a5589e4-9a1a-45cb-93d3-39938cae4c5c.json'
2025-03-18 18:34:26,482 - application.services.session_service - INFO - Skipping expired session 406e4e53-653b-4e7f-9c71-3963a38acd43
2025-03-18 18:34:26,484 - application.services.session_service - ERROR - Error loading session 406e4e53-653b-4e7f-9c71-3963a38acd43: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\406e4e53-653b-4e7f-9c71-3963a38acd43.json'
2025-03-18 18:34:26,484 - application.services.session_service - INFO - Skipping expired session 43a3fa0a-411e-4f83-9c1d-a06b95609d5f
2025-03-18 18:34:26,485 - application.services.session_service - ERROR - Error loading session 43a3fa0a-411e-4f83-9c1d-a06b95609d5f: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\43a3fa0a-411e-4f83-9c1d-a06b95609d5f.json'
2025-03-18 18:34:26,485 - application.services.session_service - INFO - Skipping expired session 4c354c12-95d3-4b09-9a06-769df90cf892
2025-03-18 18:34:26,486 - application.services.session_service - ERROR - Error loading session 4c354c12-95d3-4b09-9a06-769df90cf892: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\4c354c12-95d3-4b09-9a06-769df90cf892.json'
2025-03-18 18:34:26,486 - application.services.session_service - INFO - Skipping expired session 4e11869f-ea3d-403d-bbe1-c302b71c954d
2025-03-18 18:34:26,486 - application.services.session_service - ERROR - Error loading session 4e11869f-ea3d-403d-bbe1-c302b71c954d: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\4e11869f-ea3d-403d-bbe1-c302b71c954d.json'
2025-03-18 18:34:26,487 - application.services.session_service - INFO - Skipping expired session 7c8ba81c-1329-46ac-b5fe-eb498a052cf1
2025-03-18 18:34:26,488 - application.services.session_service - ERROR - Error loading session 7c8ba81c-1329-46ac-b5fe-eb498a052cf1: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\7c8ba81c-1329-46ac-b5fe-eb498a052cf1.json'
2025-03-18 18:34:26,488 - application.services.session_service - INFO - Skipping expired session 8bc09605-4e8d-42d9-98cc-c9f26c8bffc3
2025-03-18 18:34:26,489 - application.services.session_service - ERROR - Error loading session 8bc09605-4e8d-42d9-98cc-c9f26c8bffc3: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\8bc09605-4e8d-42d9-98cc-c9f26c8bffc3.json'
2025-03-18 18:34:26,489 - application.services.session_service - INFO - Skipping expired session 968e4c2d-f0b6-433b-bce3-4ef21056f06c
2025-03-18 18:34:26,490 - application.services.session_service - ERROR - Error loading session 968e4c2d-f0b6-433b-bce3-4ef21056f06c: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\968e4c2d-f0b6-433b-bce3-4ef21056f06c.json'
2025-03-18 18:34:26,490 - application.services.session_service - INFO - Skipping expired session a31aa61a-592b-47bb-af35-924ec8274000
2025-03-18 18:34:26,490 - application.services.session_service - ERROR - Error loading session a31aa61a-592b-47bb-af35-924ec8274000: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\a31aa61a-592b-47bb-af35-924ec8274000.json'
2025-03-18 18:34:26,492 - application.services.session_service - INFO - Skipping expired session ad39c9be-7c5c-498e-9074-42cd665e822a
2025-03-18 18:34:26,492 - application.services.session_service - ERROR - Error loading session ad39c9be-7c5c-498e-9074-42cd665e822a: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\ad39c9be-7c5c-498e-9074-42cd665e822a.json'
2025-03-18 18:34:26,493 - application.services.session_service - INFO - Skipping expired session c0edf2ac-da7a-4d7a-90cd-6e136696f28d
2025-03-18 18:34:26,493 - application.services.session_service - ERROR - Error loading session c0edf2ac-da7a-4d7a-90cd-6e136696f28d: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\c0edf2ac-da7a-4d7a-90cd-6e136696f28d.json'
2025-03-18 18:34:26,494 - application.services.session_service - INFO - Skipping expired session cb67d8c8-b7ec-4e30-a7a9-bfa962dc6b95
2025-03-18 18:34:26,494 - application.services.session_service - ERROR - Error loading session cb67d8c8-b7ec-4e30-a7a9-bfa962dc6b95: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\cb67d8c8-b7ec-4e30-a7a9-bfa962dc6b95.json'
2025-03-18 18:34:26,494 - application.services.session_service - INFO - Skipping expired session d5198628-1bd3-4b0a-b5c9-45827d28032c
2025-03-18 18:34:26,495 - application.services.session_service - ERROR - Error loading session d5198628-1bd3-4b0a-b5c9-45827d28032c: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\d5198628-1bd3-4b0a-b5c9-45827d28032c.json'
2025-03-18 18:34:26,495 - application.services.session_service - INFO - Skipping expired session e5ae788e-b9bf-48b1-9d09-e394f2e25cb7
2025-03-18 18:34:26,496 - application.services.session_service - ERROR - Error loading session e5ae788e-b9bf-48b1-9d09-e394f2e25cb7: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\e5ae788e-b9bf-48b1-9d09-e394f2e25cb7.json'
2025-03-18 18:34:26,496 - application.services.session_service - INFO - Loaded 2 sessions from disk
2025-03-18 18:34:26,496 - application.services.session_service - INFO - SessionService initialized with 2 sessions
2025-03-18 18:34:26,496 - payroll_api - INFO - SessionService initialized successfully
2025-03-18 18:34:26,529 - application.services.session_service - INFO - Cleaned up 0 old sessions
2025-03-18 18:34:26,529 - payroll_api - INFO - Startup: cleaned up sessions older than 24 hours
2025-03-18 18:34:26,530 - payroll_api - INFO - Startup: cleaned up temporary files
2025-03-18 18:37:22,686 - payroll_api - INFO - API shutting down
2025-03-18 18:37:29,985 - payroll_api - INFO - Service modules imported successfully
2025-03-18 18:37:30,015 - application.services.security.auth - INFO - API security configured
2025-03-18 18:37:30,015 - application.modules.file_agent - INFO - FileAgent を初期化します。
2025-03-18 18:37:30,051 - application.modules.file_agent - INFO - FileAgent 初期化完了: sqlite:///C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-18 18:37:30,052 - application.services.file_service - INFO - FileService initialized with temp_dir: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\temp
2025-03-18 18:37:30,052 - payroll_api - INFO - FileService initialized successfully
2025-03-18 18:37:30,052 - application.services.payroll_service - INFO - Initializing PayrollService with config: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\application\json\config.json
2025-03-18 18:37:30,053 - application.modules.agent_collection - INFO - エージェントコレクションを初期化しています...
2025-03-18 18:37:30,053 - application.modules.file_agent - INFO - FileAgent を初期化します。
2025-03-18 18:37:30,053 - application.modules.file_agent - WARNING - Could not remove existing database file: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-18 18:37:30,055 - application.modules.file_agent - WARNING - Will try to reuse existing database.
2025-03-18 18:37:30,058 - application.modules.file_agent - INFO - FileAgent 初期化完了: sqlite:///C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-18 18:37:30,058 - application.modules.agent_collection - INFO - ファイルエージェントを初期化しました。
2025-03-18 18:37:32,529 - application.modules.agent_collection - INFO - 設定ファイルを正常に読み込みました: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\application\json\config.json
2025-03-18 18:37:32,536 - application.modules.agent_collection - INFO - タスクを正常に作成。タスク数: 4
2025-03-18 18:37:32,536 - application.modules.agent_collection - INFO - IntentAnalyzer を初期化
2025-03-18 18:37:32,536 - application.modules.agent_collection - INFO - RAG_AGENT: 初期化開始
2025-03-18 18:37:32,536 - application.modules.rag_agent - INFO - RAG_Agentを初期化します。
2025-03-18 18:37:39,861 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-03-18 18:37:39,861 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-03-18 18:37:42,252 - application.modules.rag_agent - INFO - RAG用に複数ファイルからRetrieverを作成します。
2025-03-18 18:37:42,274 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-03-18 18:37:42,299 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-03-18 18:37:42,306 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-03-18 18:37:42,508 - application.modules.rag_agent - INFO - RAG_Agent初期化完了
2025-03-18 18:37:42,508 - application.modules.agent_collection - INFO - RAG_AGENT: 初期化完了
2025-03-18 18:37:42,509 - application.modules.agent_collection - INFO - workflow 作成
2025-03-18 18:37:42,509 - application.services.payroll_service - INFO - AgentCollection initialized successfully
2025-03-18 18:37:42,509 - payroll_api - INFO - PayrollService initialized successfully
2025-03-18 18:37:42,510 - application.services.session_service - INFO - Session persistence enabled, using directory: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\sessions
2025-03-18 18:37:42,510 - application.services.session_service - INFO - Skipping expired session 057b59ff-3d7d-4459-a8cc-307e2fe1711a
2025-03-18 18:37:42,512 - application.services.session_service - ERROR - Error loading session 057b59ff-3d7d-4459-a8cc-307e2fe1711a: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\057b59ff-3d7d-4459-a8cc-307e2fe1711a.json'
2025-03-18 18:37:42,512 - application.services.session_service - INFO - Skipping expired session 06099bb8-004f-416c-9616-54cbe4dcb901
2025-03-18 18:37:42,512 - application.services.session_service - ERROR - Error loading session 06099bb8-004f-416c-9616-54cbe4dcb901: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\06099bb8-004f-416c-9616-54cbe4dcb901.json'
2025-03-18 18:37:42,513 - application.services.session_service - INFO - Skipping expired session 1b712ea2-c445-4803-bcc7-a4168375ea4f
2025-03-18 18:37:42,513 - application.services.session_service - ERROR - Error loading session 1b712ea2-c445-4803-bcc7-a4168375ea4f: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\1b712ea2-c445-4803-bcc7-a4168375ea4f.json'
2025-03-18 18:37:42,514 - application.services.session_service - INFO - Skipping expired session 21ce5472-d4f3-4b33-8991-ec932a1b3a18
2025-03-18 18:37:42,514 - application.services.session_service - ERROR - Error loading session 21ce5472-d4f3-4b33-8991-ec932a1b3a18: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\21ce5472-d4f3-4b33-8991-ec932a1b3a18.json'
2025-03-18 18:37:42,514 - application.services.session_service - INFO - Skipping expired session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c
2025-03-18 18:37:42,515 - application.services.session_service - ERROR - Error loading session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\3a5589e4-9a1a-45cb-93d3-39938cae4c5c.json'
2025-03-18 18:37:42,515 - application.services.session_service - INFO - Skipping expired session 406e4e53-653b-4e7f-9c71-3963a38acd43
2025-03-18 18:37:42,515 - application.services.session_service - ERROR - Error loading session 406e4e53-653b-4e7f-9c71-3963a38acd43: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\406e4e53-653b-4e7f-9c71-3963a38acd43.json'
2025-03-18 18:37:42,516 - application.services.session_service - INFO - Skipping expired session 43a3fa0a-411e-4f83-9c1d-a06b95609d5f
2025-03-18 18:37:42,516 - application.services.session_service - ERROR - Error loading session 43a3fa0a-411e-4f83-9c1d-a06b95609d5f: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\43a3fa0a-411e-4f83-9c1d-a06b95609d5f.json'
2025-03-18 18:37:42,517 - application.services.session_service - INFO - Skipping expired session 4c354c12-95d3-4b09-9a06-769df90cf892
2025-03-18 18:37:42,517 - application.services.session_service - ERROR - Error loading session 4c354c12-95d3-4b09-9a06-769df90cf892: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\4c354c12-95d3-4b09-9a06-769df90cf892.json'
2025-03-18 18:37:42,517 - application.services.session_service - INFO - Skipping expired session 4e11869f-ea3d-403d-bbe1-c302b71c954d
2025-03-18 18:37:42,519 - application.services.session_service - ERROR - Error loading session 4e11869f-ea3d-403d-bbe1-c302b71c954d: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\4e11869f-ea3d-403d-bbe1-c302b71c954d.json'
2025-03-18 18:37:42,519 - application.services.session_service - INFO - Skipping expired session 7c8ba81c-1329-46ac-b5fe-eb498a052cf1
2025-03-18 18:37:42,519 - application.services.session_service - ERROR - Error loading session 7c8ba81c-1329-46ac-b5fe-eb498a052cf1: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\7c8ba81c-1329-46ac-b5fe-eb498a052cf1.json'
2025-03-18 18:37:42,520 - application.services.session_service - INFO - Skipping expired session 8bc09605-4e8d-42d9-98cc-c9f26c8bffc3
2025-03-18 18:37:42,520 - application.services.session_service - ERROR - Error loading session 8bc09605-4e8d-42d9-98cc-c9f26c8bffc3: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\8bc09605-4e8d-42d9-98cc-c9f26c8bffc3.json'
2025-03-18 18:37:42,521 - application.services.session_service - INFO - Skipping expired session 968e4c2d-f0b6-433b-bce3-4ef21056f06c
2025-03-18 18:37:42,522 - application.services.session_service - ERROR - Error loading session 968e4c2d-f0b6-433b-bce3-4ef21056f06c: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\968e4c2d-f0b6-433b-bce3-4ef21056f06c.json'
2025-03-18 18:37:42,523 - application.services.session_service - INFO - Skipping expired session a31aa61a-592b-47bb-af35-924ec8274000
2025-03-18 18:37:42,523 - application.services.session_service - ERROR - Error loading session a31aa61a-592b-47bb-af35-924ec8274000: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\a31aa61a-592b-47bb-af35-924ec8274000.json'
2025-03-18 18:37:42,523 - application.services.session_service - INFO - Skipping expired session ad39c9be-7c5c-498e-9074-42cd665e822a
2025-03-18 18:37:42,524 - application.services.session_service - ERROR - Error loading session ad39c9be-7c5c-498e-9074-42cd665e822a: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\ad39c9be-7c5c-498e-9074-42cd665e822a.json'
2025-03-18 18:37:42,524 - application.services.session_service - INFO - Skipping expired session c0edf2ac-da7a-4d7a-90cd-6e136696f28d
2025-03-18 18:37:42,525 - application.services.session_service - ERROR - Error loading session c0edf2ac-da7a-4d7a-90cd-6e136696f28d: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\c0edf2ac-da7a-4d7a-90cd-6e136696f28d.json'
2025-03-18 18:37:42,526 - application.services.session_service - INFO - Skipping expired session cb67d8c8-b7ec-4e30-a7a9-bfa962dc6b95
2025-03-18 18:37:42,526 - application.services.session_service - ERROR - Error loading session cb67d8c8-b7ec-4e30-a7a9-bfa962dc6b95: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\cb67d8c8-b7ec-4e30-a7a9-bfa962dc6b95.json'
2025-03-18 18:37:42,526 - application.services.session_service - INFO - Skipping expired session d5198628-1bd3-4b0a-b5c9-45827d28032c
2025-03-18 18:37:42,527 - application.services.session_service - ERROR - Error loading session d5198628-1bd3-4b0a-b5c9-45827d28032c: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\d5198628-1bd3-4b0a-b5c9-45827d28032c.json'
2025-03-18 18:37:42,527 - application.services.session_service - INFO - Skipping expired session e5ae788e-b9bf-48b1-9d09-e394f2e25cb7
2025-03-18 18:37:42,527 - application.services.session_service - ERROR - Error loading session e5ae788e-b9bf-48b1-9d09-e394f2e25cb7: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\e5ae788e-b9bf-48b1-9d09-e394f2e25cb7.json'
2025-03-18 18:37:42,529 - application.services.session_service - INFO - Loaded 2 sessions from disk
2025-03-18 18:37:42,529 - application.services.session_service - INFO - SessionService initialized with 2 sessions
2025-03-18 18:37:42,529 - payroll_api - INFO - SessionService initialized successfully
2025-03-18 18:37:42,560 - application.services.session_service - INFO - Cleaned up 0 old sessions
2025-03-18 18:37:42,560 - payroll_api - INFO - Startup: cleaned up sessions older than 24 hours
2025-03-18 18:37:42,562 - payroll_api - INFO - Startup: cleaned up temporary files
2025-03-18 18:38:24,016 - application.services.session_service - INFO - Created new session: c22d564a-181f-46f9-bc86-03a481bc4c78
2025-03-18 18:38:24,016 - payroll_api - INFO - Invalid session ID provided, created new session: c22d564a-181f-46f9-bc86-03a481bc4c78
2025-03-18 18:38:24,019 - payroll_api - INFO - Processing chat message for session c22d564a-181f-46f9-bc86-03a481bc4c78: 給与計算について教えてください
2025-03-18 18:38:24,021 - application.services.payroll_service - INFO - Processing message: 給与計算について教えてください
2025-03-18 18:38:24,021 - application.modules.agent_collection - ERROR - Error analyzing intent: 'AgentCollection' object has no attribute 'analyze_intent'
2025-03-18 18:38:24,026 - payroll_api - INFO - Chat processed successfully for session c22d564a-181f-46f9-bc86-03a481bc4c78, state: chat
2025-03-18 18:54:58,869 - payroll_api - INFO - API shutting down
2025-03-18 18:55:04,373 - payroll_api - INFO - Service modules imported successfully
2025-03-18 18:55:04,392 - application.services.security.auth - INFO - API security configured
2025-03-18 18:55:04,393 - application.modules.file_agent - INFO - FileAgent を初期化します。
2025-03-18 18:55:04,426 - application.modules.file_agent - INFO - FileAgent 初期化完了: sqlite:///C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-18 18:55:04,426 - application.services.file_service - INFO - FileService initialized with temp_dir: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\temp
2025-03-18 18:55:04,426 - payroll_api - INFO - FileService initialized successfully
2025-03-18 18:55:04,427 - application.services.payroll_service - INFO - Initializing PayrollService with config: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\application\json\config.json
2025-03-18 18:55:04,427 - application.modules.agent_collection - INFO - エージェントコレクションを初期化しています...
2025-03-18 18:55:04,427 - application.modules.file_agent - INFO - FileAgent を初期化します。
2025-03-18 18:55:04,427 - application.modules.file_agent - WARNING - Could not remove existing database file: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-18 18:55:04,428 - application.modules.file_agent - WARNING - Will try to reuse existing database.
2025-03-18 18:55:04,431 - application.modules.file_agent - INFO - FileAgent 初期化完了: sqlite:///C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-18 18:55:04,431 - application.modules.agent_collection - INFO - ファイルエージェントを初期化しました。
2025-03-18 18:55:06,807 - application.modules.agent_collection - INFO - 設定ファイルを正常に読み込みました: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\application\json\config.json
2025-03-18 18:55:06,808 - application.modules.agent_collection - INFO - タスクを正常に作成。タスク数: 4
2025-03-18 18:55:06,808 - application.modules.agent_collection - INFO - IntentAnalyzer を初期化
2025-03-18 18:55:06,808 - application.modules.agent_collection - INFO - RAG_AGENT: 初期化開始
2025-03-18 18:55:06,808 - application.modules.rag_agent - INFO - RAG_Agentを初期化します。
2025-03-18 18:55:14,193 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-03-18 18:55:14,193 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-03-18 18:55:16,637 - application.modules.rag_agent - INFO - RAG用に複数ファイルからRetrieverを作成します。
2025-03-18 18:55:16,666 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-03-18 18:55:16,688 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-03-18 18:55:16,694 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-03-18 18:55:16,898 - application.modules.rag_agent - INFO - RAG_Agent初期化完了
2025-03-18 18:55:16,898 - application.modules.agent_collection - INFO - RAG_AGENT: 初期化完了
2025-03-18 18:55:16,898 - application.modules.agent_collection - INFO - workflow 作成
2025-03-18 18:55:16,898 - application.services.payroll_service - INFO - AgentCollection initialized successfully
2025-03-18 18:55:16,898 - payroll_api - INFO - PayrollService initialized successfully
2025-03-18 18:55:16,898 - application.services.session_service - INFO - Session persistence enabled, using directory: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\sessions
2025-03-18 18:55:16,898 - application.services.session_service - INFO - Skipping expired session 057b59ff-3d7d-4459-a8cc-307e2fe1711a
2025-03-18 18:55:16,898 - application.services.session_service - ERROR - Error loading session 057b59ff-3d7d-4459-a8cc-307e2fe1711a: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\057b59ff-3d7d-4459-a8cc-307e2fe1711a.json'
2025-03-18 18:55:16,909 - application.services.session_service - INFO - Skipping expired session 06099bb8-004f-416c-9616-54cbe4dcb901
2025-03-18 18:55:16,909 - application.services.session_service - ERROR - Error loading session 06099bb8-004f-416c-9616-54cbe4dcb901: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\06099bb8-004f-416c-9616-54cbe4dcb901.json'
2025-03-18 18:55:16,910 - application.services.session_service - INFO - Skipping expired session 1b712ea2-c445-4803-bcc7-a4168375ea4f
2025-03-18 18:55:16,910 - application.services.session_service - ERROR - Error loading session 1b712ea2-c445-4803-bcc7-a4168375ea4f: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\1b712ea2-c445-4803-bcc7-a4168375ea4f.json'
2025-03-18 18:55:16,911 - application.services.session_service - INFO - Skipping expired session 21ce5472-d4f3-4b33-8991-ec932a1b3a18
2025-03-18 18:55:16,912 - application.services.session_service - ERROR - Error loading session 21ce5472-d4f3-4b33-8991-ec932a1b3a18: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\21ce5472-d4f3-4b33-8991-ec932a1b3a18.json'
2025-03-18 18:55:16,913 - application.services.session_service - INFO - Skipping expired session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c
2025-03-18 18:55:16,913 - application.services.session_service - ERROR - Error loading session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\3a5589e4-9a1a-45cb-93d3-39938cae4c5c.json'
2025-03-18 18:55:16,914 - application.services.session_service - INFO - Skipping expired session 406e4e53-653b-4e7f-9c71-3963a38acd43
2025-03-18 18:55:16,915 - application.services.session_service - ERROR - Error loading session 406e4e53-653b-4e7f-9c71-3963a38acd43: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\406e4e53-653b-4e7f-9c71-3963a38acd43.json'
2025-03-18 18:55:16,916 - application.services.session_service - INFO - Skipping expired session 43a3fa0a-411e-4f83-9c1d-a06b95609d5f
2025-03-18 18:55:16,916 - application.services.session_service - ERROR - Error loading session 43a3fa0a-411e-4f83-9c1d-a06b95609d5f: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\43a3fa0a-411e-4f83-9c1d-a06b95609d5f.json'
2025-03-18 18:55:16,917 - application.services.session_service - INFO - Skipping expired session 4c354c12-95d3-4b09-9a06-769df90cf892
2025-03-18 18:55:16,917 - application.services.session_service - ERROR - Error loading session 4c354c12-95d3-4b09-9a06-769df90cf892: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\4c354c12-95d3-4b09-9a06-769df90cf892.json'
2025-03-18 18:55:16,918 - application.services.session_service - INFO - Skipping expired session 4e11869f-ea3d-403d-bbe1-c302b71c954d
2025-03-18 18:55:16,919 - application.services.session_service - ERROR - Error loading session 4e11869f-ea3d-403d-bbe1-c302b71c954d: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\4e11869f-ea3d-403d-bbe1-c302b71c954d.json'
2025-03-18 18:55:16,921 - application.services.session_service - INFO - Skipping expired session 7c8ba81c-1329-46ac-b5fe-eb498a052cf1
2025-03-18 18:55:16,921 - application.services.session_service - ERROR - Error loading session 7c8ba81c-1329-46ac-b5fe-eb498a052cf1: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\7c8ba81c-1329-46ac-b5fe-eb498a052cf1.json'
2025-03-18 18:55:16,922 - application.services.session_service - INFO - Skipping expired session 8bc09605-4e8d-42d9-98cc-c9f26c8bffc3
2025-03-18 18:55:16,922 - application.services.session_service - ERROR - Error loading session 8bc09605-4e8d-42d9-98cc-c9f26c8bffc3: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\8bc09605-4e8d-42d9-98cc-c9f26c8bffc3.json'
2025-03-18 18:55:16,922 - application.services.session_service - INFO - Skipping expired session 968e4c2d-f0b6-433b-bce3-4ef21056f06c
2025-03-18 18:55:16,923 - application.services.session_service - ERROR - Error loading session 968e4c2d-f0b6-433b-bce3-4ef21056f06c: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\968e4c2d-f0b6-433b-bce3-4ef21056f06c.json'
2025-03-18 18:55:16,923 - application.services.session_service - INFO - Skipping expired session a31aa61a-592b-47bb-af35-924ec8274000
2025-03-18 18:55:16,924 - application.services.session_service - ERROR - Error loading session a31aa61a-592b-47bb-af35-924ec8274000: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\a31aa61a-592b-47bb-af35-924ec8274000.json'
2025-03-18 18:55:16,924 - application.services.session_service - INFO - Skipping expired session ad39c9be-7c5c-498e-9074-42cd665e822a
2025-03-18 18:55:16,925 - application.services.session_service - ERROR - Error loading session ad39c9be-7c5c-498e-9074-42cd665e822a: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\ad39c9be-7c5c-498e-9074-42cd665e822a.json'
2025-03-18 18:55:16,925 - application.services.session_service - INFO - Skipping expired session c0edf2ac-da7a-4d7a-90cd-6e136696f28d
2025-03-18 18:55:16,926 - application.services.session_service - ERROR - Error loading session c0edf2ac-da7a-4d7a-90cd-6e136696f28d: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\c0edf2ac-da7a-4d7a-90cd-6e136696f28d.json'
2025-03-18 18:55:16,938 - application.services.session_service - INFO - Skipping expired session cb67d8c8-b7ec-4e30-a7a9-bfa962dc6b95
2025-03-18 18:55:16,938 - application.services.session_service - ERROR - Error loading session cb67d8c8-b7ec-4e30-a7a9-bfa962dc6b95: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\cb67d8c8-b7ec-4e30-a7a9-bfa962dc6b95.json'
2025-03-18 18:55:16,939 - application.services.session_service - INFO - Skipping expired session d5198628-1bd3-4b0a-b5c9-45827d28032c
2025-03-18 18:55:16,939 - application.services.session_service - ERROR - Error loading session d5198628-1bd3-4b0a-b5c9-45827d28032c: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\d5198628-1bd3-4b0a-b5c9-45827d28032c.json'
2025-03-18 18:55:16,939 - application.services.session_service - INFO - Skipping expired session e5ae788e-b9bf-48b1-9d09-e394f2e25cb7
2025-03-18 18:55:16,940 - application.services.session_service - ERROR - Error loading session e5ae788e-b9bf-48b1-9d09-e394f2e25cb7: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\e5ae788e-b9bf-48b1-9d09-e394f2e25cb7.json'
2025-03-18 18:55:16,941 - application.services.session_service - INFO - Loaded 3 sessions from disk
2025-03-18 18:55:16,941 - application.services.session_service - INFO - SessionService initialized with 3 sessions
2025-03-18 18:55:16,941 - payroll_api - INFO - SessionService initialized successfully
2025-03-18 18:55:16,977 - application.services.session_service - INFO - Cleaned up 0 old sessions
2025-03-18 18:55:16,977 - payroll_api - INFO - Startup: cleaned up sessions older than 24 hours
2025-03-18 18:55:16,978 - payroll_api - INFO - Startup: cleaned up temporary files
2025-03-18 18:55:49,923 - application.services.session_service - INFO - Created new session: a0f5786d-4479-4363-a47e-ca89e44f5b7e
2025-03-18 18:55:49,923 - payroll_api - INFO - Created new session: a0f5786d-4479-4363-a47e-ca89e44f5b7e
2025-03-18 18:55:49,925 - payroll_api - INFO - Processing chat message for session a0f5786d-4479-4363-a47e-ca89e44f5b7e: 給与計算について教えてください
2025-03-18 18:55:49,927 - application.services.payroll_service - INFO - Processing message: 給与計算について教えてください
2025-03-18 18:55:51,804 - httpx - INFO - HTTP Request: POST https://formaigpt.openai.azure.com/openai/deployments/gptest/chat/completions?api-version=2024-02-15-preview "HTTP/1.1 200 OK"
2025-03-18 18:55:51,808 - application.modules.rag_agent - INFO - RAG_Agentに問い合わせ実行: 給与計算について教えてください
2025-03-18 18:55:51,856 - application.modules.agent_collection - ERROR - Error in route_intent: 'tuple' object has no attribute 'get'
2025-03-18 18:55:51,856 - application.modules.agent_collection - ERROR - Detailed traceback:
Traceback (most recent call last):
  File "C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\application\modules\agent_collection.py", line 219, in route_intent
    result = self._process_question(message)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\application\modules\agent_collection.py", line 242, in _process_question
    resp = self.rag_agent.execute(msg)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\application\modules\rag_agent.py", line 114, in execute
    result = self.rag_chain.invoke(question + suffix)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Udit Pradhan\formai_excelllm\venv\Lib\site-packages\langchain_core\runnables\base.py", line 3016, in invoke
    input = context.run(step.invoke, input, config)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Udit Pradhan\formai_excelllm\venv\Lib\site-packages\langchain_core\runnables\base.py", line 4713, in invoke
    return self._call_with_config(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Udit Pradhan\formai_excelllm\venv\Lib\site-packages\langchain_core\runnables\base.py", line 1914, in _call_with_config
    context.run(
  File "C:\Users\Udit Pradhan\formai_excelllm\venv\Lib\site-packages\langchain_core\runnables\config.py", line 396, in call_func_with_variable_args
    return func(input, **kwargs)  # type: ignore[call-arg]
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Udit Pradhan\formai_excelllm\venv\Lib\site-packages\langchain_core\runnables\base.py", line 4567, in _invoke
    output = call_func_with_variable_args(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Udit Pradhan\formai_excelllm\venv\Lib\site-packages\langchain_core\runnables\config.py", line 396, in call_func_with_variable_args
    return func(input, **kwargs)  # type: ignore[call-arg]
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\application\modules\azure_openai_wrapper.py", line 54, in __call__
    return self.invoke(messages)
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\application\modules\azure_openai_wrapper.py", line 30, in invoke
    if msg.get("role") == "user":
       ^^^^^^^
AttributeError: 'tuple' object has no attribute 'get'
2025-03-18 18:55:51,923 - payroll_api - INFO - Chat processed successfully for session a0f5786d-4479-4363-a47e-ca89e44f5b7e, state: chat
2025-03-18 18:56:21,834 - application.services.session_service - INFO - Created new session: 5f039400-e408-4db8-8489-96143c4fe17f
2025-03-18 18:56:21,834 - payroll_api - INFO - Invalid session ID provided, created new session: 5f039400-e408-4db8-8489-96143c4fe17f
2025-03-18 18:56:21,835 - payroll_api - INFO - Processing chat message for session 5f039400-e408-4db8-8489-96143c4fe17f: 給与計算について教えてください
2025-03-18 18:56:21,837 - application.services.payroll_service - INFO - Processing message: 給与計算について教えてください
2025-03-18 18:56:23,530 - httpx - INFO - HTTP Request: POST https://formaigpt.openai.azure.com/openai/deployments/gptest/chat/completions?api-version=2024-02-15-preview "HTTP/1.1 200 OK"
2025-03-18 18:56:23,537 - application.modules.rag_agent - INFO - RAG_Agentに問い合わせ実行: 給与計算について教えてください
2025-03-18 18:56:23,567 - application.modules.agent_collection - ERROR - Error in route_intent: 'tuple' object has no attribute 'get'
2025-03-18 18:56:23,567 - application.modules.agent_collection - ERROR - Detailed traceback:
Traceback (most recent call last):
  File "C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\application\modules\agent_collection.py", line 219, in route_intent
    result = self._process_question(message)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\application\modules\agent_collection.py", line 242, in _process_question
    resp = self.rag_agent.execute(msg)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\application\modules\rag_agent.py", line 114, in execute
    result = self.rag_chain.invoke(question + suffix)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Udit Pradhan\formai_excelllm\venv\Lib\site-packages\langchain_core\runnables\base.py", line 3016, in invoke
    input = context.run(step.invoke, input, config)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Udit Pradhan\formai_excelllm\venv\Lib\site-packages\langchain_core\runnables\base.py", line 4713, in invoke
    return self._call_with_config(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Udit Pradhan\formai_excelllm\venv\Lib\site-packages\langchain_core\runnables\base.py", line 1914, in _call_with_config
    context.run(
  File "C:\Users\Udit Pradhan\formai_excelllm\venv\Lib\site-packages\langchain_core\runnables\config.py", line 396, in call_func_with_variable_args
    return func(input, **kwargs)  # type: ignore[call-arg]
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Udit Pradhan\formai_excelllm\venv\Lib\site-packages\langchain_core\runnables\base.py", line 4567, in _invoke
    output = call_func_with_variable_args(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Udit Pradhan\formai_excelllm\venv\Lib\site-packages\langchain_core\runnables\config.py", line 396, in call_func_with_variable_args
    return func(input, **kwargs)  # type: ignore[call-arg]
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\application\modules\azure_openai_wrapper.py", line 54, in __call__
    return self.invoke(messages)
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\application\modules\azure_openai_wrapper.py", line 30, in invoke
    if msg.get("role") == "user":
       ^^^^^^^
AttributeError: 'tuple' object has no attribute 'get'
2025-03-18 18:56:23,597 - payroll_api - INFO - Chat processed successfully for session 5f039400-e408-4db8-8489-96143c4fe17f, state: chat
2025-03-18 19:07:52,420 - payroll_api - INFO - API shutting down
2025-03-18 21:26:22,489 - payroll_api - INFO - Service modules imported successfully
2025-03-18 21:26:22,537 - application.services.security.auth - INFO - API security configured
2025-03-18 21:26:22,545 - application.modules.file_agent - INFO - FileAgent を初期化します。
2025-03-18 21:26:22,652 - application.modules.file_agent - INFO - FileAgent 初期化完了: sqlite:///C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-18 21:26:22,652 - application.services.file_service - INFO - FileService initialized with temp_dir: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\temp
2025-03-18 21:26:22,652 - payroll_api - INFO - FileService initialized successfully
2025-03-18 21:26:22,652 - application.services.payroll_service - INFO - Initializing PayrollService with config: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\application\json\config.json
2025-03-18 21:26:22,652 - application.modules.agent_collection - INFO - エージェントコレクションを初期化しています...
2025-03-18 21:26:22,659 - application.modules.file_agent - INFO - FileAgent を初期化します。
2025-03-18 21:26:22,660 - application.modules.file_agent - WARNING - Could not remove existing database file: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-18 21:26:22,660 - application.modules.file_agent - WARNING - Will try to reuse existing database.
2025-03-18 21:26:22,668 - application.modules.file_agent - INFO - FileAgent 初期化完了: sqlite:///C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-18 21:26:22,668 - application.modules.agent_collection - INFO - ファイルエージェントを初期化しました。
2025-03-18 21:26:28,564 - application.modules.agent_collection - INFO - 設定ファイルを正常に読み込みました: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\application\json\config.json
2025-03-18 21:26:28,574 - application.modules.agent_collection - INFO - タスクを正常に作成。タスク数: 4
2025-03-18 21:26:28,574 - application.modules.agent_collection - INFO - IntentAnalyzer を初期化
2025-03-18 21:26:28,574 - application.modules.agent_collection - INFO - RAG_AGENT: 初期化開始
2025-03-18 21:26:28,574 - application.modules.rag_agent - INFO - RAG_Agentを初期化します。
2025-03-18 21:27:26,963 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-03-18 21:27:26,964 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-03-18 21:27:32,175 - application.modules.rag_agent - INFO - RAG用に複数ファイルからRetrieverを作成します。
2025-03-18 21:27:32,254 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-03-18 21:27:32,373 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-03-18 21:27:32,387 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-03-18 21:27:32,677 - application.modules.rag_agent - INFO - RAG_Agent初期化完了
2025-03-18 21:27:32,679 - application.modules.agent_collection - INFO - RAG_AGENT: 初期化完了
2025-03-18 21:27:32,680 - application.modules.agent_collection - INFO - workflow 作成
2025-03-18 21:27:32,684 - application.services.payroll_service - INFO - AgentCollection initialized successfully
2025-03-18 21:27:32,685 - payroll_api - INFO - PayrollService initialized successfully
2025-03-18 21:27:32,688 - application.services.session_service - INFO - Session persistence enabled, using directory: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\sessions
2025-03-18 21:27:32,693 - application.services.session_service - INFO - Skipping expired session 057b59ff-3d7d-4459-a8cc-307e2fe1711a
2025-03-18 21:27:32,696 - application.services.session_service - ERROR - Error loading session 057b59ff-3d7d-4459-a8cc-307e2fe1711a: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\057b59ff-3d7d-4459-a8cc-307e2fe1711a.json'
2025-03-18 21:27:32,701 - application.services.session_service - INFO - Skipping expired session 06099bb8-004f-416c-9616-54cbe4dcb901
2025-03-18 21:27:32,703 - application.services.session_service - ERROR - Error loading session 06099bb8-004f-416c-9616-54cbe4dcb901: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\06099bb8-004f-416c-9616-54cbe4dcb901.json'
2025-03-18 21:27:32,708 - application.services.session_service - INFO - Skipping expired session 1b712ea2-c445-4803-bcc7-a4168375ea4f
2025-03-18 21:27:32,712 - application.services.session_service - ERROR - Error loading session 1b712ea2-c445-4803-bcc7-a4168375ea4f: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\1b712ea2-c445-4803-bcc7-a4168375ea4f.json'
2025-03-18 21:27:32,718 - application.services.session_service - INFO - Skipping expired session 21ce5472-d4f3-4b33-8991-ec932a1b3a18
2025-03-18 21:27:32,720 - application.services.session_service - ERROR - Error loading session 21ce5472-d4f3-4b33-8991-ec932a1b3a18: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\21ce5472-d4f3-4b33-8991-ec932a1b3a18.json'
2025-03-18 21:27:32,728 - application.services.session_service - INFO - Skipping expired session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c
2025-03-18 21:27:32,731 - application.services.session_service - ERROR - Error loading session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\3a5589e4-9a1a-45cb-93d3-39938cae4c5c.json'
2025-03-18 21:27:32,735 - application.services.session_service - INFO - Skipping expired session 406e4e53-653b-4e7f-9c71-3963a38acd43
2025-03-18 21:27:32,738 - application.services.session_service - ERROR - Error loading session 406e4e53-653b-4e7f-9c71-3963a38acd43: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\406e4e53-653b-4e7f-9c71-3963a38acd43.json'
2025-03-18 21:27:32,742 - application.services.session_service - INFO - Skipping expired session 43a3fa0a-411e-4f83-9c1d-a06b95609d5f
2025-03-18 21:27:32,744 - application.services.session_service - ERROR - Error loading session 43a3fa0a-411e-4f83-9c1d-a06b95609d5f: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\43a3fa0a-411e-4f83-9c1d-a06b95609d5f.json'
2025-03-18 21:27:32,751 - application.services.session_service - INFO - Skipping expired session 4c354c12-95d3-4b09-9a06-769df90cf892
2025-03-18 21:27:32,753 - application.services.session_service - ERROR - Error loading session 4c354c12-95d3-4b09-9a06-769df90cf892: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\4c354c12-95d3-4b09-9a06-769df90cf892.json'
2025-03-18 21:27:32,758 - application.services.session_service - INFO - Skipping expired session 4e11869f-ea3d-403d-bbe1-c302b71c954d
2025-03-18 21:27:32,760 - application.services.session_service - ERROR - Error loading session 4e11869f-ea3d-403d-bbe1-c302b71c954d: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\4e11869f-ea3d-403d-bbe1-c302b71c954d.json'
2025-03-18 21:27:32,802 - application.services.session_service - INFO - Skipping expired session 7c8ba81c-1329-46ac-b5fe-eb498a052cf1
2025-03-18 21:27:32,804 - application.services.session_service - ERROR - Error loading session 7c8ba81c-1329-46ac-b5fe-eb498a052cf1: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\7c8ba81c-1329-46ac-b5fe-eb498a052cf1.json'
2025-03-18 21:27:32,810 - application.services.session_service - INFO - Skipping expired session 8bc09605-4e8d-42d9-98cc-c9f26c8bffc3
2025-03-18 21:27:32,812 - application.services.session_service - ERROR - Error loading session 8bc09605-4e8d-42d9-98cc-c9f26c8bffc3: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\8bc09605-4e8d-42d9-98cc-c9f26c8bffc3.json'
2025-03-18 21:27:32,818 - application.services.session_service - INFO - Skipping expired session 968e4c2d-f0b6-433b-bce3-4ef21056f06c
2025-03-18 21:27:32,822 - application.services.session_service - ERROR - Error loading session 968e4c2d-f0b6-433b-bce3-4ef21056f06c: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\968e4c2d-f0b6-433b-bce3-4ef21056f06c.json'
2025-03-18 21:27:32,869 - application.services.session_service - INFO - Skipping expired session a31aa61a-592b-47bb-af35-924ec8274000
2025-03-18 21:27:32,871 - application.services.session_service - ERROR - Error loading session a31aa61a-592b-47bb-af35-924ec8274000: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\a31aa61a-592b-47bb-af35-924ec8274000.json'
2025-03-18 21:27:32,876 - application.services.session_service - INFO - Skipping expired session ad39c9be-7c5c-498e-9074-42cd665e822a
2025-03-18 21:27:32,879 - application.services.session_service - ERROR - Error loading session ad39c9be-7c5c-498e-9074-42cd665e822a: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\ad39c9be-7c5c-498e-9074-42cd665e822a.json'
2025-03-18 21:27:32,886 - application.services.session_service - INFO - Skipping expired session c0edf2ac-da7a-4d7a-90cd-6e136696f28d
2025-03-18 21:27:32,887 - application.services.session_service - ERROR - Error loading session c0edf2ac-da7a-4d7a-90cd-6e136696f28d: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\c0edf2ac-da7a-4d7a-90cd-6e136696f28d.json'
2025-03-18 21:27:32,895 - application.services.session_service - INFO - Skipping expired session cb67d8c8-b7ec-4e30-a7a9-bfa962dc6b95
2025-03-18 21:27:32,897 - application.services.session_service - ERROR - Error loading session cb67d8c8-b7ec-4e30-a7a9-bfa962dc6b95: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\cb67d8c8-b7ec-4e30-a7a9-bfa962dc6b95.json'
2025-03-18 21:27:32,900 - application.services.session_service - INFO - Skipping expired session d5198628-1bd3-4b0a-b5c9-45827d28032c
2025-03-18 21:27:32,902 - application.services.session_service - ERROR - Error loading session d5198628-1bd3-4b0a-b5c9-45827d28032c: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\d5198628-1bd3-4b0a-b5c9-45827d28032c.json'
2025-03-18 21:27:32,905 - application.services.session_service - INFO - Skipping expired session e5ae788e-b9bf-48b1-9d09-e394f2e25cb7
2025-03-18 21:27:32,907 - application.services.session_service - ERROR - Error loading session e5ae788e-b9bf-48b1-9d09-e394f2e25cb7: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\e5ae788e-b9bf-48b1-9d09-e394f2e25cb7.json'
2025-03-18 21:27:32,908 - application.services.session_service - INFO - Loaded 5 sessions from disk
2025-03-18 21:27:32,909 - application.services.session_service - INFO - SessionService initialized with 5 sessions
2025-03-18 21:27:32,910 - payroll_api - INFO - SessionService initialized successfully
2025-03-18 21:27:33,019 - application.services.session_service - INFO - Cleaned up 0 old sessions
2025-03-18 21:27:33,019 - payroll_api - INFO - Startup: cleaned up sessions older than 24 hours
2025-03-18 21:27:33,020 - payroll_api - INFO - Startup: cleaned up temporary files
2025-03-18 21:29:45,632 - application.services.session_service - INFO - Created new session: a19d8025-01e2-4dc1-a9c8-e2f7da8ab436
2025-03-18 21:29:45,633 - payroll_api - INFO - Created new session: a19d8025-01e2-4dc1-a9c8-e2f7da8ab436
2025-03-18 21:29:45,638 - payroll_api - INFO - Processing chat message for session a19d8025-01e2-4dc1-a9c8-e2f7da8ab436: 給与計算について教えてください
2025-03-18 21:29:45,641 - application.services.payroll_service - INFO - Processing message: 給与計算について教えてください
2025-03-18 21:29:47,731 - httpx - INFO - HTTP Request: POST https://formaigpt.openai.azure.com/openai/deployments/gptest/chat/completions?api-version=2024-02-15-preview "HTTP/1.1 200 OK"
2025-03-18 21:29:47,738 - application.modules.rag_agent - INFO - RAG_Agentに問い合わせ実行: 給与計算について教えてください
2025-03-18 21:29:50,291 - httpx - INFO - HTTP Request: POST https://formaigpt.openai.azure.com/openai/deployments/gptest/chat/completions?api-version=2024-02-15-preview "HTTP/1.1 200 OK"
2025-03-18 21:29:50,310 - application.modules.agent_collection - ERROR - Error in route_intent: 1 validation error for Generation
text
  Input should be a valid string [type=string_type, input_value=<application.modules.azur...t at 0x00000286D1F46350>, input_type=AzureOpenAIWrapper.invoke.<locals>.Result]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
2025-03-18 21:29:50,313 - application.modules.agent_collection - ERROR - Detailed traceback:
Traceback (most recent call last):
  File "C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\application\modules\agent_collection.py", line 219, in route_intent
    result = self._process_question(message)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\application\modules\agent_collection.py", line 242, in _process_question
    resp = self.rag_agent.execute(msg)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\application\modules\rag_agent.py", line 114, in execute
    result = self.rag_chain.invoke(question + suffix)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Udit Pradhan\formai_excelllm\venv\Lib\site-packages\langchain_core\runnables\base.py", line 3016, in invoke
    input = context.run(step.invoke, input, config)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Udit Pradhan\formai_excelllm\venv\Lib\site-packages\langchain_core\output_parsers\base.py", line 202, in invoke
    return self._call_with_config(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Udit Pradhan\formai_excelllm\venv\Lib\site-packages\langchain_core\runnables\base.py", line 1914, in _call_with_config
    context.run(
  File "C:\Users\Udit Pradhan\formai_excelllm\venv\Lib\site-packages\langchain_core\runnables\config.py", line 396, in call_func_with_variable_args
    return func(input, **kwargs)  # type: ignore[call-arg]
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Udit Pradhan\formai_excelllm\venv\Lib\site-packages\langchain_core\output_parsers\base.py", line 203, in <lambda>
    lambda inner_input: self.parse_result([Generation(text=inner_input)]),
                                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Udit Pradhan\formai_excelllm\venv\Lib\site-packages\langchain_core\load\serializable.py", line 125, in __init__
    super().__init__(*args, **kwargs)
  File "C:\Users\Udit Pradhan\formai_excelllm\venv\Lib\site-packages\pydantic\main.py", line 214, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for Generation
text
  Input should be a valid string [type=string_type, input_value=<application.modules.azur...t at 0x00000286D1F46350>, input_type=AzureOpenAIWrapper.invoke.<locals>.Result]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
2025-03-18 21:29:50,614 - payroll_api - INFO - Chat processed successfully for session a19d8025-01e2-4dc1-a9c8-e2f7da8ab436, state: chat
2025-03-18 21:32:18,811 - payroll_api - INFO - API shutting down
2025-03-18 21:32:32,457 - payroll_api - INFO - Service modules imported successfully
2025-03-18 21:32:32,481 - application.services.security.auth - INFO - API security configured
2025-03-18 21:32:32,481 - application.modules.file_agent - INFO - FileAgent を初期化します。
2025-03-18 21:32:32,529 - application.modules.file_agent - INFO - FileAgent 初期化完了: sqlite:///C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-18 21:32:32,530 - application.services.file_service - INFO - FileService initialized with temp_dir: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\temp
2025-03-18 21:32:32,531 - payroll_api - INFO - FileService initialized successfully
2025-03-18 21:32:32,531 - application.services.payroll_service - INFO - Initializing PayrollService with config: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\application\json\config.json
2025-03-18 21:32:32,531 - application.modules.agent_collection - INFO - エージェントコレクションを初期化しています...
2025-03-18 21:32:32,532 - application.modules.file_agent - INFO - FileAgent を初期化します。
2025-03-18 21:32:32,532 - application.modules.file_agent - WARNING - Could not remove existing database file: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-18 21:32:32,533 - application.modules.file_agent - WARNING - Will try to reuse existing database.
2025-03-18 21:32:32,539 - application.modules.file_agent - INFO - FileAgent 初期化完了: sqlite:///C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-18 21:32:32,540 - application.modules.agent_collection - INFO - ファイルエージェントを初期化しました。
2025-03-18 21:32:36,033 - application.modules.agent_collection - INFO - 設定ファイルを正常に読み込みました: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\application\json\config.json
2025-03-18 21:32:36,041 - application.modules.agent_collection - INFO - タスクを正常に作成。タスク数: 4
2025-03-18 21:32:36,041 - application.modules.agent_collection - INFO - IntentAnalyzer を初期化
2025-03-18 21:32:36,041 - application.modules.agent_collection - INFO - RAG_AGENT: 初期化開始
2025-03-18 21:32:36,041 - application.modules.rag_agent - INFO - RAG_Agentを初期化します。
2025-03-18 21:32:51,564 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-03-18 21:32:51,565 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-03-18 21:32:54,370 - application.modules.rag_agent - INFO - RAG用に複数ファイルからRetrieverを作成します。
2025-03-18 21:32:54,422 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-03-18 21:32:54,472 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-03-18 21:32:54,483 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-03-18 21:32:54,714 - application.modules.rag_agent - INFO - RAG_Agent初期化完了
2025-03-18 21:32:54,714 - application.modules.agent_collection - INFO - RAG_AGENT: 初期化完了
2025-03-18 21:32:54,715 - application.modules.agent_collection - INFO - workflow 作成
2025-03-18 21:32:54,717 - application.services.payroll_service - INFO - AgentCollection initialized successfully
2025-03-18 21:32:54,718 - payroll_api - INFO - PayrollService initialized successfully
2025-03-18 21:32:54,719 - application.services.session_service - INFO - Session persistence enabled, using directory: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\sessions
2025-03-18 21:32:54,720 - application.services.session_service - INFO - Skipping expired session 057b59ff-3d7d-4459-a8cc-307e2fe1711a
2025-03-18 21:32:54,721 - application.services.session_service - ERROR - Error loading session 057b59ff-3d7d-4459-a8cc-307e2fe1711a: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\057b59ff-3d7d-4459-a8cc-307e2fe1711a.json'
2025-03-18 21:32:54,722 - application.services.session_service - INFO - Skipping expired session 06099bb8-004f-416c-9616-54cbe4dcb901
2025-03-18 21:32:54,723 - application.services.session_service - ERROR - Error loading session 06099bb8-004f-416c-9616-54cbe4dcb901: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\06099bb8-004f-416c-9616-54cbe4dcb901.json'
2025-03-18 21:32:54,724 - application.services.session_service - INFO - Skipping expired session 1b712ea2-c445-4803-bcc7-a4168375ea4f
2025-03-18 21:32:54,725 - application.services.session_service - ERROR - Error loading session 1b712ea2-c445-4803-bcc7-a4168375ea4f: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\1b712ea2-c445-4803-bcc7-a4168375ea4f.json'
2025-03-18 21:32:54,725 - application.services.session_service - INFO - Skipping expired session 21ce5472-d4f3-4b33-8991-ec932a1b3a18
2025-03-18 21:32:54,727 - application.services.session_service - ERROR - Error loading session 21ce5472-d4f3-4b33-8991-ec932a1b3a18: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\21ce5472-d4f3-4b33-8991-ec932a1b3a18.json'
2025-03-18 21:32:54,728 - application.services.session_service - INFO - Skipping expired session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c
2025-03-18 21:32:54,729 - application.services.session_service - ERROR - Error loading session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\3a5589e4-9a1a-45cb-93d3-39938cae4c5c.json'
2025-03-18 21:32:54,730 - application.services.session_service - INFO - Skipping expired session 406e4e53-653b-4e7f-9c71-3963a38acd43
2025-03-18 21:32:54,731 - application.services.session_service - ERROR - Error loading session 406e4e53-653b-4e7f-9c71-3963a38acd43: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\406e4e53-653b-4e7f-9c71-3963a38acd43.json'
2025-03-18 21:32:54,732 - application.services.session_service - INFO - Skipping expired session 43a3fa0a-411e-4f83-9c1d-a06b95609d5f
2025-03-18 21:32:54,732 - application.services.session_service - ERROR - Error loading session 43a3fa0a-411e-4f83-9c1d-a06b95609d5f: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\43a3fa0a-411e-4f83-9c1d-a06b95609d5f.json'
2025-03-18 21:32:54,733 - application.services.session_service - INFO - Skipping expired session 4c354c12-95d3-4b09-9a06-769df90cf892
2025-03-18 21:32:54,735 - application.services.session_service - ERROR - Error loading session 4c354c12-95d3-4b09-9a06-769df90cf892: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\4c354c12-95d3-4b09-9a06-769df90cf892.json'
2025-03-18 21:32:54,737 - application.services.session_service - INFO - Skipping expired session 4e11869f-ea3d-403d-bbe1-c302b71c954d
2025-03-18 21:32:54,738 - application.services.session_service - ERROR - Error loading session 4e11869f-ea3d-403d-bbe1-c302b71c954d: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\4e11869f-ea3d-403d-bbe1-c302b71c954d.json'
2025-03-18 21:32:54,739 - application.services.session_service - INFO - Skipping expired session 7c8ba81c-1329-46ac-b5fe-eb498a052cf1
2025-03-18 21:32:54,740 - application.services.session_service - ERROR - Error loading session 7c8ba81c-1329-46ac-b5fe-eb498a052cf1: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\7c8ba81c-1329-46ac-b5fe-eb498a052cf1.json'
2025-03-18 21:32:54,741 - application.services.session_service - INFO - Skipping expired session 8bc09605-4e8d-42d9-98cc-c9f26c8bffc3
2025-03-18 21:32:54,742 - application.services.session_service - ERROR - Error loading session 8bc09605-4e8d-42d9-98cc-c9f26c8bffc3: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\8bc09605-4e8d-42d9-98cc-c9f26c8bffc3.json'
2025-03-18 21:32:54,743 - application.services.session_service - INFO - Skipping expired session 968e4c2d-f0b6-433b-bce3-4ef21056f06c
2025-03-18 21:32:54,743 - application.services.session_service - ERROR - Error loading session 968e4c2d-f0b6-433b-bce3-4ef21056f06c: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\968e4c2d-f0b6-433b-bce3-4ef21056f06c.json'
2025-03-18 21:32:54,770 - application.services.session_service - INFO - Skipping expired session a31aa61a-592b-47bb-af35-924ec8274000
2025-03-18 21:32:54,771 - application.services.session_service - ERROR - Error loading session a31aa61a-592b-47bb-af35-924ec8274000: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\a31aa61a-592b-47bb-af35-924ec8274000.json'
2025-03-18 21:32:54,773 - application.services.session_service - INFO - Skipping expired session ad39c9be-7c5c-498e-9074-42cd665e822a
2025-03-18 21:32:54,773 - application.services.session_service - ERROR - Error loading session ad39c9be-7c5c-498e-9074-42cd665e822a: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\ad39c9be-7c5c-498e-9074-42cd665e822a.json'
2025-03-18 21:32:54,774 - application.services.session_service - INFO - Skipping expired session c0edf2ac-da7a-4d7a-90cd-6e136696f28d
2025-03-18 21:32:54,775 - application.services.session_service - ERROR - Error loading session c0edf2ac-da7a-4d7a-90cd-6e136696f28d: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\c0edf2ac-da7a-4d7a-90cd-6e136696f28d.json'
2025-03-18 21:32:54,778 - application.services.session_service - INFO - Skipping expired session cb67d8c8-b7ec-4e30-a7a9-bfa962dc6b95
2025-03-18 21:32:54,779 - application.services.session_service - ERROR - Error loading session cb67d8c8-b7ec-4e30-a7a9-bfa962dc6b95: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\cb67d8c8-b7ec-4e30-a7a9-bfa962dc6b95.json'
2025-03-18 21:32:54,780 - application.services.session_service - INFO - Skipping expired session d5198628-1bd3-4b0a-b5c9-45827d28032c
2025-03-18 21:32:54,781 - application.services.session_service - ERROR - Error loading session d5198628-1bd3-4b0a-b5c9-45827d28032c: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\d5198628-1bd3-4b0a-b5c9-45827d28032c.json'
2025-03-18 21:32:54,783 - application.services.session_service - INFO - Skipping expired session e5ae788e-b9bf-48b1-9d09-e394f2e25cb7
2025-03-18 21:32:54,784 - application.services.session_service - ERROR - Error loading session e5ae788e-b9bf-48b1-9d09-e394f2e25cb7: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\e5ae788e-b9bf-48b1-9d09-e394f2e25cb7.json'
2025-03-18 21:32:54,784 - application.services.session_service - INFO - Loaded 6 sessions from disk
2025-03-18 21:32:54,785 - application.services.session_service - INFO - SessionService initialized with 6 sessions
2025-03-18 21:32:54,785 - payroll_api - INFO - SessionService initialized successfully
2025-03-18 21:32:55,105 - application.services.session_service - INFO - Cleaned up 0 old sessions
2025-03-18 21:32:55,105 - payroll_api - INFO - Startup: cleaned up sessions older than 24 hours
2025-03-18 21:32:55,106 - payroll_api - INFO - Startup: cleaned up temporary files
2025-03-18 21:33:38,985 - application.services.session_service - INFO - Created new session: 27b958e6-93e1-4525-a3ad-073dae0abf2d
2025-03-18 21:33:38,986 - payroll_api - INFO - Created new session: 27b958e6-93e1-4525-a3ad-073dae0abf2d
2025-03-18 21:33:38,990 - payroll_api - INFO - Processing chat message for session 27b958e6-93e1-4525-a3ad-073dae0abf2d: 給与計算について教えてください
2025-03-18 21:33:38,993 - application.services.payroll_service - INFO - Processing message: 給与計算について教えてください
2025-03-18 21:33:40,396 - httpx - INFO - HTTP Request: POST https://formaigpt.openai.azure.com/openai/deployments/gptest/chat/completions?api-version=2024-02-15-preview "HTTP/1.1 200 OK"
2025-03-18 21:33:40,414 - application.modules.intent_analyzer - ERROR - IntentAnalyzer解析中にエラーが発生。レスポンスをunknownにフォールバック
Traceback (most recent call last):
  File "C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\application\modules\intent_analyzer.py", line 78, in _handle_response
    content = re.search(r"\{.*\}", response.content).group(0)
                                   ^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'content'
2025-03-18 21:33:40,462 - payroll_api - INFO - Chat processed successfully for session 27b958e6-93e1-4525-a3ad-073dae0abf2d, state: chat
2025-03-18 21:38:35,430 - payroll_api - INFO - API shutting down
2025-03-18 21:39:46,657 - payroll_api - INFO - Service modules imported successfully
2025-03-18 21:39:46,691 - application.services.security.auth - INFO - API security configured
2025-03-18 21:39:46,692 - application.modules.file_agent - INFO - FileAgent を初期化します。
2025-03-18 21:39:46,744 - application.modules.file_agent - INFO - FileAgent 初期化完了: sqlite:///C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-18 21:39:46,745 - application.services.file_service - INFO - FileService initialized with temp_dir: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\temp
2025-03-18 21:39:46,746 - payroll_api - INFO - FileService initialized successfully
2025-03-18 21:39:46,746 - application.services.payroll_service - INFO - Initializing PayrollService with config: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\application\json\config.json
2025-03-18 21:39:46,747 - application.modules.agent_collection - INFO - エージェントコレクションを初期化しています...
2025-03-18 21:39:46,747 - application.modules.file_agent - INFO - FileAgent を初期化します。
2025-03-18 21:39:46,748 - application.modules.file_agent - WARNING - Could not remove existing database file: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-18 21:39:46,749 - application.modules.file_agent - WARNING - Will try to reuse existing database.
2025-03-18 21:39:46,753 - application.modules.file_agent - INFO - FileAgent 初期化完了: sqlite:///C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-18 21:39:46,753 - application.modules.agent_collection - INFO - ファイルエージェントを初期化しました。
2025-03-18 21:39:50,370 - application.modules.agent_collection - INFO - 設定ファイルを正常に読み込みました: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\application\json\config.json
2025-03-18 21:39:50,376 - application.modules.agent_collection - INFO - タスクを正常に作成。タスク数: 4
2025-03-18 21:39:50,376 - application.modules.agent_collection - INFO - IntentAnalyzer を初期化
2025-03-18 21:39:50,376 - application.modules.agent_collection - INFO - RAG_AGENT: 初期化開始
2025-03-18 21:39:50,377 - application.modules.rag_agent - INFO - RAG_Agentを初期化します。
2025-03-18 21:40:06,678 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-03-18 21:40:06,679 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-03-18 21:40:09,797 - application.modules.rag_agent - INFO - RAG用に複数ファイルからRetrieverを作成します。
2025-03-18 21:40:09,853 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-03-18 21:40:09,889 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-03-18 21:40:09,901 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-03-18 21:40:10,160 - application.modules.rag_agent - INFO - RAG_Agent初期化完了
2025-03-18 21:40:10,162 - application.modules.agent_collection - INFO - RAG_AGENT: 初期化完了
2025-03-18 21:40:10,163 - application.modules.agent_collection - INFO - workflow 作成
2025-03-18 21:40:10,164 - application.services.payroll_service - INFO - AgentCollection initialized successfully
2025-03-18 21:40:10,166 - payroll_api - INFO - PayrollService initialized successfully
2025-03-18 21:40:10,169 - application.services.session_service - INFO - Session persistence enabled, using directory: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\sessions
2025-03-18 21:40:10,173 - application.services.session_service - INFO - Skipping expired session 057b59ff-3d7d-4459-a8cc-307e2fe1711a
2025-03-18 21:40:10,175 - application.services.session_service - ERROR - Error loading session 057b59ff-3d7d-4459-a8cc-307e2fe1711a: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\057b59ff-3d7d-4459-a8cc-307e2fe1711a.json'
2025-03-18 21:40:10,179 - application.services.session_service - INFO - Skipping expired session 06099bb8-004f-416c-9616-54cbe4dcb901
2025-03-18 21:40:10,182 - application.services.session_service - ERROR - Error loading session 06099bb8-004f-416c-9616-54cbe4dcb901: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\06099bb8-004f-416c-9616-54cbe4dcb901.json'
2025-03-18 21:40:10,186 - application.services.session_service - INFO - Skipping expired session 1b712ea2-c445-4803-bcc7-a4168375ea4f
2025-03-18 21:40:10,188 - application.services.session_service - ERROR - Error loading session 1b712ea2-c445-4803-bcc7-a4168375ea4f: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\1b712ea2-c445-4803-bcc7-a4168375ea4f.json'
2025-03-18 21:40:10,191 - application.services.session_service - INFO - Skipping expired session 21ce5472-d4f3-4b33-8991-ec932a1b3a18
2025-03-18 21:40:10,193 - application.services.session_service - ERROR - Error loading session 21ce5472-d4f3-4b33-8991-ec932a1b3a18: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\21ce5472-d4f3-4b33-8991-ec932a1b3a18.json'
2025-03-18 21:40:10,244 - application.services.session_service - INFO - Skipping expired session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c
2025-03-18 21:40:10,246 - application.services.session_service - ERROR - Error loading session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\3a5589e4-9a1a-45cb-93d3-39938cae4c5c.json'
2025-03-18 21:40:10,249 - application.services.session_service - INFO - Skipping expired session 406e4e53-653b-4e7f-9c71-3963a38acd43
2025-03-18 21:40:10,254 - application.services.session_service - ERROR - Error loading session 406e4e53-653b-4e7f-9c71-3963a38acd43: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\406e4e53-653b-4e7f-9c71-3963a38acd43.json'
2025-03-18 21:40:10,257 - application.services.session_service - INFO - Skipping expired session 43a3fa0a-411e-4f83-9c1d-a06b95609d5f
2025-03-18 21:40:10,259 - application.services.session_service - ERROR - Error loading session 43a3fa0a-411e-4f83-9c1d-a06b95609d5f: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\43a3fa0a-411e-4f83-9c1d-a06b95609d5f.json'
2025-03-18 21:40:10,263 - application.services.session_service - INFO - Skipping expired session 4c354c12-95d3-4b09-9a06-769df90cf892
2025-03-18 21:40:10,266 - application.services.session_service - ERROR - Error loading session 4c354c12-95d3-4b09-9a06-769df90cf892: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\4c354c12-95d3-4b09-9a06-769df90cf892.json'
2025-03-18 21:40:10,270 - application.services.session_service - INFO - Skipping expired session 4e11869f-ea3d-403d-bbe1-c302b71c954d
2025-03-18 21:40:10,272 - application.services.session_service - ERROR - Error loading session 4e11869f-ea3d-403d-bbe1-c302b71c954d: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\4e11869f-ea3d-403d-bbe1-c302b71c954d.json'
2025-03-18 21:40:10,279 - application.services.session_service - INFO - Skipping expired session 7c8ba81c-1329-46ac-b5fe-eb498a052cf1
2025-03-18 21:40:10,281 - application.services.session_service - ERROR - Error loading session 7c8ba81c-1329-46ac-b5fe-eb498a052cf1: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\7c8ba81c-1329-46ac-b5fe-eb498a052cf1.json'
2025-03-18 21:40:10,284 - application.services.session_service - INFO - Skipping expired session 8bc09605-4e8d-42d9-98cc-c9f26c8bffc3
2025-03-18 21:40:10,287 - application.services.session_service - ERROR - Error loading session 8bc09605-4e8d-42d9-98cc-c9f26c8bffc3: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\8bc09605-4e8d-42d9-98cc-c9f26c8bffc3.json'
2025-03-18 21:40:10,290 - application.services.session_service - INFO - Skipping expired session 968e4c2d-f0b6-433b-bce3-4ef21056f06c
2025-03-18 21:40:10,292 - application.services.session_service - ERROR - Error loading session 968e4c2d-f0b6-433b-bce3-4ef21056f06c: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\968e4c2d-f0b6-433b-bce3-4ef21056f06c.json'
2025-03-18 21:40:10,301 - application.services.session_service - INFO - Skipping expired session a31aa61a-592b-47bb-af35-924ec8274000
2025-03-18 21:40:10,305 - application.services.session_service - ERROR - Error loading session a31aa61a-592b-47bb-af35-924ec8274000: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\a31aa61a-592b-47bb-af35-924ec8274000.json'
2025-03-18 21:40:10,307 - application.services.session_service - INFO - Skipping expired session ad39c9be-7c5c-498e-9074-42cd665e822a
2025-03-18 21:40:10,310 - application.services.session_service - ERROR - Error loading session ad39c9be-7c5c-498e-9074-42cd665e822a: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\ad39c9be-7c5c-498e-9074-42cd665e822a.json'
2025-03-18 21:40:10,314 - application.services.session_service - INFO - Skipping expired session c0edf2ac-da7a-4d7a-90cd-6e136696f28d
2025-03-18 21:40:10,316 - application.services.session_service - ERROR - Error loading session c0edf2ac-da7a-4d7a-90cd-6e136696f28d: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\c0edf2ac-da7a-4d7a-90cd-6e136696f28d.json'
2025-03-18 21:40:10,322 - application.services.session_service - INFO - Skipping expired session cb67d8c8-b7ec-4e30-a7a9-bfa962dc6b95
2025-03-18 21:40:10,324 - application.services.session_service - ERROR - Error loading session cb67d8c8-b7ec-4e30-a7a9-bfa962dc6b95: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\cb67d8c8-b7ec-4e30-a7a9-bfa962dc6b95.json'
2025-03-18 21:40:10,328 - application.services.session_service - INFO - Skipping expired session d5198628-1bd3-4b0a-b5c9-45827d28032c
2025-03-18 21:40:10,330 - application.services.session_service - ERROR - Error loading session d5198628-1bd3-4b0a-b5c9-45827d28032c: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\d5198628-1bd3-4b0a-b5c9-45827d28032c.json'
2025-03-18 21:40:10,333 - application.services.session_service - INFO - Skipping expired session e5ae788e-b9bf-48b1-9d09-e394f2e25cb7
2025-03-18 21:40:10,336 - application.services.session_service - ERROR - Error loading session e5ae788e-b9bf-48b1-9d09-e394f2e25cb7: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\e5ae788e-b9bf-48b1-9d09-e394f2e25cb7.json'
2025-03-18 21:40:10,339 - application.services.session_service - INFO - Loaded 7 sessions from disk
2025-03-18 21:40:10,341 - application.services.session_service - INFO - SessionService initialized with 7 sessions
2025-03-18 21:40:10,343 - payroll_api - INFO - SessionService initialized successfully
2025-03-18 21:40:10,513 - application.services.session_service - INFO - Cleaned up 0 old sessions
2025-03-18 21:40:10,514 - payroll_api - INFO - Startup: cleaned up sessions older than 24 hours
2025-03-18 21:40:10,516 - payroll_api - INFO - Startup: cleaned up temporary files
2025-03-18 21:41:22,606 - application.services.session_service - INFO - Created new session: 50eec76a-f5fd-45be-87fb-2a10a0ce0c40
2025-03-18 21:41:22,606 - payroll_api - INFO - Created new session: 50eec76a-f5fd-45be-87fb-2a10a0ce0c40
2025-03-18 21:41:22,614 - payroll_api - INFO - Processing chat message for session 50eec76a-f5fd-45be-87fb-2a10a0ce0c40: 給与計算について教えてください
2025-03-18 21:41:22,618 - application.services.payroll_service - INFO - Processing message: 給与計算について教えてください
2025-03-18 21:41:24,282 - httpx - INFO - HTTP Request: POST https://formaigpt.openai.azure.com/openai/deployments/gptest/chat/completions?api-version=2024-02-15-preview "HTTP/1.1 200 OK"
2025-03-18 21:41:24,303 - application.modules.rag_agent - INFO - RAG_Agentに問い合わせ実行: 給与計算について教えてください
2025-03-18 21:41:27,560 - httpx - INFO - HTTP Request: POST https://formaigpt.openai.azure.com/openai/deployments/gptest/chat/completions?api-version=2024-02-15-preview "HTTP/1.1 200 OK"
2025-03-18 21:41:27,575 - payroll_api - INFO - Chat processed successfully for session 50eec76a-f5fd-45be-87fb-2a10a0ce0c40, state: chat
2025-03-18 21:46:41,158 - payroll_api - INFO - API shutting down
2025-03-18 21:46:52,890 - payroll_api - INFO - Service modules imported successfully
2025-03-18 21:46:52,939 - application.services.security.auth - INFO - API security configured
2025-03-18 21:46:52,940 - application.modules.file_agent - INFO - FileAgent を初期化します。
2025-03-18 21:46:53,009 - application.modules.file_agent - INFO - FileAgent 初期化完了: sqlite:///C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-18 21:46:53,012 - application.services.file_service - INFO - FileService initialized with temp_dir: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\temp
2025-03-18 21:46:53,013 - payroll_api - INFO - FileService initialized successfully
2025-03-18 21:46:53,014 - application.services.payroll_service - INFO - Initializing PayrollService with config: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\application\json\config.json
2025-03-18 21:46:53,014 - application.modules.agent_collection - INFO - エージェントコレクションを初期化しています...
2025-03-18 21:46:53,016 - application.modules.file_agent - INFO - FileAgent を初期化します。
2025-03-18 21:46:53,018 - application.modules.file_agent - WARNING - Could not remove existing database file: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-18 21:46:53,019 - application.modules.file_agent - WARNING - Will try to reuse existing database.
2025-03-18 21:46:53,025 - application.modules.file_agent - INFO - FileAgent 初期化完了: sqlite:///C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-18 21:46:53,026 - application.modules.agent_collection - INFO - ファイルエージェントを初期化しました。
2025-03-18 21:46:57,703 - application.modules.agent_collection - INFO - 設定ファイルを正常に読み込みました: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\application\json\config.json
2025-03-18 21:46:57,711 - application.modules.agent_collection - INFO - タスクを正常に作成。タスク数: 4
2025-03-18 21:46:57,711 - application.modules.agent_collection - INFO - IntentAnalyzer を初期化
2025-03-18 21:46:57,712 - application.modules.agent_collection - INFO - RAG_AGENT: 初期化開始
2025-03-18 21:46:57,713 - application.modules.rag_agent - INFO - RAG_Agentを初期化します。
2025-03-18 21:47:12,133 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-03-18 21:47:12,133 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-03-18 21:47:14,914 - application.modules.rag_agent - INFO - RAG用に複数ファイルからRetrieverを作成します。
2025-03-18 21:47:14,970 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-03-18 21:47:15,020 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-03-18 21:47:15,036 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-03-18 21:47:15,486 - application.modules.rag_agent - INFO - RAG_Agent初期化完了
2025-03-18 21:47:15,486 - application.modules.agent_collection - INFO - RAG_AGENT: 初期化完了
2025-03-18 21:47:15,487 - application.modules.agent_collection - INFO - workflow 作成
2025-03-18 21:47:15,488 - application.services.payroll_service - INFO - AgentCollection initialized successfully
2025-03-18 21:47:15,489 - payroll_api - INFO - PayrollService initialized successfully
2025-03-18 21:47:15,490 - application.services.session_service - INFO - Session persistence enabled, using directory: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\sessions
2025-03-18 21:47:15,492 - application.services.session_service - INFO - Skipping expired session 057b59ff-3d7d-4459-a8cc-307e2fe1711a
2025-03-18 21:47:15,492 - application.services.session_service - ERROR - Error loading session 057b59ff-3d7d-4459-a8cc-307e2fe1711a: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\057b59ff-3d7d-4459-a8cc-307e2fe1711a.json'
2025-03-18 21:47:15,494 - application.services.session_service - INFO - Skipping expired session 06099bb8-004f-416c-9616-54cbe4dcb901
2025-03-18 21:47:15,495 - application.services.session_service - ERROR - Error loading session 06099bb8-004f-416c-9616-54cbe4dcb901: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\06099bb8-004f-416c-9616-54cbe4dcb901.json'
2025-03-18 21:47:15,496 - application.services.session_service - INFO - Skipping expired session 1b712ea2-c445-4803-bcc7-a4168375ea4f
2025-03-18 21:47:15,497 - application.services.session_service - ERROR - Error loading session 1b712ea2-c445-4803-bcc7-a4168375ea4f: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\1b712ea2-c445-4803-bcc7-a4168375ea4f.json'
2025-03-18 21:47:15,498 - application.services.session_service - INFO - Skipping expired session 21ce5472-d4f3-4b33-8991-ec932a1b3a18
2025-03-18 21:47:15,499 - application.services.session_service - ERROR - Error loading session 21ce5472-d4f3-4b33-8991-ec932a1b3a18: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\21ce5472-d4f3-4b33-8991-ec932a1b3a18.json'
2025-03-18 21:47:15,502 - application.services.session_service - INFO - Skipping expired session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c
2025-03-18 21:47:15,503 - application.services.session_service - ERROR - Error loading session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\3a5589e4-9a1a-45cb-93d3-39938cae4c5c.json'
2025-03-18 21:47:15,506 - application.services.session_service - INFO - Skipping expired session 406e4e53-653b-4e7f-9c71-3963a38acd43
2025-03-18 21:47:15,507 - application.services.session_service - ERROR - Error loading session 406e4e53-653b-4e7f-9c71-3963a38acd43: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\406e4e53-653b-4e7f-9c71-3963a38acd43.json'
2025-03-18 21:47:15,508 - application.services.session_service - INFO - Skipping expired session 43a3fa0a-411e-4f83-9c1d-a06b95609d5f
2025-03-18 21:47:15,509 - application.services.session_service - ERROR - Error loading session 43a3fa0a-411e-4f83-9c1d-a06b95609d5f: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\43a3fa0a-411e-4f83-9c1d-a06b95609d5f.json'
2025-03-18 21:47:15,511 - application.services.session_service - INFO - Skipping expired session 4c354c12-95d3-4b09-9a06-769df90cf892
2025-03-18 21:47:15,512 - application.services.session_service - ERROR - Error loading session 4c354c12-95d3-4b09-9a06-769df90cf892: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\4c354c12-95d3-4b09-9a06-769df90cf892.json'
2025-03-18 21:47:15,513 - application.services.session_service - INFO - Skipping expired session 4e11869f-ea3d-403d-bbe1-c302b71c954d
2025-03-18 21:47:15,514 - application.services.session_service - ERROR - Error loading session 4e11869f-ea3d-403d-bbe1-c302b71c954d: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\4e11869f-ea3d-403d-bbe1-c302b71c954d.json'
2025-03-18 21:47:15,534 - application.services.session_service - INFO - Skipping expired session 7c8ba81c-1329-46ac-b5fe-eb498a052cf1
2025-03-18 21:47:15,536 - application.services.session_service - ERROR - Error loading session 7c8ba81c-1329-46ac-b5fe-eb498a052cf1: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\7c8ba81c-1329-46ac-b5fe-eb498a052cf1.json'
2025-03-18 21:47:15,538 - application.services.session_service - INFO - Skipping expired session 8bc09605-4e8d-42d9-98cc-c9f26c8bffc3
2025-03-18 21:47:15,538 - application.services.session_service - ERROR - Error loading session 8bc09605-4e8d-42d9-98cc-c9f26c8bffc3: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\8bc09605-4e8d-42d9-98cc-c9f26c8bffc3.json'
2025-03-18 21:47:15,541 - application.services.session_service - INFO - Skipping expired session 968e4c2d-f0b6-433b-bce3-4ef21056f06c
2025-03-18 21:47:15,541 - application.services.session_service - ERROR - Error loading session 968e4c2d-f0b6-433b-bce3-4ef21056f06c: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\968e4c2d-f0b6-433b-bce3-4ef21056f06c.json'
2025-03-18 21:47:15,544 - application.services.session_service - INFO - Skipping expired session a31aa61a-592b-47bb-af35-924ec8274000
2025-03-18 21:47:15,545 - application.services.session_service - ERROR - Error loading session a31aa61a-592b-47bb-af35-924ec8274000: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\a31aa61a-592b-47bb-af35-924ec8274000.json'
2025-03-18 21:47:15,548 - application.services.session_service - INFO - Skipping expired session ad39c9be-7c5c-498e-9074-42cd665e822a
2025-03-18 21:47:15,549 - application.services.session_service - ERROR - Error loading session ad39c9be-7c5c-498e-9074-42cd665e822a: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\ad39c9be-7c5c-498e-9074-42cd665e822a.json'
2025-03-18 21:47:15,550 - application.services.session_service - INFO - Skipping expired session c0edf2ac-da7a-4d7a-90cd-6e136696f28d
2025-03-18 21:47:15,551 - application.services.session_service - ERROR - Error loading session c0edf2ac-da7a-4d7a-90cd-6e136696f28d: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\c0edf2ac-da7a-4d7a-90cd-6e136696f28d.json'
2025-03-18 21:47:15,554 - application.services.session_service - INFO - Skipping expired session cb67d8c8-b7ec-4e30-a7a9-bfa962dc6b95
2025-03-18 21:47:15,555 - application.services.session_service - ERROR - Error loading session cb67d8c8-b7ec-4e30-a7a9-bfa962dc6b95: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\cb67d8c8-b7ec-4e30-a7a9-bfa962dc6b95.json'
2025-03-18 21:47:15,556 - application.services.session_service - INFO - Skipping expired session d5198628-1bd3-4b0a-b5c9-45827d28032c
2025-03-18 21:47:15,557 - application.services.session_service - ERROR - Error loading session d5198628-1bd3-4b0a-b5c9-45827d28032c: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\d5198628-1bd3-4b0a-b5c9-45827d28032c.json'
2025-03-18 21:47:15,558 - application.services.session_service - INFO - Skipping expired session e5ae788e-b9bf-48b1-9d09-e394f2e25cb7
2025-03-18 21:47:15,559 - application.services.session_service - ERROR - Error loading session e5ae788e-b9bf-48b1-9d09-e394f2e25cb7: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\e5ae788e-b9bf-48b1-9d09-e394f2e25cb7.json'
2025-03-18 21:47:15,559 - application.services.session_service - INFO - Loaded 8 sessions from disk
2025-03-18 21:47:15,561 - application.services.session_service - INFO - SessionService initialized with 8 sessions
2025-03-18 21:47:15,561 - payroll_api - INFO - SessionService initialized successfully
2025-03-18 21:47:15,881 - application.services.session_service - INFO - Cleaned up 0 old sessions
2025-03-18 21:47:15,882 - payroll_api - INFO - Startup: cleaned up sessions older than 24 hours
2025-03-18 21:47:15,884 - payroll_api - INFO - Startup: cleaned up temporary files
2025-03-18 22:24:08,137 - application.services.session_service - INFO - Created new session: c1b6ec0d-f135-4a2d-8c5f-ddfb2069ec2c
2025-03-18 22:24:08,139 - payroll_api - INFO - Invalid session ID provided, created new session: c1b6ec0d-f135-4a2d-8c5f-ddfb2069ec2c
2025-03-18 22:24:08,150 - payroll_api - INFO - Task list requested for session c1b6ec0d-f135-4a2d-8c5f-ddfb2069ec2c
2025-03-18 22:24:08,167 - application.services.session_service - INFO - Created new session: b56bad55-8b61-4967-b6e6-50d30e71b384
2025-03-18 22:24:08,171 - payroll_api - INFO - Invalid session ID provided, created new session: b56bad55-8b61-4967-b6e6-50d30e71b384
2025-03-18 22:24:08,174 - payroll_api - INFO - Files list requested for session b56bad55-8b61-4967-b6e6-50d30e71b384
2025-03-18 22:24:08,294 - application.services.session_service - INFO - Created new session: c91ed40a-6a35-46d3-ae4e-23e3bd75d9a9
2025-03-18 22:24:08,294 - payroll_api - INFO - Invalid session ID provided, created new session: c91ed40a-6a35-46d3-ae4e-23e3bd75d9a9
2025-03-18 22:24:08,296 - payroll_api - INFO - Session history list requested for session c91ed40a-6a35-46d3-ae4e-23e3bd75d9a9
2025-03-18 22:24:08,305 - application.services.session_service - INFO - Created new session: 00c0c4c5-bacb-498b-bd0c-9b58190a196f
2025-03-18 22:24:08,306 - payroll_api - INFO - Invalid session ID provided, created new session: 00c0c4c5-bacb-498b-bd0c-9b58190a196f
2025-03-18 22:24:08,306 - payroll_api - INFO - Task list requested for session 00c0c4c5-bacb-498b-bd0c-9b58190a196f
2025-03-18 22:24:08,322 - application.services.session_service - INFO - Created new session: 88749399-6a9e-4db0-82dd-f0779ceed011
2025-03-18 22:24:08,322 - payroll_api - INFO - Invalid session ID provided, created new session: 88749399-6a9e-4db0-82dd-f0779ceed011
2025-03-18 22:24:08,324 - payroll_api - INFO - Files list requested for session 88749399-6a9e-4db0-82dd-f0779ceed011
2025-03-18 22:24:08,335 - application.services.session_service - INFO - Created new session: 1b6ff092-5adc-4886-9d3a-2a5fb5cd7ca7
2025-03-18 22:24:08,336 - payroll_api - INFO - Invalid session ID provided, created new session: 1b6ff092-5adc-4886-9d3a-2a5fb5cd7ca7
2025-03-18 22:24:08,337 - payroll_api - INFO - Session history list requested for session 1b6ff092-5adc-4886-9d3a-2a5fb5cd7ca7
2025-03-18 22:24:10,939 - application.services.session_service - INFO - Created new session: ebefed65-5b2a-4d44-b7e4-67d5033e3464
2025-03-18 22:24:10,939 - payroll_api - INFO - Invalid session ID provided, created new session: ebefed65-5b2a-4d44-b7e4-67d5033e3464
2025-03-18 22:24:10,940 - payroll_api - INFO - Session reset requested for ebefed65-5b2a-4d44-b7e4-67d5033e3464
2025-03-18 22:24:10,943 - application.modules.agent_collection - INFO - タスク 支給控除等一覧(データ更新) をリセットします。
2025-03-18 22:24:10,946 - application.modules.agent_collection - INFO - タスク 支給控除等一覧(後処理) をリセットします。
2025-03-18 22:24:10,947 - application.modules.agent_collection - INFO - タスク Yonosukeデータ作成(加算処理) をリセットします。
2025-03-18 22:24:10,948 - application.modules.agent_collection - INFO - タスク Yonosukeデータ作成(データ除去) をリセットします。
2025-03-18 22:24:10,948 - application.modules.agent_collection - INFO - 状態を変更: chat -> chat
2025-03-18 22:24:34,310 - application.services.session_service - INFO - Created new session: 26e0894a-3144-4b28-8552-40ccfda40fbe
2025-03-18 22:24:34,311 - payroll_api - INFO - Invalid session ID provided, created new session: 26e0894a-3144-4b28-8552-40ccfda40fbe
2025-03-18 22:24:34,317 - payroll_api - INFO - Processing chat message for session 26e0894a-3144-4b28-8552-40ccfda40fbe: 給与計算について教えてください
2025-03-18 22:24:34,319 - application.services.payroll_service - INFO - Processing message: 給与計算について教えてください
2025-03-18 22:24:38,039 - httpx - INFO - HTTP Request: POST https://formaigpt.openai.azure.com/openai/deployments/gptest/chat/completions?api-version=2024-02-15-preview "HTTP/1.1 200 OK"
2025-03-18 22:24:38,055 - application.modules.rag_agent - INFO - RAG_Agentに問い合わせ実行: 給与計算について教えてください
2025-03-18 22:24:45,140 - httpx - INFO - HTTP Request: POST https://formaigpt.openai.azure.com/openai/deployments/gptest/chat/completions?api-version=2024-02-15-preview "HTTP/1.1 200 OK"
2025-03-18 22:24:45,145 - payroll_api - INFO - Chat processed successfully for session 26e0894a-3144-4b28-8552-40ccfda40fbe, state: chat
2025-03-18 22:27:46,136 - payroll_api - INFO - Conversation history requested for session session1
2025-03-18 22:27:46,137 - application.services.session_service - INFO - Session session1 not found or expired
2025-03-18 22:27:46,137 - payroll_api - ERROR - Error getting conversation history: Session session1 not found or has no history
2025-03-19 15:46:15,948 - payroll_api - INFO - Service modules imported successfully
2025-03-19 15:46:15,962 - application.services.security.auth - INFO - API security configured
2025-03-19 15:46:15,962 - application.modules.file_agent - INFO - FileAgent を初期化します。
2025-03-19 15:46:16,020 - application.modules.file_agent - INFO - FileAgent 初期化完了: sqlite:///C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-19 15:46:16,020 - application.services.file_service - INFO - FileService initialized with temp_dir: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\temp
2025-03-19 15:46:16,020 - payroll_api - INFO - FileService initialized successfully
2025-03-19 15:46:16,020 - application.services.payroll_service - INFO - Initializing PayrollService with config: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\application\json\config.json
2025-03-19 15:46:16,020 - application.modules.agent_collection - INFO - エージェントコレクションを初期化しています...
2025-03-19 15:46:16,020 - application.modules.file_agent - INFO - FileAgent を初期化します。
2025-03-19 15:46:16,020 - application.modules.file_agent - WARNING - Could not remove existing database file: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-19 15:46:16,020 - application.modules.file_agent - WARNING - Will try to reuse existing database.
2025-03-19 15:46:16,020 - application.modules.file_agent - INFO - FileAgent 初期化完了: sqlite:///C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-19 15:46:16,020 - application.modules.agent_collection - INFO - ファイルエージェントを初期化しました。
2025-03-19 15:46:17,842 - application.modules.agent_collection - INFO - 設定ファイルを正常に読み込みました: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\application\json\config.json
2025-03-19 15:46:17,856 - application.modules.agent_collection - INFO - タスクを正常に作成。タスク数: 4
2025-03-19 15:46:17,856 - application.modules.agent_collection - INFO - IntentAnalyzer を初期化
2025-03-19 15:46:17,857 - application.modules.agent_collection - INFO - RAG_AGENT: 初期化開始
2025-03-19 15:46:17,857 - application.modules.rag_agent - INFO - RAG_Agentを初期化します。
2025-03-19 15:46:45,706 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-03-19 15:46:45,706 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-03-19 15:46:48,523 - application.modules.rag_agent - INFO - RAG用に複数ファイルからRetrieverを作成します。
2025-03-19 15:46:48,568 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-03-19 15:46:48,836 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-03-19 15:46:48,844 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-03-19 15:46:49,119 - application.modules.rag_agent - INFO - RAG_Agent初期化完了
2025-03-19 15:46:49,119 - application.modules.agent_collection - INFO - RAG_AGENT: 初期化完了
2025-03-19 15:46:49,119 - application.modules.agent_collection - INFO - workflow 作成
2025-03-19 15:46:49,119 - application.services.payroll_service - INFO - AgentCollection initialized successfully
2025-03-19 15:46:49,121 - payroll_api - INFO - PayrollService initialized successfully
2025-03-19 15:46:49,121 - application.services.session_service - INFO - Session persistence enabled, using directory: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\sessions
2025-03-19 15:46:49,137 - application.services.session_service - INFO - Skipping expired session 057b59ff-3d7d-4459-a8cc-307e2fe1711a
2025-03-19 15:46:49,138 - application.services.session_service - ERROR - Error loading session 057b59ff-3d7d-4459-a8cc-307e2fe1711a: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\057b59ff-3d7d-4459-a8cc-307e2fe1711a.json'
2025-03-19 15:46:49,148 - application.services.session_service - INFO - Skipping expired session 06099bb8-004f-416c-9616-54cbe4dcb901
2025-03-19 15:46:49,149 - application.services.session_service - ERROR - Error loading session 06099bb8-004f-416c-9616-54cbe4dcb901: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\06099bb8-004f-416c-9616-54cbe4dcb901.json'
2025-03-19 15:46:49,168 - application.services.session_service - INFO - Skipping expired session 1b712ea2-c445-4803-bcc7-a4168375ea4f
2025-03-19 15:46:49,169 - application.services.session_service - ERROR - Error loading session 1b712ea2-c445-4803-bcc7-a4168375ea4f: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\1b712ea2-c445-4803-bcc7-a4168375ea4f.json'
2025-03-19 15:46:49,179 - application.services.session_service - INFO - Skipping expired session 21ce5472-d4f3-4b33-8991-ec932a1b3a18
2025-03-19 15:46:49,180 - application.services.session_service - ERROR - Error loading session 21ce5472-d4f3-4b33-8991-ec932a1b3a18: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\21ce5472-d4f3-4b33-8991-ec932a1b3a18.json'
2025-03-19 15:46:49,218 - application.services.session_service - INFO - Skipping expired session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c
2025-03-19 15:46:49,218 - application.services.session_service - ERROR - Error loading session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\3a5589e4-9a1a-45cb-93d3-39938cae4c5c.json'
2025-03-19 15:46:49,229 - application.services.session_service - INFO - Skipping expired session 406e4e53-653b-4e7f-9c71-3963a38acd43
2025-03-19 15:46:49,229 - application.services.session_service - ERROR - Error loading session 406e4e53-653b-4e7f-9c71-3963a38acd43: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\406e4e53-653b-4e7f-9c71-3963a38acd43.json'
2025-03-19 15:46:49,237 - application.services.session_service - INFO - Skipping expired session 43a3fa0a-411e-4f83-9c1d-a06b95609d5f
2025-03-19 15:46:49,237 - application.services.session_service - ERROR - Error loading session 43a3fa0a-411e-4f83-9c1d-a06b95609d5f: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\43a3fa0a-411e-4f83-9c1d-a06b95609d5f.json'
2025-03-19 15:46:49,248 - application.services.session_service - INFO - Skipping expired session 4c354c12-95d3-4b09-9a06-769df90cf892
2025-03-19 15:46:49,249 - application.services.session_service - ERROR - Error loading session 4c354c12-95d3-4b09-9a06-769df90cf892: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\4c354c12-95d3-4b09-9a06-769df90cf892.json'
2025-03-19 15:46:49,258 - application.services.session_service - INFO - Skipping expired session 4e11869f-ea3d-403d-bbe1-c302b71c954d
2025-03-19 15:46:49,258 - application.services.session_service - ERROR - Error loading session 4e11869f-ea3d-403d-bbe1-c302b71c954d: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\4e11869f-ea3d-403d-bbe1-c302b71c954d.json'
2025-03-19 15:46:49,286 - application.services.session_service - INFO - Skipping expired session 7c8ba81c-1329-46ac-b5fe-eb498a052cf1
2025-03-19 15:46:49,286 - application.services.session_service - ERROR - Error loading session 7c8ba81c-1329-46ac-b5fe-eb498a052cf1: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\7c8ba81c-1329-46ac-b5fe-eb498a052cf1.json'
2025-03-19 15:46:49,303 - application.services.session_service - INFO - Skipping expired session 8bc09605-4e8d-42d9-98cc-c9f26c8bffc3
2025-03-19 15:46:49,303 - application.services.session_service - ERROR - Error loading session 8bc09605-4e8d-42d9-98cc-c9f26c8bffc3: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\8bc09605-4e8d-42d9-98cc-c9f26c8bffc3.json'
2025-03-19 15:46:49,319 - application.services.session_service - INFO - Skipping expired session 968e4c2d-f0b6-433b-bce3-4ef21056f06c
2025-03-19 15:46:49,319 - application.services.session_service - ERROR - Error loading session 968e4c2d-f0b6-433b-bce3-4ef21056f06c: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\968e4c2d-f0b6-433b-bce3-4ef21056f06c.json'
2025-03-19 15:46:49,351 - application.services.session_service - INFO - Skipping expired session a31aa61a-592b-47bb-af35-924ec8274000
2025-03-19 15:46:49,351 - application.services.session_service - ERROR - Error loading session a31aa61a-592b-47bb-af35-924ec8274000: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\a31aa61a-592b-47bb-af35-924ec8274000.json'
2025-03-19 15:46:49,365 - application.services.session_service - INFO - Skipping expired session ad39c9be-7c5c-498e-9074-42cd665e822a
2025-03-19 15:46:49,365 - application.services.session_service - ERROR - Error loading session ad39c9be-7c5c-498e-9074-42cd665e822a: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\ad39c9be-7c5c-498e-9074-42cd665e822a.json'
2025-03-19 15:46:49,392 - application.services.session_service - INFO - Skipping expired session c0edf2ac-da7a-4d7a-90cd-6e136696f28d
2025-03-19 15:46:49,393 - application.services.session_service - ERROR - Error loading session c0edf2ac-da7a-4d7a-90cd-6e136696f28d: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\c0edf2ac-da7a-4d7a-90cd-6e136696f28d.json'
2025-03-19 15:46:49,445 - application.services.session_service - INFO - Skipping expired session cb67d8c8-b7ec-4e30-a7a9-bfa962dc6b95
2025-03-19 15:46:49,445 - application.services.session_service - ERROR - Error loading session cb67d8c8-b7ec-4e30-a7a9-bfa962dc6b95: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\cb67d8c8-b7ec-4e30-a7a9-bfa962dc6b95.json'
2025-03-19 15:46:49,445 - application.services.session_service - INFO - Skipping expired session d5198628-1bd3-4b0a-b5c9-45827d28032c
2025-03-19 15:46:49,445 - application.services.session_service - ERROR - Error loading session d5198628-1bd3-4b0a-b5c9-45827d28032c: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\d5198628-1bd3-4b0a-b5c9-45827d28032c.json'
2025-03-19 15:46:49,469 - application.services.session_service - INFO - Skipping expired session e5ae788e-b9bf-48b1-9d09-e394f2e25cb7
2025-03-19 15:46:49,471 - application.services.session_service - ERROR - Error loading session e5ae788e-b9bf-48b1-9d09-e394f2e25cb7: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\e5ae788e-b9bf-48b1-9d09-e394f2e25cb7.json'
2025-03-19 15:46:49,482 - application.services.session_service - INFO - Loaded 16 sessions from disk
2025-03-19 15:46:49,482 - application.services.session_service - INFO - SessionService initialized with 16 sessions
2025-03-19 15:46:49,482 - payroll_api - INFO - SessionService initialized successfully
2025-03-19 15:46:49,731 - application.services.session_service - INFO - Cleaned up 0 old sessions
2025-03-19 15:46:49,731 - payroll_api - INFO - Startup: cleaned up sessions older than 24 hours
2025-03-19 15:46:49,736 - payroll_api - INFO - Startup: cleaned up temporary files
2025-03-19 16:18:36,983 - payroll_api - INFO - API shutting down
2025-03-19 16:18:43,651 - payroll_api - INFO - Service modules imported successfully
2025-03-19 16:18:43,684 - application.services.security.auth - INFO - API security configured
2025-03-19 16:18:43,684 - application.modules.file_agent - INFO - FileAgent を初期化します。
2025-03-19 16:18:43,728 - application.modules.file_agent - INFO - FileAgent 初期化完了: sqlite:///C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-19 16:18:43,728 - application.services.file_service - INFO - FileService initialized with temp_dir: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\temp
2025-03-19 16:18:43,730 - payroll_api - INFO - FileService initialized successfully
2025-03-19 16:18:43,730 - application.services.payroll_service - INFO - Initializing PayrollService with config: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\application\json\config.json
2025-03-19 16:18:43,731 - application.modules.agent_collection - INFO - エージェントコレクションを初期化しています...
2025-03-19 16:18:43,731 - application.modules.file_agent - INFO - FileAgent を初期化します。
2025-03-19 16:18:43,731 - application.modules.file_agent - WARNING - Could not remove existing database file: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-19 16:18:43,733 - application.modules.file_agent - WARNING - Will try to reuse existing database.
2025-03-19 16:18:43,735 - application.modules.file_agent - INFO - FileAgent 初期化完了: sqlite:///C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-19 16:18:43,735 - application.modules.agent_collection - INFO - ファイルエージェントを初期化しました。
2025-03-19 16:18:46,598 - application.modules.agent_collection - INFO - 設定ファイルを正常に読み込みました: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\application\json\config.json
2025-03-19 16:18:46,615 - application.modules.agent_collection - INFO - タスクを正常に作成。タスク数: 4
2025-03-19 16:18:46,615 - application.modules.agent_collection - INFO - IntentAnalyzer を初期化
2025-03-19 16:18:46,615 - application.modules.agent_collection - INFO - RAG_AGENT: 初期化開始
2025-03-19 16:18:46,615 - application.modules.rag_agent - INFO - RAG_Agentを初期化します。
2025-03-19 16:18:57,765 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-03-19 16:18:57,765 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-03-19 16:19:00,146 - application.modules.rag_agent - INFO - RAG用に複数ファイルからRetrieverを作成します。
2025-03-19 16:19:00,176 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-03-19 16:19:00,198 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-03-19 16:19:00,217 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-03-19 16:19:00,437 - application.modules.rag_agent - INFO - RAG_Agent初期化完了
2025-03-19 16:19:00,438 - application.modules.agent_collection - INFO - RAG_AGENT: 初期化完了
2025-03-19 16:19:00,438 - application.modules.agent_collection - INFO - workflow 作成
2025-03-19 16:19:00,439 - application.services.payroll_service - INFO - AgentCollection initialized successfully
2025-03-19 16:19:00,439 - payroll_api - INFO - PayrollService initialized successfully
2025-03-19 16:19:00,440 - application.services.session_service - INFO - Session persistence enabled, using directory: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\sessions
2025-03-19 16:19:00,441 - application.services.session_service - INFO - Skipping expired session 057b59ff-3d7d-4459-a8cc-307e2fe1711a
2025-03-19 16:19:00,442 - application.services.session_service - ERROR - Error loading session 057b59ff-3d7d-4459-a8cc-307e2fe1711a: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\057b59ff-3d7d-4459-a8cc-307e2fe1711a.json'
2025-03-19 16:19:00,443 - application.services.session_service - INFO - Skipping expired session 06099bb8-004f-416c-9616-54cbe4dcb901
2025-03-19 16:19:00,443 - application.services.session_service - ERROR - Error loading session 06099bb8-004f-416c-9616-54cbe4dcb901: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\06099bb8-004f-416c-9616-54cbe4dcb901.json'
2025-03-19 16:19:00,445 - application.services.session_service - INFO - Skipping expired session 1b712ea2-c445-4803-bcc7-a4168375ea4f
2025-03-19 16:19:00,445 - application.services.session_service - ERROR - Error loading session 1b712ea2-c445-4803-bcc7-a4168375ea4f: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\1b712ea2-c445-4803-bcc7-a4168375ea4f.json'
2025-03-19 16:19:00,446 - application.services.session_service - INFO - Skipping expired session 21ce5472-d4f3-4b33-8991-ec932a1b3a18
2025-03-19 16:19:00,447 - application.services.session_service - ERROR - Error loading session 21ce5472-d4f3-4b33-8991-ec932a1b3a18: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\21ce5472-d4f3-4b33-8991-ec932a1b3a18.json'
2025-03-19 16:19:00,449 - application.services.session_service - INFO - Skipping expired session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c
2025-03-19 16:19:00,449 - application.services.session_service - ERROR - Error loading session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\3a5589e4-9a1a-45cb-93d3-39938cae4c5c.json'
2025-03-19 16:19:00,450 - application.services.session_service - INFO - Skipping expired session 406e4e53-653b-4e7f-9c71-3963a38acd43
2025-03-19 16:19:00,450 - application.services.session_service - ERROR - Error loading session 406e4e53-653b-4e7f-9c71-3963a38acd43: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\406e4e53-653b-4e7f-9c71-3963a38acd43.json'
2025-03-19 16:19:00,451 - application.services.session_service - INFO - Skipping expired session 43a3fa0a-411e-4f83-9c1d-a06b95609d5f
2025-03-19 16:19:00,452 - application.services.session_service - ERROR - Error loading session 43a3fa0a-411e-4f83-9c1d-a06b95609d5f: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\43a3fa0a-411e-4f83-9c1d-a06b95609d5f.json'
2025-03-19 16:19:00,453 - application.services.session_service - INFO - Skipping expired session 4c354c12-95d3-4b09-9a06-769df90cf892
2025-03-19 16:19:00,453 - application.services.session_service - ERROR - Error loading session 4c354c12-95d3-4b09-9a06-769df90cf892: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\4c354c12-95d3-4b09-9a06-769df90cf892.json'
2025-03-19 16:19:00,454 - application.services.session_service - INFO - Skipping expired session 4e11869f-ea3d-403d-bbe1-c302b71c954d
2025-03-19 16:19:00,454 - application.services.session_service - ERROR - Error loading session 4e11869f-ea3d-403d-bbe1-c302b71c954d: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\4e11869f-ea3d-403d-bbe1-c302b71c954d.json'
2025-03-19 16:19:00,456 - application.services.session_service - INFO - Skipping expired session 7c8ba81c-1329-46ac-b5fe-eb498a052cf1
2025-03-19 16:19:00,457 - application.services.session_service - ERROR - Error loading session 7c8ba81c-1329-46ac-b5fe-eb498a052cf1: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\7c8ba81c-1329-46ac-b5fe-eb498a052cf1.json'
2025-03-19 16:19:00,459 - application.services.session_service - INFO - Skipping expired session 8bc09605-4e8d-42d9-98cc-c9f26c8bffc3
2025-03-19 16:19:00,459 - application.services.session_service - ERROR - Error loading session 8bc09605-4e8d-42d9-98cc-c9f26c8bffc3: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\8bc09605-4e8d-42d9-98cc-c9f26c8bffc3.json'
2025-03-19 16:19:00,460 - application.services.session_service - INFO - Skipping expired session 968e4c2d-f0b6-433b-bce3-4ef21056f06c
2025-03-19 16:19:00,461 - application.services.session_service - ERROR - Error loading session 968e4c2d-f0b6-433b-bce3-4ef21056f06c: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\968e4c2d-f0b6-433b-bce3-4ef21056f06c.json'
2025-03-19 16:19:00,462 - application.services.session_service - INFO - Skipping expired session a31aa61a-592b-47bb-af35-924ec8274000
2025-03-19 16:19:00,462 - application.services.session_service - ERROR - Error loading session a31aa61a-592b-47bb-af35-924ec8274000: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\a31aa61a-592b-47bb-af35-924ec8274000.json'
2025-03-19 16:19:00,463 - application.services.session_service - INFO - Skipping expired session ad39c9be-7c5c-498e-9074-42cd665e822a
2025-03-19 16:19:00,464 - application.services.session_service - ERROR - Error loading session ad39c9be-7c5c-498e-9074-42cd665e822a: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\ad39c9be-7c5c-498e-9074-42cd665e822a.json'
2025-03-19 16:19:00,465 - application.services.session_service - INFO - Skipping expired session c0edf2ac-da7a-4d7a-90cd-6e136696f28d
2025-03-19 16:19:00,466 - application.services.session_service - ERROR - Error loading session c0edf2ac-da7a-4d7a-90cd-6e136696f28d: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\c0edf2ac-da7a-4d7a-90cd-6e136696f28d.json'
2025-03-19 16:19:00,468 - application.services.session_service - INFO - Skipping expired session cb67d8c8-b7ec-4e30-a7a9-bfa962dc6b95
2025-03-19 16:19:00,468 - application.services.session_service - ERROR - Error loading session cb67d8c8-b7ec-4e30-a7a9-bfa962dc6b95: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\cb67d8c8-b7ec-4e30-a7a9-bfa962dc6b95.json'
2025-03-19 16:19:00,469 - application.services.session_service - INFO - Skipping expired session d5198628-1bd3-4b0a-b5c9-45827d28032c
2025-03-19 16:19:00,470 - application.services.session_service - ERROR - Error loading session d5198628-1bd3-4b0a-b5c9-45827d28032c: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\d5198628-1bd3-4b0a-b5c9-45827d28032c.json'
2025-03-19 16:19:00,471 - application.services.session_service - INFO - Skipping expired session e5ae788e-b9bf-48b1-9d09-e394f2e25cb7
2025-03-19 16:19:00,471 - application.services.session_service - ERROR - Error loading session e5ae788e-b9bf-48b1-9d09-e394f2e25cb7: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\e5ae788e-b9bf-48b1-9d09-e394f2e25cb7.json'
2025-03-19 16:19:00,472 - application.services.session_service - INFO - Loaded 16 sessions from disk
2025-03-19 16:19:00,473 - application.services.session_service - INFO - SessionService initialized with 16 sessions
2025-03-19 16:19:00,473 - payroll_api - INFO - SessionService initialized successfully
2025-03-19 16:19:00,747 - application.services.session_service - INFO - Cleaned up 0 old sessions
2025-03-19 16:19:00,747 - payroll_api - INFO - Startup: cleaned up sessions older than 24 hours
2025-03-19 16:19:00,747 - payroll_api - INFO - Startup: cleaned up temporary files
2025-03-19 16:19:46,410 - payroll_api - INFO - API shutting down
2025-03-19 16:19:53,962 - payroll_api - INFO - Service modules imported successfully
2025-03-19 16:19:53,981 - application.modules.file_agent - INFO - FileAgent を初期化します。
2025-03-19 16:19:54,080 - application.modules.file_agent - INFO - FileAgent 初期化完了: sqlite:///C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-19 16:19:54,081 - application.services.file_service - INFO - FileService initialized with temp_dir: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\temp
2025-03-19 16:19:54,082 - payroll_api - INFO - FileService initialized successfully
2025-03-19 16:19:54,082 - application.services.payroll_service - INFO - Initializing PayrollService with config: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\application\json\config.json
2025-03-19 16:19:54,083 - application.modules.agent_collection - INFO - エージェントコレクションを初期化しています...
2025-03-19 16:19:54,083 - application.modules.file_agent - INFO - FileAgent を初期化します。
2025-03-19 16:19:54,083 - application.modules.file_agent - WARNING - Could not remove existing database file: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-19 16:19:54,084 - application.modules.file_agent - WARNING - Will try to reuse existing database.
2025-03-19 16:19:54,089 - application.modules.file_agent - INFO - FileAgent 初期化完了: sqlite:///C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-19 16:19:54,089 - application.modules.agent_collection - INFO - ファイルエージェントを初期化しました。
2025-03-19 16:19:57,132 - application.modules.agent_collection - INFO - 設定ファイルを正常に読み込みました: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\application\json\config.json
2025-03-19 16:19:57,148 - application.modules.agent_collection - INFO - タスクを正常に作成。タスク数: 4
2025-03-19 16:19:57,148 - application.modules.agent_collection - INFO - IntentAnalyzer を初期化
2025-03-19 16:19:57,148 - application.modules.agent_collection - INFO - RAG_AGENT: 初期化開始
2025-03-19 16:19:57,148 - application.modules.rag_agent - INFO - RAG_Agentを初期化します。
2025-03-19 16:20:07,609 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-03-19 16:20:07,609 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-03-19 16:20:10,296 - application.modules.rag_agent - INFO - RAG用に複数ファイルからRetrieverを作成します。
2025-03-19 16:20:10,326 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-03-19 16:20:10,357 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-03-19 16:20:10,369 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-03-19 16:20:10,601 - application.modules.rag_agent - INFO - RAG_Agent初期化完了
2025-03-19 16:20:10,601 - application.modules.agent_collection - INFO - RAG_AGENT: 初期化完了
2025-03-19 16:20:10,601 - application.modules.agent_collection - INFO - workflow 作成
2025-03-19 16:20:10,601 - application.services.payroll_service - INFO - AgentCollection initialized successfully
2025-03-19 16:20:10,601 - payroll_api - INFO - PayrollService initialized successfully
2025-03-19 16:20:10,601 - application.services.session_service - INFO - Session persistence enabled, using directory: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\sessions
2025-03-19 16:20:10,601 - application.services.session_service - INFO - Skipping expired session 057b59ff-3d7d-4459-a8cc-307e2fe1711a
2025-03-19 16:20:10,601 - application.services.session_service - ERROR - Error loading session 057b59ff-3d7d-4459-a8cc-307e2fe1711a: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\057b59ff-3d7d-4459-a8cc-307e2fe1711a.json'
2025-03-19 16:20:10,601 - application.services.session_service - INFO - Skipping expired session 06099bb8-004f-416c-9616-54cbe4dcb901
2025-03-19 16:20:10,601 - application.services.session_service - ERROR - Error loading session 06099bb8-004f-416c-9616-54cbe4dcb901: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\06099bb8-004f-416c-9616-54cbe4dcb901.json'
2025-03-19 16:20:10,601 - application.services.session_service - INFO - Skipping expired session 1b712ea2-c445-4803-bcc7-a4168375ea4f
2025-03-19 16:20:10,601 - application.services.session_service - ERROR - Error loading session 1b712ea2-c445-4803-bcc7-a4168375ea4f: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\1b712ea2-c445-4803-bcc7-a4168375ea4f.json'
2025-03-19 16:20:10,601 - application.services.session_service - INFO - Skipping expired session 21ce5472-d4f3-4b33-8991-ec932a1b3a18
2025-03-19 16:20:10,601 - application.services.session_service - ERROR - Error loading session 21ce5472-d4f3-4b33-8991-ec932a1b3a18: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\21ce5472-d4f3-4b33-8991-ec932a1b3a18.json'
2025-03-19 16:20:10,616 - application.services.session_service - INFO - Skipping expired session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c
2025-03-19 16:20:10,616 - application.services.session_service - ERROR - Error loading session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\3a5589e4-9a1a-45cb-93d3-39938cae4c5c.json'
2025-03-19 16:20:10,617 - application.services.session_service - INFO - Skipping expired session 406e4e53-653b-4e7f-9c71-3963a38acd43
2025-03-19 16:20:10,619 - application.services.session_service - ERROR - Error loading session 406e4e53-653b-4e7f-9c71-3963a38acd43: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\406e4e53-653b-4e7f-9c71-3963a38acd43.json'
2025-03-19 16:20:10,620 - application.services.session_service - INFO - Skipping expired session 43a3fa0a-411e-4f83-9c1d-a06b95609d5f
2025-03-19 16:20:10,620 - application.services.session_service - ERROR - Error loading session 43a3fa0a-411e-4f83-9c1d-a06b95609d5f: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\43a3fa0a-411e-4f83-9c1d-a06b95609d5f.json'
2025-03-19 16:20:10,622 - application.services.session_service - INFO - Skipping expired session 4c354c12-95d3-4b09-9a06-769df90cf892
2025-03-19 16:20:10,623 - application.services.session_service - ERROR - Error loading session 4c354c12-95d3-4b09-9a06-769df90cf892: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\4c354c12-95d3-4b09-9a06-769df90cf892.json'
2025-03-19 16:20:10,623 - application.services.session_service - INFO - Skipping expired session 4e11869f-ea3d-403d-bbe1-c302b71c954d
2025-03-19 16:20:10,624 - application.services.session_service - ERROR - Error loading session 4e11869f-ea3d-403d-bbe1-c302b71c954d: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\4e11869f-ea3d-403d-bbe1-c302b71c954d.json'
2025-03-19 16:20:10,625 - application.services.session_service - INFO - Skipping expired session 7c8ba81c-1329-46ac-b5fe-eb498a052cf1
2025-03-19 16:20:10,626 - application.services.session_service - ERROR - Error loading session 7c8ba81c-1329-46ac-b5fe-eb498a052cf1: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\7c8ba81c-1329-46ac-b5fe-eb498a052cf1.json'
2025-03-19 16:20:10,628 - application.services.session_service - INFO - Skipping expired session 8bc09605-4e8d-42d9-98cc-c9f26c8bffc3
2025-03-19 16:20:10,629 - application.services.session_service - ERROR - Error loading session 8bc09605-4e8d-42d9-98cc-c9f26c8bffc3: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\8bc09605-4e8d-42d9-98cc-c9f26c8bffc3.json'
2025-03-19 16:20:10,630 - application.services.session_service - INFO - Skipping expired session 968e4c2d-f0b6-433b-bce3-4ef21056f06c
2025-03-19 16:20:10,631 - application.services.session_service - ERROR - Error loading session 968e4c2d-f0b6-433b-bce3-4ef21056f06c: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\968e4c2d-f0b6-433b-bce3-4ef21056f06c.json'
2025-03-19 16:20:10,632 - application.services.session_service - INFO - Skipping expired session a31aa61a-592b-47bb-af35-924ec8274000
2025-03-19 16:20:10,632 - application.services.session_service - ERROR - Error loading session a31aa61a-592b-47bb-af35-924ec8274000: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\a31aa61a-592b-47bb-af35-924ec8274000.json'
2025-03-19 16:20:10,633 - application.services.session_service - INFO - Skipping expired session ad39c9be-7c5c-498e-9074-42cd665e822a
2025-03-19 16:20:10,634 - application.services.session_service - ERROR - Error loading session ad39c9be-7c5c-498e-9074-42cd665e822a: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\ad39c9be-7c5c-498e-9074-42cd665e822a.json'
2025-03-19 16:20:10,635 - application.services.session_service - INFO - Skipping expired session c0edf2ac-da7a-4d7a-90cd-6e136696f28d
2025-03-19 16:20:10,636 - application.services.session_service - ERROR - Error loading session c0edf2ac-da7a-4d7a-90cd-6e136696f28d: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\c0edf2ac-da7a-4d7a-90cd-6e136696f28d.json'
2025-03-19 16:20:10,638 - application.services.session_service - INFO - Skipping expired session cb67d8c8-b7ec-4e30-a7a9-bfa962dc6b95
2025-03-19 16:20:10,638 - application.services.session_service - ERROR - Error loading session cb67d8c8-b7ec-4e30-a7a9-bfa962dc6b95: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\cb67d8c8-b7ec-4e30-a7a9-bfa962dc6b95.json'
2025-03-19 16:20:10,640 - application.services.session_service - INFO - Skipping expired session d5198628-1bd3-4b0a-b5c9-45827d28032c
2025-03-19 16:20:10,641 - application.services.session_service - ERROR - Error loading session d5198628-1bd3-4b0a-b5c9-45827d28032c: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\d5198628-1bd3-4b0a-b5c9-45827d28032c.json'
2025-03-19 16:20:10,642 - application.services.session_service - INFO - Skipping expired session e5ae788e-b9bf-48b1-9d09-e394f2e25cb7
2025-03-19 16:20:10,643 - application.services.session_service - ERROR - Error loading session e5ae788e-b9bf-48b1-9d09-e394f2e25cb7: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\e5ae788e-b9bf-48b1-9d09-e394f2e25cb7.json'
2025-03-19 16:20:10,644 - application.services.session_service - INFO - Loaded 16 sessions from disk
2025-03-19 16:20:10,644 - application.services.session_service - INFO - SessionService initialized with 16 sessions
2025-03-19 16:20:10,644 - payroll_api - INFO - SessionService initialized successfully
2025-03-19 16:20:10,684 - application.services.session_service - INFO - Cleaned up 0 old sessions
2025-03-19 16:20:10,685 - payroll_api - INFO - Startup: cleaned up sessions older than 24 hours
2025-03-19 16:20:10,685 - payroll_api - INFO - Startup: cleaned up temporary files
2025-03-19 16:22:27,878 - payroll_api - INFO - API shutting down
2025-03-19 16:22:36,180 - payroll_api - INFO - Service modules imported successfully
2025-03-19 16:22:36,196 - application.modules.file_agent - INFO - FileAgent を初期化します。
2025-03-19 16:22:36,231 - application.modules.file_agent - INFO - FileAgent 初期化完了: sqlite:///C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-19 16:22:36,232 - application.services.file_service - INFO - FileService initialized with temp_dir: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\temp
2025-03-19 16:22:36,232 - payroll_api - INFO - FileService initialized successfully
2025-03-19 16:22:36,233 - application.services.payroll_service - INFO - Initializing PayrollService with config: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\application\json\config.json
2025-03-19 16:22:36,233 - application.modules.agent_collection - INFO - エージェントコレクションを初期化しています...
2025-03-19 16:22:36,233 - application.modules.file_agent - INFO - FileAgent を初期化します。
2025-03-19 16:22:36,234 - application.modules.file_agent - WARNING - Could not remove existing database file: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-19 16:22:36,234 - application.modules.file_agent - WARNING - Will try to reuse existing database.
2025-03-19 16:22:36,237 - application.modules.file_agent - INFO - FileAgent 初期化完了: sqlite:///C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\data\app.db
2025-03-19 16:22:36,238 - application.modules.agent_collection - INFO - ファイルエージェントを初期化しました。
2025-03-19 16:22:39,557 - application.modules.agent_collection - INFO - 設定ファイルを正常に読み込みました: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\application\json\config.json
2025-03-19 16:22:39,559 - application.modules.agent_collection - INFO - タスクを正常に作成。タスク数: 4
2025-03-19 16:22:39,559 - application.modules.agent_collection - INFO - IntentAnalyzer を初期化
2025-03-19 16:22:39,559 - application.modules.agent_collection - INFO - RAG_AGENT: 初期化開始
2025-03-19 16:22:39,559 - application.modules.rag_agent - INFO - RAG_Agentを初期化します。
2025-03-19 16:22:50,353 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-03-19 16:22:50,353 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-03-19 16:22:53,432 - application.modules.rag_agent - INFO - RAG用に複数ファイルからRetrieverを作成します。
2025-03-19 16:22:53,469 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-03-19 16:22:53,513 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-03-19 16:22:53,529 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-03-19 16:22:54,221 - application.modules.rag_agent - INFO - RAG_Agent初期化完了
2025-03-19 16:22:54,221 - application.modules.agent_collection - INFO - RAG_AGENT: 初期化完了
2025-03-19 16:22:54,221 - application.modules.agent_collection - INFO - workflow 作成
2025-03-19 16:22:54,222 - application.services.payroll_service - INFO - AgentCollection initialized successfully
2025-03-19 16:22:54,223 - payroll_api - INFO - PayrollService initialized successfully
2025-03-19 16:22:54,223 - application.services.session_service - INFO - Session persistence enabled, using directory: C:\Users\Udit Pradhan\formai_excelllm\InfoDeliver\sessions
2025-03-19 16:22:54,225 - application.services.session_service - INFO - Skipping expired session 057b59ff-3d7d-4459-a8cc-307e2fe1711a
2025-03-19 16:22:54,226 - application.services.session_service - ERROR - Error loading session 057b59ff-3d7d-4459-a8cc-307e2fe1711a: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\057b59ff-3d7d-4459-a8cc-307e2fe1711a.json'
2025-03-19 16:22:54,227 - application.services.session_service - INFO - Skipping expired session 06099bb8-004f-416c-9616-54cbe4dcb901
2025-03-19 16:22:54,227 - application.services.session_service - ERROR - Error loading session 06099bb8-004f-416c-9616-54cbe4dcb901: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\06099bb8-004f-416c-9616-54cbe4dcb901.json'
2025-03-19 16:22:54,229 - application.services.session_service - INFO - Skipping expired session 1b712ea2-c445-4803-bcc7-a4168375ea4f
2025-03-19 16:22:54,229 - application.services.session_service - ERROR - Error loading session 1b712ea2-c445-4803-bcc7-a4168375ea4f: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\1b712ea2-c445-4803-bcc7-a4168375ea4f.json'
2025-03-19 16:22:54,230 - application.services.session_service - INFO - Skipping expired session 21ce5472-d4f3-4b33-8991-ec932a1b3a18
2025-03-19 16:22:54,231 - application.services.session_service - ERROR - Error loading session 21ce5472-d4f3-4b33-8991-ec932a1b3a18: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\21ce5472-d4f3-4b33-8991-ec932a1b3a18.json'
2025-03-19 16:22:54,234 - application.services.session_service - INFO - Skipping expired session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c
2025-03-19 16:22:54,235 - application.services.session_service - ERROR - Error loading session 3a5589e4-9a1a-45cb-93d3-39938cae4c5c: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\3a5589e4-9a1a-45cb-93d3-39938cae4c5c.json'
2025-03-19 16:22:54,236 - application.services.session_service - INFO - Skipping expired session 406e4e53-653b-4e7f-9c71-3963a38acd43
2025-03-19 16:22:54,237 - application.services.session_service - ERROR - Error loading session 406e4e53-653b-4e7f-9c71-3963a38acd43: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\406e4e53-653b-4e7f-9c71-3963a38acd43.json'
2025-03-19 16:22:54,238 - application.services.session_service - INFO - Skipping expired session 43a3fa0a-411e-4f83-9c1d-a06b95609d5f
2025-03-19 16:22:54,239 - application.services.session_service - ERROR - Error loading session 43a3fa0a-411e-4f83-9c1d-a06b95609d5f: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\43a3fa0a-411e-4f83-9c1d-a06b95609d5f.json'
2025-03-19 16:22:54,240 - application.services.session_service - INFO - Skipping expired session 4c354c12-95d3-4b09-9a06-769df90cf892
2025-03-19 16:22:54,240 - application.services.session_service - ERROR - Error loading session 4c354c12-95d3-4b09-9a06-769df90cf892: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\4c354c12-95d3-4b09-9a06-769df90cf892.json'
2025-03-19 16:22:54,242 - application.services.session_service - INFO - Skipping expired session 4e11869f-ea3d-403d-bbe1-c302b71c954d
2025-03-19 16:22:54,242 - application.services.session_service - ERROR - Error loading session 4e11869f-ea3d-403d-bbe1-c302b71c954d: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\4e11869f-ea3d-403d-bbe1-c302b71c954d.json'
2025-03-19 16:22:54,244 - application.services.session_service - INFO - Skipping expired session 7c8ba81c-1329-46ac-b5fe-eb498a052cf1
2025-03-19 16:22:54,245 - application.services.session_service - ERROR - Error loading session 7c8ba81c-1329-46ac-b5fe-eb498a052cf1: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\7c8ba81c-1329-46ac-b5fe-eb498a052cf1.json'
2025-03-19 16:22:54,246 - application.services.session_service - INFO - Skipping expired session 8bc09605-4e8d-42d9-98cc-c9f26c8bffc3
2025-03-19 16:22:54,247 - application.services.session_service - ERROR - Error loading session 8bc09605-4e8d-42d9-98cc-c9f26c8bffc3: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\8bc09605-4e8d-42d9-98cc-c9f26c8bffc3.json'
2025-03-19 16:22:54,248 - application.services.session_service - INFO - Skipping expired session 968e4c2d-f0b6-433b-bce3-4ef21056f06c
2025-03-19 16:22:54,249 - application.services.session_service - ERROR - Error loading session 968e4c2d-f0b6-433b-bce3-4ef21056f06c: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\968e4c2d-f0b6-433b-bce3-4ef21056f06c.json'
2025-03-19 16:22:54,252 - application.services.session_service - INFO - Skipping expired session a31aa61a-592b-47bb-af35-924ec8274000
2025-03-19 16:22:54,253 - application.services.session_service - ERROR - Error loading session a31aa61a-592b-47bb-af35-924ec8274000: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\a31aa61a-592b-47bb-af35-924ec8274000.json'
2025-03-19 16:22:54,254 - application.services.session_service - INFO - Skipping expired session ad39c9be-7c5c-498e-9074-42cd665e822a
2025-03-19 16:22:54,255 - application.services.session_service - ERROR - Error loading session ad39c9be-7c5c-498e-9074-42cd665e822a: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\ad39c9be-7c5c-498e-9074-42cd665e822a.json'
2025-03-19 16:22:54,257 - application.services.session_service - INFO - Skipping expired session c0edf2ac-da7a-4d7a-90cd-6e136696f28d
2025-03-19 16:22:54,258 - application.services.session_service - ERROR - Error loading session c0edf2ac-da7a-4d7a-90cd-6e136696f28d: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\c0edf2ac-da7a-4d7a-90cd-6e136696f28d.json'
2025-03-19 16:22:54,262 - application.services.session_service - INFO - Skipping expired session cb67d8c8-b7ec-4e30-a7a9-bfa962dc6b95
2025-03-19 16:22:54,262 - application.services.session_service - ERROR - Error loading session cb67d8c8-b7ec-4e30-a7a9-bfa962dc6b95: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\cb67d8c8-b7ec-4e30-a7a9-bfa962dc6b95.json'
2025-03-19 16:22:54,263 - application.services.session_service - INFO - Skipping expired session d5198628-1bd3-4b0a-b5c9-45827d28032c
2025-03-19 16:22:54,264 - application.services.session_service - ERROR - Error loading session d5198628-1bd3-4b0a-b5c9-45827d28032c: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\d5198628-1bd3-4b0a-b5c9-45827d28032c.json'
2025-03-19 16:22:54,265 - application.services.session_service - INFO - Skipping expired session e5ae788e-b9bf-48b1-9d09-e394f2e25cb7
2025-03-19 16:22:54,266 - application.services.session_service - ERROR - Error loading session e5ae788e-b9bf-48b1-9d09-e394f2e25cb7: [WinError 32] The process cannot access the file because it is being used by another process: 'C:\\Users\\Udit Pradhan\\formai_excelllm\\InfoDeliver\\sessions\\e5ae788e-b9bf-48b1-9d09-e394f2e25cb7.json'
2025-03-19 16:22:54,268 - application.services.session_service - INFO - Loaded 16 sessions from disk
2025-03-19 16:22:54,268 - application.services.session_service - INFO - SessionService initialized with 16 sessions
2025-03-19 16:22:54,269 - payroll_api - INFO - SessionService initialized successfully
2025-03-19 16:22:54,328 - application.services.session_service - INFO - Cleaned up 0 old sessions
2025-03-19 16:22:54,328 - payroll_api - INFO - Startup: cleaned up sessions older than 24 hours
2025-03-19 16:22:54,329 - payroll_api - INFO - Startup: cleaned up temporary files
2025-03-19 16:32:11,693 - payroll_api - INFO - API shutting down
